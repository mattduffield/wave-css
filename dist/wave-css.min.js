function Be(d){return d.tagName.includes("-")}function Ae(){return"xxxx-xxxx-xxxx-xxxx".replace(/[x]/g,()=>(Math.random()*16|0).toString(16))}function k(d){return new Promise((i,e)=>{if(document.querySelector(`link[rel="stylesheet"][href="${d}"]`)){i();return}let t=document.createElement("link");t.rel="stylesheet",t.href=d,t.onload=()=>i(),t.onerror=n=>e(n),document.head.appendChild(t);let o=setInterval(()=>{getComputedStyle(document.body).getPropertyValue("display")&&(clearInterval(o),i())},50)})}function S(d){return new Promise((i,e)=>{if(document.querySelector(`script[src="${d}"]`)){i();return}let t=document.createElement("script");t.src=d,t.onload=i,t.onerror=e,document.head.appendChild(t)})}function A(d,i){return new Promise((e,t)=>{if(document.querySelector(`script[src="${d}"]`)){if(i&&window[i])e();else{let n=setInterval(()=>{window[i]&&(clearInterval(n),e())},50)}return}let o=document.createElement("script");o.src=d,o.onload=()=>{if(i&&!window[i]){let n=setInterval(()=>{window[i]&&(clearInterval(n),e())},50)}else e()},o.onerror=n=>{t(n)},document.head.appendChild(o)})}function L(d,i){return new Promise((e,t)=>{if(document.querySelector(`style#${d}`)){e();return}let o=document.createElement("style");o.id=d,o.textContent=i.trim(),o.onload=e,o.onerror=t,document.head.appendChild(o)})}function Pe(d){return new Promise((i,e)=>{if(document.querySelector(`link[href="${d}"]`)){i();return}let t=document.createElement("link");t.rel="stylesheet",t.href=d,t.onload=i,t.onerror=e,document.head.appendChild(t)})}function He(d,i){if(d.matches&&d.matches(i))return d;let e=d.querySelector(i);if(e)return e;let t=d.querySelectorAll("*");for(let o of t)if(o.shadowRoot){let n=this.locator(o.shadowRoot,i);if(n)return n}}function $e(d,i){let e=[];d.matches&&d.matches(i)&&e.push(d),e.push(...d.querySelectorAll(i));let t=d.querySelectorAll("*");for(let o of t)o.shadowRoot&&e.push(...this.locatorAll(o.shadowRoot,i));return e}function We(d,i=3e3,e=100){return new Promise((t,o)=>{let n=Date.now(),s=()=>{let a=document.querySelector(d);a&&a.offsetParent!==null?t(a):Date.now()-n>i?o(new Error(`Timeout: Selector "${d}" not found or not visible after ${i}ms`)):setTimeout(s,e)};s()})}function ze(d,i){let e=!1;return e=wc.linksLoaded[d]&&wc.scriptsLoaded[i],e}function Oe(d=[],i=[],e=5e3,t=100){return new Promise((o,n)=>{let s=Date.now(),a=Array.isArray(d)?d:[d],r=Array.isArray(i)?i:[i],l=()=>{let c=a.length===0||a.every(u=>window.wc?.scriptsLoaded?.[u]===!0),p=r.length===0||r.every(u=>window.wc?.linksLoaded?.[u]===!0);c&&p?o():Date.now()-s>e?n(new Error(`Timeout: Dependencies not available after ${e}ms. Scripts: ${JSON.stringify(a)}, Links: ${JSON.stringify(r)}`)):setTimeout(l,t)};l()})}function Ie(d=[],i=3e3){return new Promise((e,t)=>{let o=Date.now(),n=Array.isArray(d)?d:[d],s=()=>{n.every(r=>document.querySelector(r)!==null)?e():Date.now()-o>i?t(new Error(`Timeout: Not all selectors available after ${i}ms. Missing selectors: ${JSON.stringify(n)}`)):requestAnimationFrame(s)};s()})}function je(d,i,e=3e3){return new Promise((t,o)=>{let n=Date.now(),s=()=>{d[i]?t():Date.now()-n>e?o(new Error(`Timeout: ${e}ms. Propery: ${i} not available on element.`)):requestAnimationFrame(s)};s()})}async function W(d){return new Promise(i=>setTimeout(i,d))}function Te(d){document.querySelector(d).classList.add("hidden")}function Me(d){document.querySelector(d).classList.remove("hidden")}function Re(d,i){Te(d),Me(i)}async function Fe(d,i,e=3e3,t=500){await Ie([d,i],e),await W(t),Re(d,i)}function Ne(d,i,e){try{fetch(d,{method:"GET"}).then(t=>t.text()).then(t=>{i&&i(t)})}catch(t){e&&e(t)}}function Ue(d){if(d){let i={animation:150,draggable:".preview-draggable",onEnd:function(e){let t={e,event:"onEnd",item:e.item,from:e.from,to:e.to,oldIndex:e.oldIndex,newIndex:e.newIndex};wc?.EventHub?.broadcast("sortable:on-end","","",t)}};if(typeof Sortable<"u"){let e=new Sortable(d,i);wc.EventHub.events[d]=e}}}function Ge(d){wc?.EventHub?.events[d].destroy()}function Je(d,i,e,t){let o=2;i=i-o,e=e-o;let n=t.editor,s=n.getValue(),a=new RegExp(`<wc-form[^>]*id=["']${d}["'][^>]*>([\\s\\S]*?)<\\/wc-form>`),r=s.match(a);if(r){let l=r[1],c=/<div[^>]*class=["'][^"']*preview-draggable[^"']*["'][^>]*>[\s\S]*?<\/div>/g,p=l.match(c)||[];if(p.length===0)return;if(i>=0&&i<p.length&&e>=0&&e<p.length){let m=p.splice(i,1)[0];p.splice(e,0,m)}let u=l.replace(c,()=>p.shift()),h=s.replace(l,u);n.setValue(h)}}function Ve(d){let i=-1;return d&&(i=document.querySelectorAll(d).length),i}function Xe(d,i){let e=document.querySelector(d);e&&(i?e.classList.add("htmx-request"):e.classList.remove("htmx-request"))}function Ke(d,i){let t=d.detail.elt.closest("form"),o=t.querySelector(i);if(console.log("-->Attempting to process JSON for selector: ",i,t),o)try{let a=function(r,l=""){for(let c in r)if(Object.prototype.hasOwnProperty.call(r,c)){let p=r[c],u=l?`${l}.${c}`:c;if(p!==null&&typeof p=="object"&&!Array.isArray(p))a(p,u);else if(Array.isArray(p))p.forEach((h,m)=>{if(typeof h=="object"&&h!==null)a(h,`${u}[${m}]`);else{let b=document.createElement("input");b.type="hidden",b.name=`${u}[${m}]`,b.value=h,b.setAttribute("data-json-field","true"),t.appendChild(b),console.log("-->Appending array primitive:",b)}});else{let h=document.createElement("input");h.type="hidden",h.name=u,h.value=p,h.setAttribute("data-json-field","true"),t.appendChild(h),console.log("-->Appending primitive:",h)}}};t.querySelectorAll('input[data-json-field="true"]').forEach(r=>r.remove());let s=JSON.parse(o.value);console.log("-->JSON contents: ",s),a(s,"json_data"),console.log("-->Processing complete for selector: ",i,t)}catch(n){console.error("Error parsing JSON:",n)}}function qe(d,i){if(d==null)return!1;if("const"in i)return d===i.const;if("enum"in i)return Array.isArray(i.enum)&&i.enum.includes(d);if("minimum"in i){let e=typeof d=="number"?d:parseFloat(d);if(isNaN(e)||e<i.minimum)return!1}if("maximum"in i){let e=typeof d=="number"?d:parseFloat(d);if(isNaN(e)||e>i.maximum)return!1}if("minLength"in i&&String(d).length<i.minLength||"maxLength"in i&&String(d).length>i.maxLength)return!1;if("pattern"in i){let e=new RegExp(i.pattern);if(typeof d!="string"||!e.test(d))return!1}return!0}function De(d,i,e){let t="";if(d?(t=`[data-id="${d}"]`,i&&(t+=` ${i}`)):i&&(t=i),!t)return;let o=document.querySelector(t);if(o)return e&&e in o?o[e]:o.type==="checkbox"?o.checked:o.value}function j(d){let{effect:i,condition:e,tgtDataId:t,tgtSelector:o,tgtProperty:n}=d,{scope:s,schema:a,srcDataId:r,srcSelector:l,srcProperty:c,property:p}=e,u=De(r,l,c);if(u==null)return;let h=!1;a&&(h=qe(u,a));let m="";t?(m=`[data-id="${t}"]`,o&&(m+=` ${o}`)):o&&(m=o);let b=document.querySelector(m);if(b)switch(i){case"COPY":b[n]=u;break;case"COPY-TOLOWER":b[n]=u.toString().toLowerCase();break;case"COPY-TOLOWER-UNDERSCORE":b[n]=u.toString().toLowerCase().replaceAll(" ","_");break;case"HIDE":b.style.display=h?"none":"";break;case"SHOW":b.style.display=h?"":"none";break;case"DISABLE":b.disabled=h;break;case"ENABLE":b.disabled=!h;break;case"REQUIRE":b.required=!h;break;case"UN-REQUIRE":b.required=h;break;default:console.warn("Unknown rule effect:",i)}}function Ye(d){Array.from(new Set(d.map(e=>e.condition.srcDataId))).forEach(e=>{document.querySelectorAll(`[data-id="${e}"]`).forEach(t=>{let o=Array.from(d).filter(n=>n.condition.srcDataId==e);t.addEventListener("change",()=>{o.forEach(j)}),t.addEventListener("input",()=>{o.forEach(j)})})}),d.forEach(j)}function Ze(d){let i=[];function e(t){!t||typeof t!="object"||(t.rules&&i.push(...t.rules),Array.isArray(t.elements)&&t.elements.forEach(e))}return d.forEach(e),i}function Qe(d){let i=[];function e(t){let o=t.label||"",n=t.scope||"",s=n?`${o} (${n})`:o,a={dataId:t["data-id"],label:s};i.push(a),t.elements&&Array.isArray(t.elements)&&t.elements.forEach(r=>e(r))}return d.forEach(t=>e(t)),i}var F=class{constructor(){this.icons=new Map,this.baseUrl="/dist/assets/icons"}setBaseUrl(i){this.baseUrl=i}register(i,e,t="solid"){let o=`${t}/${i}`,s=new DOMParser().parseFromString(e,"image/svg+xml"),a=s.querySelector("svg"),r=s.querySelectorAll("path"),l={viewBox:a?.getAttribute("viewBox")||"0 0 512 512",paths:Array.from(r).map(c=>({d:c.getAttribute("d"),opacity:c.getAttribute("opacity"),class:c.getAttribute("class"),fill:c.getAttribute("fill")}))};this.icons.set(o,l),window.customElements.get("wc-icon")&&window.customElements.get("wc-icon").registerIcon(i,l,t)}registerBatch(i,e="solid"){Object.entries(i).forEach(([t,o])=>{this.register(t,o,e)})}async loadFromJson(i,e="solid"){try{let o=await(await fetch(i)).json();this.registerBatch(o,e)}catch(t){console.error(`Failed to load icons from ${i}:`,t)}}async preload(i,e="solid"){let t=i.map(async o=>{let n=`${e}/${o}`;if(!this.icons.has(n))try{let s=await fetch(`${this.baseUrl}/${e}/${o}.svg`);if(s.ok){let a=await s.text();this.register(o,a,e)}}catch(s){console.error(`Failed to preload icon ${n}:`,s)}});await Promise.all(t)}get(i,e="solid"){return this.icons.get(`${e}/${i}`)}has(i,e="solid"){return this.icons.has(`${e}/${i}`)}getAll(){return new Map(this.icons)}clear(){this.icons.clear()}},Le=new F;typeof window<"u"&&(window.wc=window.wc||{},window.wc.iconRegistry=Le);var N=window.WcIconConfig||{},I={iconBaseUrl:N.iconBaseUrl||"/dist/assets/icons",bundleBaseUrl:N.bundleBaseUrl||"/dist/assets/icon-bundles",preloadBundles:N.preloadBundles||[],setIconBaseUrl(d){this.iconBaseUrl=d.replace(/\/$/,"")},setBundleBaseUrl(d){this.bundleBaseUrl=d.replace(/\/$/,"")},setBaseUrl(d){let i=d.replace(/\/$/,"");this.iconBaseUrl=`${i}/icons`,this.bundleBaseUrl=`${i}/icon-bundles`},setPreloadBundles(d){this.preloadBundles=d}};window.WcIconConfig||(window.WcIconConfig=I);var g=class extends HTMLElement{constructor(){super(),this._wcId=Ae(),this.loadCSS=k.bind(this),this.loadScript=S.bind(this),this.loadLibrary=A.bind(this),this.loadStyle=L.bind(this),this.childComponent=null,this.childComponentSelector="",this._pendingAttributes={},this._isConnected=!1,this.componentElement=null,this.formElement=null}get wcId(){return this._wcId}connectedCallback(){this.childComponentSelector?this._waitForChildren(this.childComponentSelector).then(()=>{this._connectedCallback()}):this._connectedCallback()}_connectedCallback(){this._render(),this.dataset.wcId=this.wcId,this.childComponentName?this._waitForChild(()=>this[this.childComponentName]).then(()=>{this._isConnected=!0,this._applyPendingAttributes()}):(this._isConnected=!0,this._applyPendingAttributes())}disconnectedCallback(){}attributeChangedCallback(i,e,t){this._isConnected?this._handleAttributeChange(i,t,e):this._pendingAttributes[i]=t}_applyPendingAttributes(){Object.keys(this._pendingAttributes).forEach(i=>{let e=this._pendingAttributes[i];this._handleAttributeChange(i,e,null)}),this._pendingAttributes={}}_handleAttributeChange(i,e,t){if(i==="name")this._handleNameToIdLinkage(e);else if(i==="elt-class"){let o=this.querySelector("[form-element]");o&&o.setAttribute("class",e)}else i==="class"?e&&e.replace("contents","").split(" ").forEach(s=>{s&&(this.componentElement.classList.add(s),this.classList.remove(s))}):this.componentElement.setAttribute(i,e)}_handleNameToIdLinkage(i){i&&this.formElement&&!this.formElement.hasAttribute("id")&&(this.formElement.setAttribute("id",i),this.formElement.setAttribute("name",i),this.removeAttribute("name"))}_render(){this.classList.add("contents")}async _waitForChild(i){return new Promise(e=>{let t=setInterval(()=>{i()&&(clearInterval(t),e())},50)})}async _waitForChildren(i){let e=Array.from(this.querySelectorAll(i));await Promise.all(e.map(t=>new Promise(o=>{t.isConnected?o():t.addEventListener("connected",o,{once:!0})})))}_applyStyle(){}_wireEvents(){}_unWireEvents(){}};var q=class extends g{static formAssociated=!0;constructor(){super(),this._internals=this.attachInternals(),this._value=""}get value(){return this._isCheckbox()?this.checked:this._value}set value(i){this._isCheckbox()?this.checked=i:(this._value=i,this._internals.setFormValue(this._value))}get required(){return this.hasAttribute("required")}set required(i){i?this.setAttribute("required",""):this.removeAttribute("required")}get checked(){return this.formElement?.checked||!1}set checked(i){this._isCheckbox()&&(this.formElement.checked=i,this._internals.setFormValue(i?"bool:True":"bool:False"))}get validity(){return this._internals.validity}get validationMessage(){return this._internals.validationMessage}get willValidate(){return this._internals.willValidate}checkValidity(){return this._internals.checkValidity()}reportValidity(){return this._internals.reportValidity()}_handleValidation(){let i="";if(i==="span")if(this.formElement?.validity.valid)this.componentElement.querySelector(".error-message")?.remove();else{let e=document.createElement("span");e.classList.add("error-message"),e.textContent=this.formElement?.validationMessage,this.componentElement.appendChild(e)}else if(i==="tooltip")if(this.formElement?.validity.valid)this.formElement?.removeAttribute("data-error"),this.formElement?.setAttribute("title",this.formElement?.getAttribute("data-has-title")),this.formElement?.removeAttribute("data-has-title");else{let e=this.formElement?.validationMessage;this.formElement?.setAttribute("data-error",e),this.formElement?.setAttribute("data-has-title",this.formElement?.getAttribute("title")||""),this.formElement?.setAttribute("title","")}this._internals.setValidity(this.formElement?.validity,this.formElement?.validationMessage)}connectedCallback(){super.connectedCallback(),this.formElement=this.querySelector("input, select, textarea"),this._wireEvents()}disconnectedCallback(){super.disconnectedCallback(),this._unWireEvents()}_handleAttributeChange(i,e){i==="value"?this._isCheckbox()?this.checked=e!==null&&e!=="false"&&e!=="bool:False":(this.formElement&&(this.formElement?.setAttribute("value",e),"value"in this.formElement&&(this.formElement.value=e)),this.value=e):super._handleAttributeChange(i,e)}_handleInputChange(i){let{target:e}=i;if(this._isCheckbox()?(e.checked?this.formElement.value="bool:True":this.formElement.value="bool:False",this.checked=e.checked):this.value=e.value,this._isRange()){let t=this.querySelector("label"),o=this.getAttribute("lbl-label")||"";t&&o&&(t.textContent=`${o} (${e.value})`)}this._handleValidation()}_isCheckbox(){return this.formElement?.type==="checkbox"}_isRange(){return this.formElement?.type==="range"}_wireEvents(){super._wireEvents(),this.formElement&&(this.formElement.addEventListener("input",this._handleInputChange.bind(this)),this.formElement.addEventListener("change",this._handleInputChange.bind(this)))}_unWireEvents(){super._unWireEvents(),this.formElement&&(this.formElement.removeEventListener("input",this._handleInputChange.bind(this)),this.formElement.removeEventListener("change",this._handleInputChange.bind(this)))}};if(!customElements.get("wc-accordion")){class d extends g{static get observedAttributes(){return["id","class","items","allow-many"]}constructor(){super(),this._items=[];let e=this.querySelector(".wc-accordion");e?this.componentElement=e:(this.componentElement=document.createElement("div"),this.componentElement.classList.add("wc-accordion"),this.appendChild(this.componentElement))}async connectedCallback(){super.connectedCallback(),this._applyStyle(),this._wireEvents()}disconnectedCallback(){super.disconnectedCallback(),this._unWireEvents()}_handleAttributeChange(e,t){e==="items"?(typeof t=="string"&&(this._items=JSON.parse(t)),this.removeAttribute("items")):e==="allow-many"||super._handleAttributeChange(e,t)}_render(){super._render();let e=this.querySelectorAll(".wc-accordion > *");e.length>0?(this.componentElement.innerHTML="",e.forEach(t=>this.componentElement.appendChild(t))):(this._moveDeclarativeOptions(),this.componentElement.innerHTML="",this._items.forEach(t=>{let o=this._createHeader(t.label,t.selected);this.componentElement.appendChild(o);let n=this._createPanel(t.content);this.componentElement.appendChild(n)})),this._setActive(),typeof htmx<"u"&&htmx.process(this)}_createHeader(e,t){let o=this.hasAttribute("allow-many"),n=document.createElement("button");return n.classList.add("accordion-header"),t&&n.classList.add("accordion-active"),o?n.setAttribute("_",`on click
          toggle .accordion-active on me
          set panel to me.nextElementSibling
          if panel.style.maxHeight then
            set panel.style.maxHeight to null
          else
            set panel.style.maxHeight to panel.scrollHeight + 'px'
          end
        `):n.setAttribute("_",`on click
          set hdrs to .accordion-header in my parentElement
          repeat for x in hdrs
            if x is not me then
              remove .accordion-active from x
              set panel to x.nextElementSibling
              set panel.style.maxHeight to null
            end
          end
          toggle .accordion-active on me
          set panel to me.nextElementSibling
          if panel.style.maxHeight then
            set panel.style.maxHeight to null
          else
            set panel.style.maxHeight to panel.scrollHeight + 'px'
          end
        `),n.textContent=e,n}_createPanel(e){let t=document.createElement("div");t.classList.add("accordion-panel");let o=document.createElement("p");return o.innerHTML=e,t.appendChild(o),t}_moveDeclarativeOptions(){let e=this.querySelectorAll("option");e.length>0&&(this._items=[]),e.forEach(t=>{let o={label:t.value,content:t.innerHTML.trim(),selected:t.hasAttribute("selected")};this._items.push(o)}),Array.from(e).forEach(t=>t.remove())}_setActive(){setTimeout(()=>{this.querySelectorAll(".wc-accordion .accordion-header.accordion-active").forEach(t=>{let o=t.nextElementSibling;o.style.maxHeight=o.scrollHeight+"px"})},50)}_applyStyle(){let e=`
        wc-accordion {
          display: contents;
        }

        .wc-accordion .accordion-header {
          background-color: var(--button-bg-color);
          color: var(--button-color);
          cursor: pointer;
          padding: 18px;
          width: 100%;
          border: none;
          border-radius: 0;
          text-align: left;
          outline: none;
          font-size: 15px;
          transition: 0.4s;
        }

        .wc-accordion .accordion-active,
        .wc-accordion .accordion-header:hover {
          background-color: var(--button-hover-bg-color);
          color: var(--button-hover-color);
        }

        .wc-accordion .accordion-header:after {
          content: '+';
          color: var(--primary-color);
          font-weight: bold;
          float: right;
          margin-left: 5px;
          font-size: 18px;
          line-height: 1;
          text-align: center;
          width: 20px;
          height: 20px;
        }

        .wc-accordion .accordion-active:after {
          content: '-';
          color: var(--primary-color);
          font-size: 20px;
        }

        .wc-accordion .accordion-panel {
          padding: 0 18px;
          background-color: var(--component-bg-color);
          color: var(--component-color);
          max-height: 0;
          overflow: hidden;
          transition: max-height 0.2s ease-out;
        }
      `.trim();this.loadStyle("wc-accordion-style",e)}_handleHelper(e,t="open"){let{detail:o}=e,{selector:n,subSelector:s}=o,a=s||".accordion-header",r=Array.isArray(n);typeof n=="string"||r?document.querySelectorAll(n).forEach(c=>{if(c===this){let p=c?.querySelector(a);t==="open"?p?.classList.contains("accordion-active")||p?.click():t==="close"?p?.classList.contains("accordion-active")&&p?.click():t==="toggle"&&p?.click()}}):n?.querySelector(a)?.click()}_handleOpen(e){this._handleHelper(e,"open")}_handleClose(e){this._handleHelper(e,"close")}_handleToggle(e){this._handleHelper(e,"toggle")}_wireEvents(){super._wireEvents(),document.body.addEventListener("wc-accordion:open",this._handleOpen.bind(this)),document.body.addEventListener("wc-accordion:close",this._handleClose.bind(this)),document.body.addEventListener("wc-accordion:toggle",this._handleToggle.bind(this))}_unWireEvents(){super._unWireEvents(),document.body.removeEventListener("wc-accordion:open",this._handleOpen.bind(this)),document.body.removeEventListener("wc-accordion:close",this._handleClose.bind(this)),document.body.removeEventListener("wc-accordion:toggle",this._handleToggle.bind(this))}}customElements.define("wc-accordion",d)}if(!customElements.get("wc-article-card")){class d extends g{static get observedAttributes(){return["id","class","url","img-url","article-type"]}constructor(){super(),this.imgUrl="",this.articleTypes={news:"https://images.pexels.com/photos/1755683/pexels-photo-1755683.jpeg?auto=compress&cs=tinysrgb&w=768",css:"https://miro.medium.com/v2/da:true/resize:fit:768/0*1YrO9YLbwHnzExsO",technology:"https://images.pexels.com/photos/2653362/pexels-photo-2653362.jpeg?auto=compress&cs=tinysrgb&w=768",programming:"https://images.pexels.com/photos/6424591/pexels-photo-6424591.jpeg?auto=compress&cs=tinysrgb&w=768"},this.articleData=null,this.articleType="news";let e=this.querySelector(".wc-article-card");e?this.componentElement=e:(this.componentElement=document.createElement("div"),this.componentElement.classList.add("wc-article-card"),this._createElement(),this.appendChild(this.componentElement))}async connectedCallback(){super.connectedCallback(),this.getAttribute("url")&&this.fetchArticleData(this.getAttribute("url")),await this._applyStyle()}disconnectedCallback(){super.disconnectedCallback(),this._unWireEvents()}_handleAttributeChange(e,t){e==="url"||(e==="img-url"?this.imgUrl=t:e==="article-type"?this.imgUrl=this.articleTypes[t]||this.articleTypes.news:super._handleAttributeChange(e,t))}async fetchArticleData(e){try{let t=await fetch(`/api/article-metadata?url=${encodeURIComponent(e)}`);this.articleData=await t.json(),this._createElement()}catch(t){console.error("Error fetching article data:",t)}}_createElement(){if(!this.articleData)return;let e=this.getAttribute("url"),{title:t,description:o,imageUrl:n,publishDate:s,domain:a}=this.articleData;this.imgUrl&&(n=this.imgUrl),this.componentElement.innerHTML=`
        <div class="article-card-image">
          <img src="${n||""}" alt="${t}">
        </div>
        <div class="article-card-content">
          <a class="article-card-title" href="${e}" target="_blank">${t}</a>
          <p class="article-card-description">${o}</p>
          <div class="article-card-meta">
            <span class="article-card-domain">${a}</span>
            <span class="article-card-date">${new Date(s).toLocaleDateString()}</span>
          </div>
        </div>
      `.trim()}_applyStyle(){let e=`
        wc-article-card {
          display: contents;
        }
        .articles-container {
          max-width: 1200px;
          margin: 0 auto;
          display: grid;
          grid-template-columns: repeat(auto-fill, minmax(300px, 1fr));
          gap: 20px;
          padding: 20px;
        }
        .wc-article-card {
          background-color: var(--primary-bg-color);
          color: var(--primary-color);
          box-shadow: var(--card-shadow);
          overflow: hidden;
          transition: transform 0.2s, box-shadow 0.2s;
        }
        .wc-article-card:hover {
          transform: translateY(-2px);
          box-shadow: 0 4px 10px rgba(0,0,0,0.15);
        }
        .wc-article-card .article-card-image {
          width: 100%;
          height: 200px;
          object-fit: cover;
          background: #e5e7eb;
        }
        .wc-article-card .article-card-content {
          padding: 16px;
        }
        .wc-article-card .article-card-title {
          margin: 0 0 8px 0;
          font-size: 1.25rem;
          color: var(--swatch-1);
          text-decoration: none;
        }
        .wc-article-card a.article-card-title:hover {
          text-shadow: var(--swatch-3) 1px 0 10px;
        }
        .wc-article-card .article-card-description {
          margin: 0 0 16px 0;
          font-size: 0.875rem;
          line-height: 1.5;
          color: var(--swatch-2);
        }
        .wc-article-card .article-card-meta {
          display: flex;
          align-items: center;
          gap: 8px;
          font-size: 0.75rem;
          color: var(--swatch-3);
        }
        .wc-article-card .article-card-source {
          font-weight: 500;
        }
      `.trim();this.loadStyle("wc-article-card",e)}_unWireEvents(){super._unWireEvents()}}customElements.define("wc-article-card",d)}var U=class extends g{static get observedAttributes(){return["id","class","caption","img-url","min-height"]}constructor(){super();let i=this.querySelector(".wc-background-image");i?this.componentElement=i:(this.componentElement=document.createElement("div"),this.componentElement.classList.add("wc-background-image"),this.appendChild(this.componentElement))}async connectedCallback(){super.connectedCallback(),this._applyStyle()}disconnectedCallback(){super.disconnectedCallback(),this._unWireEvents()}_handleAttributeChange(i,e){i==="items"?(typeof e=="string"&&(this._items=JSON.parse(e)),this.removeAttribute("items")):i==="caption"||i==="img-url"||i==="min-height"||super._handleAttributeChange(i,e)}_render(){super._render();let i=this.querySelectorAll(".wc-background-image > *");if(i.length>0)this.componentElement.innerHTML="",i.forEach(e=>this.componentElement.appendChild(e));else{this.componentElement.innerHTML="";let e=this.getAttribute("img-url")||"",t=this.getAttribute("min-height")||"100%";this.componentElement.style.backgroundImage=`url("${e}")`,this.componentElement.style.minHeight=t;let o=this._createElement();this.componentElement.appendChild(o)}typeof htmx<"u"&&htmx.process(this)}_createElement(){let i=this.getAttribute("caption")||"",e=document.createElement("div");e.classList.add("caption");let t=document.createElement("span");return t.classList.add("border"),t.textContent=i,e.appendChild(t),e}_applyStyle(){let i=`
      wc-background-image {
        display: contents;
      }
      .wc-background-image {
        position: relative;
        opacity: 0.65;
        background-attachment: fixed;
        background-position: center;
        background-repeat: no-repeat;
        background-size: cover;
      }
      .wc-background-image .caption {
        position: absolute;
        left: 0;
        top: 50%;
        width: 100%;
        text-align: center;
        color: #000;
      }
      .wc-background-image .caption span.border {
        background-color: #111;
        color: #fff;
        padding: 18px;
        font-size: 25px;
        letter-spacing: 10px;
      }
      /* Turn off parallax scrolling for tablets and phones */
      /* @media only screen and (max-device-width: 1024px) { */
      @media (max-device-width: 768px) {
        .wc-background-image {
          background-attachment: scroll;
        }
      }      
    `.trim();this.loadStyle("wc-background-image-style",i)}_unWireEvents(){super._unWireEvents()}};customElements.define("wc-background-image",U);if(!customElements.get("wc-breadcrumb-item")){class d extends g{static get observedAttributes(){return["id","class"]}constructor(){super();let e=this.querySelector(".wc-breadcrumb-item")}async connectedCallback(){super.connectedCallback(),this._applyStyle()}disconnectedCallback(){super.disconnectedCallback(),this._unWireEvents()}_handleAttributeChange(e,t){e==="items"||super._handleAttributeChange(e,t)}_createElement(){this.componentElement.id="breadcrumb-item",this.componentElement.className="wc-breadcrumb-item flex flex-row px-2 gap-4",this.componentElement.innerHTML=`
        <a href="/v/home"
           hx-get="/v/home"
           hx-target="#viewport"
           hx-swap="innerHTML transition:true"
           hx-push-url="true"
           hx-indicator="#content-loader">
          <svg class="h-5 w-5" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor" aria-hidden="true">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M3 12l2-2m0 0l7-7 7 7M5 10v10a1 1 0 001 1h3m10-11l2 2m-2-2v10a1 1 0 01-1 1h-3m-6 0a1 1 0 001-1v-4a1 1 0 011-1h2a1 1 0 011 1v4a1 1 0 001 1m-6 0h6" />
          </svg>
        </a>
        <span>
          <svg class="h-5 w-5" xmlns="http://www.w3.org/2000/svg" class="h-6 w-6" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2">
            <path stroke-linecap="round" stroke-linejoin="round" d="M9 5l7 7-7 7" />
          </svg>
        </span>
        <a href="/v/screen_list/list"
          hx-get="/v/screen_list/list"
          hx-target="#viewport"
          hx-swap="innerHTML transition:true"
          hx-push-url="true"
          hx-indicator="#content-loader">
          Screens
        </a>
        <span>
          <svg class="h-5 w-5" xmlns="http://www.w3.org/2000/svg" class="h-6 w-6" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2">
            <path stroke-linecap="round" stroke-linejoin="round" d="M9 5l7 7-7 7" />
          </svg>
        </span>
        <span>
          screen
        </span>
      `.trim()}_applyStyle(){let e=`
      wc-breadcrumb-item {
        display: contents;
      }
      wc-breadcrumb-item .wc-breadcrumb-item {
        /* background-color: var(--surface-1); */
      }
      `.trim()}_unWireEvents(){super._unWireEvents()}}customElements.define("wc-breadcrumb-item",d)}if(!customElements.get("wc-breadcrumb")){class d extends g{static get observedAttributes(){return["id","class","doc-title"]}constructor(){super();let e=this.querySelector(".wc-breadcrumb");e?this.componentElement=e:(this.componentElement=document.createElement("div"),this._createElement(),this.appendChild(this.componentElement)),setTimeout(()=>{let t=[],o=this.getAttribute("doc-title")||"",n=this.querySelectorAll("wc-breadcrumb-item");Array.from(n).forEach(a=>{let r=a.getAttribute("label");r&&t.push(r)});let s=t.join(" > ");s&&(o?document.title=s+" - "+o:document.title=s)},250)}async connectedCallback(){super.connectedCallback(),this._applyStyle()}disconnectedCallback(){super.disconnectedCallback(),this._unWireEvents()}_handleAttributeChange(e,t){e==="items"||super._handleAttributeChange(e,t)}_getBreadcrumbItems(){let e=[{label:"",link:"/v/home"},{label:"Screens",link:"/v/screen_list/list"},{label:"screen",link:""}],t=[],o=this.querySelectorAll("wc-breadcrumb-item");return Array.from(o).forEach(n=>{let s=n.getAttribute("label")||"",a=n.getAttribute("link")||"";t.push({label:s,link:a})}),t}_createElement(){let e=[],t=this._getBreadcrumbItems();t.forEach((n,s)=>{s==0?e.push(`
            <a href="${n.link}"
              hx-get="${n.link}"
              hx-target="#viewport"
              hx-swap="innerHTML transition:true"
              hx-push-url="true"
              hx-indicator="#content-loader">
              <svg class="h-5 w-5" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor" aria-hidden="true">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M3 12l2-2m0 0l7-7 7 7M5 10v10a1 1 0 001 1h3m10-11l2 2m-2-2v10a1 1 0 01-1 1h-3m-6 0a1 1 0 001-1v-4a1 1 0 011-1h2a1 1 0 011 1v4a1 1 0 001 1m-6 0h6" />
              </svg>
            </a>            
          `):t.length-1==s?e.push(`
            <span id="title-content">
              ${n.label}
            </span>            
          `):e.push(`
            <a href="${n.link}"
              hx-get="${n.link}"
              hx-target="#viewport"
              hx-swap="innerHTML transition:true"
              hx-push-url="true"
              hx-indicator="#content-loader">
              ${n.label}
            </a>
          `)});let o=e.join(`
        <span>
          <svg class="h-5 w-5" xmlns="http://www.w3.org/2000/svg" class="h-6 w-6" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2">
            <path stroke-linecap="round" stroke-linejoin="round" d="M9 5l7 7-7 7" />
          </svg>
        </span>
      `);this.componentElement.id="breadcrumb",this.componentElement.className="wc-breadcrumb flex flex-row px-2 gap-3",this.componentElement.innerHTML=o,this.componentElement.innerHTML2=`
        <a href="/v/home"
           hx-get="/v/home"
           hx-target="#viewport"
           hx-swap="innerHTML transition:true"
           hx-push-url="true"
           hx-indicator="#content-loader">
          <svg class="h-5 w-5" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor" aria-hidden="true">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M3 12l2-2m0 0l7-7 7 7M5 10v10a1 1 0 001 1h3m10-11l2 2m-2-2v10a1 1 0 01-1 1h-3m-6 0a1 1 0 001-1v-4a1 1 0 011-1h2a1 1 0 011 1v4a1 1 0 001 1m-6 0h6" />
          </svg>
        </a>
        <span>
          <svg class="h-5 w-5" xmlns="http://www.w3.org/2000/svg" class="h-6 w-6" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2">
            <path stroke-linecap="round" stroke-linejoin="round" d="M9 5l7 7-7 7" />
          </svg>
        </span>
        <a href="/v/screen_list/list"
          hx-get="/v/screen_list/list"
          hx-target="#viewport"
          hx-swap="innerHTML transition:true"
          hx-push-url="true"
          hx-indicator="#content-loader">
          Screens
        </a>
        <span>
          <svg class="h-5 w-5" xmlns="http://www.w3.org/2000/svg" class="h-6 w-6" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2">
            <path stroke-linecap="round" stroke-linejoin="round" d="M9 5l7 7-7 7" />
          </svg>
        </span>
        <span>
          screen
        </span>
      `.trim()}_applyStyle(){let e=`
      wc-breadcrumb {
        display: contents;
      }
      wc-breadcrumb .wc-breadcrumb {
        /* background-color: var(--surface-1); */
      }
      `.trim()}_unWireEvents(){super._unWireEvents()}}customElements.define("wc-breadcrumb",d)}if(!customElements.get("wc-canvas-dot-highlight")){class d extends g{static get observedAttributes(){return["id","class"]}constructor(){super();let e=this.querySelector(".wc-canvas-dot-highlight");e?this.componentElement=e:(this.componentElement=document.createElement("div"),this.componentElement.classList.add("wc-canvas-dot-highlight"),this._createElement(),this.appendChild(this.componentElement))}async connectedCallback(){super.connectedCallback(),this._wireEvents(),this._applyStyle()}disconnectedCallback(){super.disconnectedCallback(),this._unWireEvents()}_handleAttributeChange(e,t){e==="items"||super._handleAttributeChange(e,t)}_createElement(){let e=Array.from(this.children).filter(o=>!o.matches("wc-canvas-dot-highlight")&&!o.matches(".wc-canvas-dot-highlight")),t=document.createElement("canvas");t.id="dotCanvas",this.componentElement.appendChild(t),e.forEach(o=>this.componentElement.appendChild(o))}_applyStyle(){let e=`
        wc-canvas-dot-highlight {
          display: contents;
        }
        .wc-canvas-dot-highlight {
          position: relative;
        }
        .wc-canvas-dot-highlight canvas {
          border-radius: 8px;
          border: 1px solid gray;
          border-radius: 10px;
          background-color: #111;
        }
      `.trim();this.loadStyle("wc-canvas-dot-highlight",e)}_wireEvents(){let e=this.componentElement.querySelector("#dotCanvas"),t=e.getContext("2d");e.width=window.innerWidth*.95,e.height=window.innerHeight*.95;let o={dotSpacing:20,dotRadius:1.25,highlightRadius:160,defaultColor:"#444",highlightColor:"#40E0D0",backgroundColor:"#111111",animationSpeed:.15},n=Math.floor(e.width/o.dotSpacing),s=Math.floor(e.height/o.dotSpacing),a=e.width/2,r=e.height/2,l=e.width/2,c=e.height/2,p=!1,u=0,h=0;e.addEventListener("mousemove",b=>{let f=e.getBoundingClientRect();a=b.clientX-f.left,r=b.clientY-f.top,p&&(u=a,h=r)}),e.addEventListener("mouseenter",b=>{p=!0;let f=e.getBoundingClientRect();a=b.clientX-f.left,r=b.clientY-f.top,u=a,h=r}),e.addEventListener("mouseleave",()=>{p=!1,u=0,h=0});function m(){t.fillStyle=o.backgroundColor,t.fillRect(0,0,e.width,e.height),l+=(u-l)*o.animationSpeed,c+=(h-c)*o.animationSpeed;for(let v=0;v<n;v++)for(let E=0;E<s;E++){let x=(v+.5)*o.dotSpacing,C=(E+.5)*o.dotSpacing;t.fillStyle=o.defaultColor,t.beginPath(),t.arc(x,C,o.dotRadius,0,Math.PI*2),t.fill()}let f=Math.sqrt(Math.pow(l-u,2)+Math.pow(c-h,2))<1;if(!p)return requestAnimationFrame(m);for(let v=0;v<n;v++)for(let E=0;E<s;E++){let x=(v+.5)*o.dotSpacing,C=(E+.5)*o.dotSpacing,T=x-l,M=C-c,R=Math.sqrt(T*T+M*M);if(R<o.highlightRadius){let D=Math.pow(1-R/o.highlightRadius,2),B=p?1:Math.max(0,1-(f?1:0));t.fillStyle=o.highlightColor,t.globalAlpha=D*B,t.beginPath(),t.arc(x,C,o.dotRadius,0,Math.PI*2),t.fill()}}t.globalAlpha=1,requestAnimationFrame(m)}window.addEventListener("resize",()=>{e.width=window.innerWidth*.95,e.height=window.innerHeight*.95,p||(u=e.width/2,h=e.height/2)}),m()}_unWireEvents(){super._unWireEvents()}}customElements.define("wc-canvas-dot-highlight",d)}if(!customElements.get("wc-code-mirror")){class d extends g{static get observedAttributes(){return["id","class","height","theme","mode","lbl-label","lbl-class","line-numbers","line-wrapping","fold-gutter","tab-size","indent-unit","value","disabled","required","fetch"]}constructor(){super(),this.childComponentName="editor",this._isResizing=!1,this._internals=this.attachInternals(),this.firstContent="",this.innerHTML.trim()!=""?(this.firstContent=this.innerHTML.replaceAll("=&gt;","=>"),this.innerHTML=""):this.firstChild&&this.firstChild.nodeName=="#text"&&(this.firstContent=this.firstChild.textContent,this.removeChild(this.firstChild));let e=this.querySelector(".wc-code-mirror");e?this.componentElement=e:(this.componentElement=document.createElement("div"),this.componentElement.classList.add("wc-code-mirror"),this.appendChild(this.componentElement))}async connectedCallback(){super.connectedCallback(),this._applyStyle()}disconnectedCallback(){super.disconnectedCallback(),this._unWireEvents()}async _handleAttributeChange(e,t,o){if(e==="lbl-class"){let n=this.getAttribute("name");this.querySelector(`label[for="${n}"]`)?.classList.add(t)}else if(e==="theme")await this.loadTheme(t);else if(e==="mode")await this.loadMode(t);else if(e==="height")t&&this.editor.setSize(null,t);else if(e==="line-numbers"){t||t==""?this.editor.setOption("lineNumbers",!0):this.editor.setOption("lineNumbers",!1);let n=await this.getGutters();this.editor.setOption("gutters",n)}else if(e==="line-wrapping")t||t==""?this.editor.setOption("lineWrapping",!0):this.editor.setOption("lineWrapping",!1);else if(e==="fold-gutter"){t||t==""?this.editor.setOption("foldGutter",!0):this.editor.setOption("foldGutter",!1);let n=await this.getGutters();this.editor.setOption("gutters",n)}else if(e==="tab-size")this.editor.setOption("tabSize",parseInt(t,10));else if(e==="indent-unit")this.editor.setOption("indentUnit",parseInt(t,10));else if(e==="value")this.editor.setValue(t);else if(e==="disabled")this.hasAttribute("disabled")?this.editor.setOption("readOnly","nocursor"):this.editor.setOption("readOnly",!1);else if(e==="fetch"){if(!o)return;this.editor&&(this.fetchUrl=t,this.handleFetch(this.fetchUrl))}else super._handleAttributeChange(e,t,o)}_render(){super._render(),this.querySelector(".wc-code-mirror > *")?this.querySelector(".settings-icon").addEventListener("click",this._handleSettingsIconClick.bind(this)):(this.componentElement.innerHTML="",this._createInnerElement()),typeof htmx<"u"&&htmx.process(this)}async _createInnerElement(){let e=this.getAttribute("lbl-label")||"",t=this.getAttribute("name")||"";if(!t)throw new Error("Name attribute must be provided.");if(e){let a=document.createElement("label"),r=this.getAttribute("value")||"";a.textContent=e,a.setAttribute("for",t),this.componentElement.appendChild(a)}this.editor=null,this.popoverId=`settings-popover-${this.getAttribute("name")||"wc-code-mirror"}`;let o=document.createElement("button");o.type="button",o.innerHTML=`
        <svg class="h-3 w-3" fill="currentColor"
          xmlns="http://www.w3.org/2000/svg"
          viewBox="0 0 512 512">
          <path d="M495.9 166.6c3.2 8.7 .5 18.4-6.4 24.6l-43.3 39.4c1.1 8.3 1.7 16.8 1.7 25.4s-.6 17.1-1.7 25.4l43.3 39.4c6.9 6.2 9.6 15.9 6.4 24.6c-4.4 11.9-9.7 23.3-15.8 34.3l-4.7 8.1c-6.6 11-14 21.4-22.1 31.2c-5.9 7.2-15.7 9.6-24.5 6.8l-55.7-17.7c-13.4 10.3-28.2 18.9-44 25.4l-12.5 57.1c-2 9.1-9 16.3-18.2 17.8c-13.8 2.3-28 3.5-42.5 3.5s-28.7-1.2-42.5-3.5c-9.2-1.5-16.2-8.7-18.2-17.8l-12.5-57.1c-15.8-6.5-30.6-15.1-44-25.4L83.1 425.9c-8.8 2.8-18.6 .3-24.5-6.8c-8.1-9.8-15.5-20.2-22.1-31.2l-4.7-8.1c-6.1-11-11.4-22.4-15.8-34.3c-3.2-8.7-.5-18.4 6.4-24.6l43.3-39.4C64.6 273.1 64 264.6 64 256s.6-17.1 1.7-25.4L22.4 191.2c-6.9-6.2-9.6-15.9-6.4-24.6c4.4-11.9 9.7-23.3 15.8-34.3l4.7-8.1c6.6-11 14-21.4 22.1-31.2c5.9-7.2 15.7-9.6 24.5-6.8l55.7 17.7c13.4-10.3 28.2-18.9 44-25.4l12.5-57.1c2-9.1 9-16.3 18.2-17.8C227.3 1.2 241.5 0 256 0s28.7 1.2 42.5 3.5c9.2 1.5 16.2 8.7 18.2 17.8l12.5 57.1c15.8 6.5 30.6 15.1 44 25.4l55.7-17.7c8.8-2.8 18.6-.3 24.5 6.8c8.1 9.8 15.5 20.2 22.1 31.2l4.7 8.1c6.1 11 11.4 22.4 15.8 34.3zM256 336a80 80 0 1 0 0-160 80 80 0 1 0 0 160z"/>
        </svg>
      `.trim(),o.className="settings-icon",o.setAttribute("popovertarget",this.popoverId),o.addEventListener("click",this._handleSettingsIconClick.bind(this)),this.componentElement.appendChild(o);let n=document.createElement("div");n.classList.add("settings-popover"),n.id=this.popoverId,n.setAttribute("popover","manual"),this.componentElement.appendChild(n);let s=this.getAttribute("value")||this.firstContent||"";await Promise.all([this.loadCSS("https://cdnjs.cloudflare.com/ajax/libs/codemirror/5.65.5/codemirror.min.css"),this.loadLibrary("https://cdnjs.cloudflare.com/ajax/libs/codemirror/5.65.5/codemirror.min.js","CodeMirror")]),await this.renderEditor(s),this._internals.setFormValue(s)}_handleSettingsIconClick(e){let t=this.querySelector(".settings-popover");this._buildSettingsPopover(t)}_buildSettingsPopover(e){let t=this.hasAttribute("line-numbers"),o=this.hasAttribute("line-wrapper"),n=this.hasAttribute("fold-gutter"),s=["apl","asciiarmor","asn.1","asterisk","brainfuck","clike","clojure","cmake","cobol","coffeescript","commonlisp","crystal","css","cypher","d","dart","diff","django","dockerfile","dtd","dylan","ebnf","ecl","eiffel","elm","erlang","factor","fcl","forth","fortran","gas","gfm","gherkin","go","groovy","haml","handlebars","haskell","haxe","htmlembedded","htmlmixed","http","idl","javascript","jinja2","julia","kotlin","litespec","livescript","lua","markdown","mathematica","mbox","mirc","mllike","modelica","mscgen","mumps","nginx","nsis","ntriples","octave","oz","pascal","perl","php","pig","powershell","properties","protobuf","pug","puppet","python","q","r","rpm","rst","ruby","rust","sas","sass","scheme","shell","sieve","slim","smalltalk","smarty","solr","soy","sparql","spreadsheet","sql","stex","stylus","swift","tcl","textile","tiddlywiki","tiki","toml","tornado","troff","ttcn","ttcn-cfg","turtle","twig","vb","vbscript","velocity","verilog","vhdl","vue","xml","xquery","yaml","yaml-frontmatter","z80"],a=["3024-day","3024-night","abcdef","ambiance","ayu-dark","ayu-mirage","base16-dark","base16-light","bespin","blackboard","cobalt","colorforth","default","darcula","dracula","duotone-dark","duotone-light","eclipse","elegant","erlang-dark","gruvbox-dark","hopscotch","icecoder","idea","isotope","lesser-dark","liquibyte","lucario","material","material-darker","material-palenight","material-ocean","mbo","mdn-like","midnight","monokai","moxer","neat","neo","night","nord","oceanic-next","panda-syntax","paraiso-dark","paraiso-light","pastel-on-dark","railscasts","rubyblue","seti","shadowfox","solarized","ssms","the-matrix","tomorrow-night-bright","tomorrow-night-eighties","ttcn","twilight","vibrant-ink","xq-dark","xq-light","yeti","yonce","zenburn"];e.innerHTML=`
        <div id="popover-form" class="popover-form col gap-3">
          <button id="closeButton" class="close-btn" type="button"
            popovertarget="${this.popoverId}" popovertargetaction="hide"
            >
            <span aria-hidden="true">X</span>
            <span class="sr-only">Close</span>
          </button>
          <div class="row gap-2">
            <wc-select class="col-1" name="theme-select" lbl-label="Theme" autofocus elt-class="w-full">
              ${a.map(r=>`<option value="${r}" ${r==this.getAttribute("theme")?"selected":""}>${r}</option>`).join("")}
            </wc-select>
            <wc-select class="col-1" name="mode-select" lbl-label="Mode" elt-class="w-full">
              ${s.map(r=>`<option value="${r}" ${r==this.getAttribute("mode")?"selected":""}>${r}</option>`).join("")}
            </wc-select>
          </div>
          <div class="row gap-2">
            <wc-input class="col-1" name="line-numbers" lbl-label="Line Numbers" ${t?"checked ":""}type="checkbox"></wc-input>
            <wc-input class="col-1" name="line-wrapper" lbl-label="Line Wrapper" ${o?"checked ":""}type="checkbox"></wc-input>
            <wc-input class="col-1" name="fold-gutter" lbl-label="Fold Gutter" ${n?"checked ":""}type="checkbox"></wc-input>
          </div>
          <div class="row gap-2">
            <wc-input class="col-1" name="tab-size" lbl-label="Tab Size" value="${this.getAttribute("tab-size")}" type="number"></wc-input>
            <wc-input class="col-1" name="indent-unit" lbl-label="Indent Unit" value="${this.getAttribute("indent-unit")}" type="number"></wc-input>
          </div>
          <div class="row gap-2 justify-end gap-x-4">
            <button class="" id="apply-settings" type="submit">
              Apply
            </button>
            <button class="btn-clear" id="cancel-settings" type="button">
              Cancel
            </button>
          </div>
        </div>
      `,e.querySelector("#closeButton").addEventListener("click",this._handleSettingsClose.bind(this),{once:!0}),e.querySelector("#apply-settings").addEventListener("click",this._handleSettingsApply.bind(this),{once:!0}),e.querySelector("#cancel-settings").addEventListener("click",this._handleSettingsClose.bind(this),{once:!0})}_handleSettingsApply(e){let t=this.querySelector(".settings-popover"),o=t.querySelector("#closeButton"),n=t.querySelector("#theme-select").value,s=t.querySelector("#mode-select").value,a=t.querySelector("#line-numbers").checked,r=t.querySelector("#line-wrapper").checked,l=t.querySelector("#fold-gutter").checked,c=t.querySelector("#tab-size").value,p=t.querySelector("#indent-unit").value;this.setAttribute("theme",n),this.setAttribute("mode",s),a?this.setAttribute("line-numbers",""):this.removeAttribute("line-numbers"),r?this.setAttribute("line-wrapper",""):this.removeAttribute("line-wrapper"),l?this.setAttribute("fold-gutter",""):this.removeAttribute("fold-gutter"),this.setAttribute("tab-size",c),this.setAttribute("indent-unit",p),this._handleSettingsClose(e)}_handleSettingsClose(e){e.preventDefault();let t=this.querySelector(".settings-popover");for(t.togglePopover();t.firstChild;)t.removeChild(t.firstChild)}get value(){return this.editor?.getValue()||""}set value(e){this.editor&&(this.editor.setValue(e),this._internals.setFormValue(e))}_applyStyle(){let e=`
        /* Container using flex or grid layout */
        .editor-container-flex {
          display: flex;
          gap: 10px;
          height: calc(100vh - 60px); /* Adjust for the header height */
          width: 100%;
          flex-wrap: wrap;
        }

        .editor-container-grid {
          display: grid;
          grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
          gap: 10px;
          height: calc(100vh - 60px); /* Adjust for the header height */
          width: 100%;
        }

        
        wc-code-mirror {
          display: contents;
        }

        /* Ensure that each editor fills its container */
        .wc-code-mirror {
          position: relative;
          width: 100%;
          display: flex;
          flex-direction: column;
          border: 2px solid transparent;

          overflow: hidden;
          resize: vertical;
    
          min-height: 10em;        
        }
        .wc-code-mirror:focus-within {
          /* border: 2px solid var(--primary-bg-color); */
        }

        .CodeMirror {
          height: auto;
          min-height: 150px;
          width: 100%;
          box-sizing: border-box; /* Avoid overflow caused by padding or borders */
          overflow: auto; /* Scroll within the editor */
        }
        
        .settings-icon {
          background: none;
          border: none;
          position: absolute;
          top: 2px;
          right: 5px;
          padding: 0;
          cursor: pointer;
          color: gray;
          font-size: 1.5em;
          z-index: 1;
        }
        
        .wc-code-mirror > label ~ .settings-icon {
          top: 22px;
        }

        .settings-popover {
          background: transparent;
          position: absolute;
          left: 0;
          right: 0;
          padding: 0;
          margin: 0 auto;
          height: 100%;
          width: 100%;
          border: none;
          display: flex;
          justify-items: center;
          align-items: center;
        }


        .settings-popover::backdrop {
          background: rgb(190 190 190 / 50%);
        }


        #popover-form {
          position: relative;
          padding: 20px;
          margin: 0 auto;
          border-radius: 5px;
          box-shadow: 0 4px 8px rgba(0, 0, 0, 0.2);
        }

        .close-btn {
          color: gray;
          border: none;
          background: none;
          position: absolute;
          right: 0.5rem;
          top: 0.5rem;
          padding: 0;
          cursor: pointer;
        }

        .sr-only:not(:focus):not(:active) {
          clip: rect(0 0 0 0); 
          clip-path: inset(50%);
          height: 1px;
          overflow: hidden;
          position: absolute;
          white-space: nowrap; 
          width: 1px;
        }

        /* JavaScript highlighting in web components */
        .cm-js-keyword { color: #66d9ef !important; }
        .cm-js-variable { color: #f8f8f2 !important; }
        .cm-js-def { color: #fd971f !important; }
        .cm-js-operator { color: #f92672 !important; }
        .cm-js-string { color: #e6db74 !important; }
        .cm-js-number { color: #ae81ff !important; }
        .cm-js-comment { color: #75715e !important; }
        .cm-js-property { color: #a6e22e !important; }
        .cm-js-atom { color: #ae81ff !important; }
      `.trim();this.loadStyle("wc-code-mirror-style",e)}async renderEditor(e){await Promise.all([this.loadScript("https://cdnjs.cloudflare.com/ajax/libs/codemirror/5.65.13/addon/search/searchcursor.min.js"),this.loadScript("https://cdnjs.cloudflare.com/ajax/libs/codemirror/5.65.13/keymap/sublime.min.js"),this.loadScript("https://cdn.jsdelivr.net/npm/cm-show-invisibles@3.1.0/lib/show-invisibles.min.js")]);let t=await this.getGutters();this.editor=CodeMirror(this.componentElement,{mode:this.getAttribute("mode")||"javascript",theme:this.getAttribute("theme")||"default",lineNumbers:this.hasAttribute("line-numbers"),lineWrapper:this.hasAttribute("line-wrapper"),foldGutter:this.hasAttribute("fold-gutter"),gutters:t,extraKeys:{"Ctrl-Q":function(a){a.foldCode(a.getCursor())},Tab:a=>{if(a.somethingSelected())a.indentSelection("add");else{var r=Array(a.getOption("indentUnit")+1).join(" ");a.replaceSelection(r)}}},value:e,tabSize:parseInt(this.getAttribute("tab-size"),10)||4,indentUnit:parseInt(this.getAttribute("indent-unit"),10)||2,matchBrackets:!0,keyMap:"sublime",showInvisibles:!0}),await this.loadAssets(this.getAttribute("theme"),this.getAttribute("mode")),this.addWebComponentsJsHighlighting(),this.editor.on("change",async()=>{let a=this.editor.getValue();this._internals.setFormValue(a);let r=await this.getGutters();this.editor.setOption("gutters",r)});let o={detail:{name:this.getAttribute("name"),editor:this.editor},bubbles:!0,composed:!0},n=new CustomEvent("wc-code-mirror:ready",o);this.dispatchEvent(n),document.body.dispatchEvent(n);let s=this.getAttribute("fetch");this.handleFetch(s)}static get formAssociated(){return!0}handleFetch(e){try{e&&fetch(e,{method:"GET"}).then(t=>t.json()).then(t=>{this.editor.setValue(t.result);let o={detail:{name:this.getAttribute("name"),editor:this.editor},bubbles:!0,composed:!0},n=new CustomEvent("fetch-complete",o);this.dispatchEvent(n)})}catch(t){console.error("Error encountered while trying to fetch wc-code-mirror data!",t)}}formResetCallback(){this.editor.setValue("")}formStateRestoreCallback(e){e&&this.editor.setValue(e)}formDisabledCallback(e){this.editor&&this.editor.setOption("readOnly",e)}async refresh(e=500){await W(e),this.editor.refresh(),this.editor.focus()}async getGutters(){this.hasAttribute("fold-gutter")&&(await this.loadCSS("https://cdnjs.cloudflare.com/ajax/libs/codemirror/5.65.13/addon/fold/foldgutter.min.css"),await this.loadScript("https://cdnjs.cloudflare.com/ajax/libs/codemirror/5.65.13/addon/fold/foldcode.min.js"),await this.loadScript("https://cdnjs.cloudflare.com/ajax/libs/codemirror/5.65.13/addon/fold/foldgutter.min.js"),await this.loadScript("https://cdnjs.cloudflare.com/ajax/libs/codemirror/5.65.13/addon/fold/brace-fold.min.js"),await this.loadScript("https://cdnjs.cloudflare.com/ajax/libs/codemirror/5.65.13/addon/fold/comment-fold.min.js"),await this.loadScript("https://cdnjs.cloudflare.com/ajax/libs/codemirror/5.65.13/addon/fold/indent-fold.min.js"),await this.loadScript("https://cdnjs.cloudflare.com/ajax/libs/codemirror/5.65.13/addon/fold/xml-fold.min.js"),await this.loadScript("https://cdnjs.cloudflare.com/ajax/libs/codemirror/5.65.13/addon/edit/matchbrackets.min.js"));let e=[],t=this.hasAttribute("line-numbers"),o=this.hasAttribute("fold-gutter");return t&&o?e=["CodeMirror-linenumbers","CodeMirror-foldgutter"]:o&&(e=["CodeMirror-foldgutter"]),e}async loadAssets(e,t){e&&e!=="default"&&await this.loadTheme(e),t&&await this.loadMode(t)}async loadTheme(e){if(!e||e==="default")return;let t=`https://cdnjs.cloudflare.com/ajax/libs/codemirror/5.65.13/theme/${e}.min.css`;document.querySelector(`link[href="${t}"]`)||await this.loadCSS(t),this.editor.setOption("theme",e)}async loadMode(e){let o={htmlmixed:["xml","css","javascript"],php:["htmlmixed","xml","css","javascript"],htmlembedded:["xml","javascript"],markdown:["htmlmixed","xml","css","javascript"]}[e];if(o&&o.length>0)for(let s of o)await this.loadScript(`https://cdnjs.cloudflare.com/ajax/libs/codemirror/5.65.13/mode/${s}/${s}.min.js`);if(e==="litespec"){CodeMirror.registerHelper("fold","litespec",function(l,c){var p=c.line,u=l.getLine(p),h=u.indexOf("{");if(h===-1)return;var m=l.getTokenTypeAt(CodeMirror.Pos(p,h+1));if(m!=="brace")return;var b=l.findMatchingBracket(CodeMirror.Pos(p,h+1));return!b||!b.match||b.to===null?void 0:{from:CodeMirror.Pos(p,h+1),to:b.to}}),this.editor.setOption("foldOptions",{widget:"\u2194"});let a={litespec:["simple"]}[e];if(a&&a.length>0)for(let l of a)await this.loadScript(`https://cdnjs.cloudflare.com/ajax/libs/codemirror/5.65.13/addon/mode/${l}.min.js`);if(["litespec"].includes(e)){await this.loadScript("https://mattduffield.github.io/lite-spec/dist/highlighters/litespec.mode.cm.js"),this.editor.setOption("mode",e);return}}let n=`https://cdnjs.cloudflare.com/ajax/libs/codemirror/5.65.13/mode/${e}/${e}.min.js`;document.querySelector(`script[src="${n}"]`)||await this.loadScript(n),this.editor.setOption("mode",e),["htmlmixed","php","markdown","htmlembedded"].includes(e)&&setTimeout(()=>{this.addWebComponentsJsHighlighting()},100)}_unWireEvents(){super._unWireEvents(),this.querySelector(".settings-icon").removeEventListener("click",this._handleSettingsIconClick.bind(this))}addWebComponentsJsHighlighting(){let e=()=>{let t=this.editor.getValue().split(`
`),o=!1,n="",s=[],a=-1,r=-1;for(let l=0;l<t.length;l++){let c=t[l].trim();if(o){if(c.match(new RegExp(`</${n}>`))){if(r=l,o=!1,a!==-1&&r!==-1){let u=t.slice(a+1,r).join(`
`);this.highlightJavaScript(u,a+1,r)}a=-1,r=-1,n=""}}else{let p=c.match(/<(wc-[a-zA-Z0-9-]+)(?:\s|>)/i);p&&(n=p[1],o=!0,a=l)}}};setTimeout(()=>{e(),this.editor.on("change",()=>{clearTimeout(this._highlightTimeout),this._highlightTimeout=setTimeout(()=>{e()},500)})},100)}highlightJavaScript(e,t,o){let n=this.editor.getDoc();n.findMarks({line:t,ch:0},{line:o,ch:0}).forEach(l=>l.clear());let a=e.split(`
`),r=[{pattern:/\b(function|var|let|const|return|if|else|endif|for|endfor|while|switch|case|break|continue|this|new|typeof|instanceof|class|async|await|in)\b/g,className:"cm-js-keyword"},{pattern:/\b(true|false|null|undefined)\b/g,className:"cm-js-atom"},{pattern:/\b\d+(\.\d+)?\b/g,className:"cm-js-number"},{pattern:/(["'`])(?:[^\\]|\\.)*?\1/g,className:"cm-js-string"},{pattern:/[+\-*/%=&|^<>!?:;,.]/g,className:"cm-js-operator"},{pattern:/=>/g,className:"cm-js-keyword"},{pattern:/\b\.[A-Za-z]+/g,className:"cm-js-property"}];a.forEach((l,c)=>{n.markText({line:t+c,ch:0},{line:t+c,ch:l.length},{className:"cm-wc-content"}),r.forEach(({pattern:p,className:u})=>{let h;for(p.lastIndex=0;(h=p.exec(l))!==null;){let m=h.index,b=m+h[0].length;n.markText({line:t+c,ch:m},{line:t+c,ch:b},{className:u})}})})}}customElements.define("wc-code-mirror",d)}var G=class extends g{static get observedAttributes(){return["id","class","gender","contact-name","contact-title"]}constructor(){super();let i=this.querySelector(".wc-contact-card");i?this.componentElement=i:(this.componentElement=document.createElement("div"),this.componentElement.classList.add("wc-contact-card"),this.appendChild(this.componentElement))}async connectedCallback(){super.connectedCallback(),this._applyStyle()}disconnectedCallback(){super.disconnectedCallback(),this._unWireEvents()}_handleAttributeChange(i,e){if(i=="gender"){let t=this.querySelector("img");e=="male"?t.setAttribute("src","https://www.w3schools.com/howto/img_avatar.png"):t.setAttribute("src","https://www.w3schools.com/howto/img_avatar2.png")}else if(i=="contact-name"){let t=this.querySelector("div.contact-card-name");t.innerHTML=e}else if(i=="contact-title"){let t=this.querySelector("div.contact-card-title");t.innerHTML=e}else super._handleAttributeChange(i,e)}_render(){super._render(),this.querySelector(".wc-contact-card > *")||(this.componentElement.innerHTML="",this._createInnerElement()),typeof htmx<"u"&&htmx.process(this)}_createInnerElement(){Array.from(this.children).filter(s=>!s.matches("wc-contact-card")&&!s.matches(".wc-contact-card")).forEach(s=>this.componentElement.appendChild(s));let e=document.createElement("img");e.setAttribute("src","https://www.w3schools.com/howto/img_avatar.png"),e.setAttribute("alt","Person"),e.setAttribute("width","100%");let t=document.createElement("div");t.classList.add("contact-card-container");let o=document.createElement("div");o.classList.add("contact-card-name","text-2xl","font-bold"),o.innerHTML="John Doe";let n=document.createElement("div");n.classList.add("contact-card-title","text-lg"),n.innerHTML="Boss",t.appendChild(o),t.appendChild(n),this.componentElement.appendChild(e),this.componentElement.appendChild(t)}_applyStyle(){this.loadStyle("wc-contact-card-style",`
      wc-contact-card {
        display: contents;
      }
      .wc-contact-card {
        box-shadow: 0 4px 8px 0 var(--card-border-color);
        transition: 0.3s;
        width: 40%;
        border-radius: 5px;
        background-color: var(--card-bg-color);
        color: var(--card-color);
      }
      .wc-contact-card:hover {
        box-shadow: 0 8px 16px 0 var(--card-border-color);
      }
      /* Add some padding inside the card container */
      .wc-contact-card .contact-card-container {
        padding: 2px 16px;
      }
      .wc-contact-card img {
        border-radius: 5px 5px 0 0;
      }
    `)}_unWireEvents(){super._unWireEvents()}};customElements.define("wc-contact-card",G);var J=class extends g{static get observedAttributes(){return["id","class","gender","person-name"]}constructor(){super();let i=this.querySelector(".wc-contact-chip");i?this.componentElement=i:(this.componentElement=document.createElement("div"),this.componentElement.classList.add("wc-contact-chip"),this.appendChild(this.componentElement))}async connectedCallback(){super.connectedCallback(),this._applyStyle()}disconnectedCallback(){super.disconnectedCallback(),this._unWireEvents()}_handleAttributeChange(i,e){if(i=="gender"){let t=this.querySelector("img");e=="male"?t.setAttribute("src","https://www.w3schools.com/howto/img_avatar.png"):t.setAttribute("src","https://www.w3schools.com/howto/img_avatar2.png")}else if(i=="person-name"){let t=this.querySelector("span.name-content");t.innerHTML=e}else super._handleAttributeChange(i,e)}_render(){super._render(),this.querySelector(".wc-contact-chip > *")||(this.componentElement.innerHTML="",this._createInnerElement()),typeof htmx<"u"&&htmx.process(this)}_createInnerElement(){Array.from(this.children).filter(n=>!n.matches("wc-contact-chip")&&!n.matches(".wc-contact-chip")).forEach(n=>this.componentElement.appendChild(n));let e=document.createElement("img");e.setAttribute("src","https://www.w3schools.com/howto/img_avatar.png"),e.setAttribute("alt","Person"),e.setAttribute("height","96"),e.setAttribute("width","96");let t=document.createElement("span");t.classList.add("name-content"),t.innerHTML="John Doe";let o=document.createElement("span");o.classList.add("close-btn"),o.innerHTML="&times;",o.setAttribute("onclick",`
      const cnt = this.closest('wc-contact-chip.contents');
      cnt.classList.add('hidden');
    `),this.componentElement.appendChild(e),this.componentElement.appendChild(t),this.componentElement.appendChild(o)}_applyStyle(){this.loadStyle("wc-contact-chip-style",`
      wc-contact-chip {
        display: contents;
      }
      .wc-contact-chip {
        position: relative;
        display: inline-block;
        padding: 0 25px;
        height: 50px;
        font-size: 18px;
        line-height: 50px;
        border-radius: 25px;
        background-color: var(--card-bg-color);
        color: var(--card-color);
      }
      .wc-contact-chip img {
        float: left;
        margin: 0 0 0 -25px;
        height: 50px;
        width: 50px;
        border-radius: 50%;
      }
      .wc-contact-chip .name-content {
        margin: 0 10px;
      }
      .wc-contact-chip .close-btn {
        position: absolute;
        right: 10px;
        margin-left: 10px;
        color: var(--surface-8);
        font-weight: bold;
        font-size: 20px;
        cursor: pointer;
      }
      .wc-contact-chip .close-btn:hover {
        color: var(--surface-6);
      }
    `)}_unWireEvents(){super._unWireEvents()}};customElements.define("wc-contact-chip",J);var V=class extends g{static get observedAttributes(){return["id","class"]}constructor(){super();let i=this.querySelector(".wc-div");i?this.componentElement=i:(this.componentElement=document.createElement("div"),this.componentElement.classList.add("wc-div"),this.appendChild(this.componentElement))}async connectedCallback(){super.connectedCallback(),this._applyStyle()}disconnectedCallback(){super.disconnectedCallback(),this._unWireEvents()}_handleAttributeChange(i,e){i==="items"?(typeof e=="string"&&(this._items=JSON.parse(e)),this.removeAttribute("items")):i==="caption"||i==="img-url"||i==="min-height"||super._handleAttributeChange(i,e)}_render(){super._render();let i=this.querySelectorAll(".wc-div > *");i.length>0?(this.componentElement.innerHTML="",i.forEach(e=>this.componentElement.appendChild(e))):(this.componentElement.innerHTML="",this._moveDeclarativeInner()),typeof htmx<"u"&&htmx.process(this)}_moveDeclarativeInner(){let i=this.querySelectorAll("wc-div > *:not(.wc-div)");i.length>0&&i.forEach(e=>this.componentElement.appendChild(e))}_applyStyle(){let i=`
      wc-div {
        display: contents;
      }
      .wc-div {
        position: relative;
        display: block;
      }
    `.trim();this.loadStyle("wc-div-style",i)}_unWireEvents(){super._unWireEvents()}};customElements.define("wc-div",V);if(!customElements.get("wc-dropdown-item")){class d extends HTMLElement{constructor(){super(),this.classList.add("contents")}connectedCallback(){}}customElements.define("wc-dropdown-item",d)}var X=class extends g{static get observedAttributes(){return["id","class","label","mode","format","dropdown-class"]}constructor(){super(),this.childComponentSelector="a,hr,wc-input",this.clickModes=["search","click"],this.mode=this.getAttribute("mode")||"click",this._boundReposition=null,this._isOpen=!1,this._isMobile=!1;let i=this.querySelector(".wc-dropdown");i?this.componentElement=i:(this.componentElement=document.createElement("div"),this.componentElement.classList.add("wc-dropdown",this.mode),this.appendChild(this.componentElement))}async connectedCallback(){super.connectedCallback(),await this._applyStyle(),this.classList.add("contents"),this.classList.remove("hidden"),this.componentElement.classList.remove("hidden"),this._wireEvents()}disconnectedCallback(){super.disconnectedCallback(),this._unWireEvents()}_handleAttributeChange(i,e){i==="label"||(i==="dropdown-class"?this._updateDropdownClass(e):super._handleAttributeChange(i,e))}_render(){if(super._render(),this.querySelector(".wc-dropdown > *")){let e=this.querySelector(".dropbtn");if(this.clickModes.includes(this.mode)){e.addEventListener("click",this._handleClick.bind(this)),window.addEventListener("click",this._handleWindowClick.bind(this));let t=this.querySelector(".search");t&&t.addEventListener("input",this._handleInput.bind(this))}}else this.componentElement.innerHTML="",this._createInnerElement();typeof htmx<"u"&&htmx.process(this)}_createInnerElement(){let i=Array.from(this.children).filter(m=>!m.matches("wc-dropdown")&&!m.matches(".wc-dropdown")),e=this.getAttribute("id")||"",t=this.getAttribute("position-area")||"bottom span-left",o=this.getAttribute("position-try-fallbacks")||"--bottom-right, --bottom-left, --top-right, --top-left, --right, --left",n=this.getAttribute("label")||"",s=this.getAttribute("format")||"standard",a=this.getAttribute("dropdown-height")||"",r=document.createElement("button");n&&s==="standard"?(r.classList.add("dropbtn"),r.textContent=n):s==="grid-round"?(r.classList.add("dropbtn"),r.classList.add("grid-round"),r.innerHTML=`
          <svg class="h-5 w-5 align-middle pointer-events-none"
            fill="currentColor"
            xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512">
            <path d="M128 96A64 64 0 1 1 0 96a64 64 0 1 1 128 0zm0 160A64 64 0 1 1 0 256a64 64 0 1 1 128 0zM64 480a64 64 0 1 1 0-128 64 64 0 1 1 0 128zM288 96A64 64 0 1 1 160 96a64 64 0 1 1 128 0zM224 320a64 64 0 1 1 0-128 64 64 0 1 1 0 128zm64 96a64 64 0 1 1 -128 0 64 64 0 1 1 128 0zm96-256a64 64 0 1 1 0-128 64 64 0 1 1 0 128zm64 96a64 64 0 1 1 -128 0 64 64 0 1 1 128 0zM384 480a64 64 0 1 1 0-128 64 64 0 1 1 0 128z"/>
          </svg>
        `):s==="avatar"&&(r.classList.add("dropbtn"),r.classList.add("avatar"),r.innerHTML=`
          <svg class="h-4 w-4 align-middle pointer-events-none" fill="currentColor" viewBox="0 0 24 24">
            <path d="M24 20.993V24H0v-2.996A14.977 14.977 0 0112.004 15c4.904 0 9.26 2.354 11.996 5.993zM16.002 8.999a4 4 0 11-8 0 4 4 0 018 0z" />
          </svg>
        `);let l=document.createElement("div");l.classList.add("dropdown");let c=this.getAttribute("dropdown-class");c&&l.classList.add(...c.split(" ").filter(m=>m));let p=document.createElement("div");if(p.classList.add("dropdown-content","text-sm"),this.mode==="search"){let m=document.createElement("input");m.classList.add("search","component"),m.type="search",m.setAttribute("placeholder","Search..."),p.appendChild(m);let b="http://www.w3.org/2000/svg",f=document.createElementNS(b,"svg");f.setAttribute("xmlns",b),f.setAttribute("fill","none"),f.setAttribute("viewBox","0 0 24 24"),f.setAttribute("stroke-width","1.5"),f.setAttribute("stroke","currentColor"),f.classList.add("search-svg","h-4","w-4","component");let v=document.createElementNS(b,"path");v.setAttribute("stroke-linecap","round"),v.setAttribute("stroke-linejoin","round"),v.setAttribute("d","m21 21-5.197-5.197m0 0A7.5 7.5 0 1 0 5.196 5.196a7.5 7.5 0 0 0 10.607 10.607Z"),f.appendChild(v),p.appendChild(f),m.addEventListener("input",this._handleInput.bind(this))}i.forEach(m=>p.appendChild(m)),l.appendChild(p),l.append(r),this.componentElement.append(l),a&&(p.style.height=a,p.style.overflow="auto"),this.clickModes.includes(this.mode)&&(r.addEventListener("click",this._handleClick.bind(this)),window.addEventListener("click",this._handleWindowClick.bind(this)));let u=this.querySelector(".wc-dropdown");u.style.anchorName=`--${e}-anchor`;let h=this.querySelector(".wc-dropdown .dropdown-content");h.style.positionAnchor=`--${e}-anchor`,h.style.positionArea=t,h.style.positionTryFallbacks=o,h.style.minWidth=`${u.offsetWidth}px`}_handleHelper(i,e="open"){let{detail:t}=i,{selector:o}=t,n=".wc-dropdown",s=Array.isArray(o);if(typeof o=="string"||s)document.querySelectorAll(o).forEach(r=>{if(r===this){let l=r?.querySelector(n);e==="open"?(l?.classList.add("show"),this._applyPositioningIfNeeded()):e==="close"?(l?.classList.remove("show"),this._isOpen=!1):e==="toggle"&&(l?.classList.toggle("show"),l?.classList.contains("show")?this._applyPositioningIfNeeded():this._isOpen=!1)}});else{let a=o?.querySelector(n);e==="open"?(a?.classList.add("show"),this._applyPositioningIfNeeded()):e==="close"?(a?.classList.remove("show"),this._isOpen=!1):e==="toggle"&&(a?.classList.toggle("show"),a?.classList.contains("show")?this._applyPositioningIfNeeded():this._isOpen=!1)}}_applyPositioningIfNeeded(){let i=this.querySelector(".dropdown-content"),e=this.querySelector(".dropbtn");i&&e&&requestAnimationFrame(()=>{this._positionDropdown(i,e),this._isOpen=!0})}_handleOpen(i){this._handleHelper(i,"open")}_handleClose(i){this._handleHelper(i,"close")}_handleToggle(i){this._handleHelper(i,"toggle")}_handleClick(i){let{target:e}=i,t=e.closest(".wc-dropdown"),o=t.classList.contains("show");if(t.classList.toggle("show"),o)this._isOpen=!1;else{let n=this.querySelector(".dropdown-content"),s=this.querySelector(".dropbtn");n&&s&&requestAnimationFrame(()=>{this._positionDropdown(n,s),this._isOpen=!0})}}_handleWindowClick(i){let{target:e}=i;if(e.matches(".dropbtn")||e.matches(".search")||e.closest(".halt-event"))return;this.querySelectorAll(".wc-dropdown").forEach(n=>{n.classList.remove("show"),this._isOpen=!1})}_handleInput(i){let{target:e}=i,t=e.value.toLowerCase();this.querySelectorAll(".dropdown-content > *:not(.component)").forEach(n=>{n.textContent.toLowerCase().includes(t)?n.style.display="block":n.style.display="none"})}_updateDropdownClass(i){let e=this.querySelector(".dropdown");e&&(e.className="dropdown",i&&e.classList.add(...i.split(" ").filter(t=>t)))}_detectMobile(){return window.innerWidth<=768||"ontouchstart"in window}_checkAnchorPositioningSupport(){return CSS.supports("anchor-name","--test")}_positionDropdown(i,e){if(!this._detectMobile()&&this._checkAnchorPositioningSupport())return;let t=e.getBoundingClientRect(),o=window.innerWidth,n=window.innerHeight,s=n-t.bottom,a=t.top;i.style.position="fixed",i.style.width="auto",i.style.maxWidth="",i.style.left="",i.style.right="",i.style.top="",i.style.bottom="";let r=i.style.display;i.style.display="block";let l=i.getBoundingClientRect(),c=Math.min(l.width,o-20),p=l.height;i.style.display=r,this._detectMobile()&&(i.style.maxWidth=`${Math.min(c,o-20)}px`);let u=t.bottom;s<p&&a>s&&(u=t.top-p);let h=t.left;h+c>o-10&&(h=Math.max(10,Math.min(t.right-c,o-c-10))),h<10&&(h=10),i.style.position="fixed",i.style.left=`${h}px`,i.style.top=`${u}px`,i.style.width=`${c}px`,u+p>n-10&&(i.style.maxHeight=`${n-u-10}px`,i.style.overflowY="auto")}_repositionOnScroll(){let i=this.querySelector(".dropdown-content"),e=this.querySelector(".dropbtn");i&&e&&i.style.display==="block"&&this._positionDropdown(i,e)}async _applyStyle(){let i=`
      wc-dropdown {
        /* display: contents; */
      }

      .wc-dropdown {
        display: flex;
        flex-direction: row;
      }

      /* Dropdown Button */
      .wc-dropdown .dropbtn {
        background-color: var(--button-bg-color);
        color: var(--button-color);
        padding: 16px;
        font-size: 16px;
        border: none;
        border-radius: 0;
      }
      .wc-dropdown .dropbtn.grid-round {
        background-color: transparent;
        padding: 4px;
      }
      .wc-dropdown .dropbtn.avatar {
        padding: 6px;
        border-radius: 50%;
        font-size: 0.825rem;
      }

      /* The container <div> - needed to position the dropdown content */
      .wc-dropdown .dropdown {
      }

      /* Dropdown Content (Hidden by Default) */
      .wc-dropdown .dropdown-content {
        display: none;
        position: absolute;
        background-color: var(--button-hover-bg-color);
        min-width: 160px;
        max-width: 250px;
        box-shadow: 0px 8px 16px 0px rgba(0,0,0,0.2);
        z-index: 1;
      }

      .wc-dropdown .search {
        width: 100%;
        box-sizing: border-box;
        font-size: 12px;
        padding: 14px 20px 12px 35px;
        border-radius: 0;
      }
      .wc-dropdown .dropdown-content svg.search-svg {
        position: absolute;
        left: 8px;
        top: 20px;
        transform: translateY(-50%);
        width: 20px;
        height: 20px;
        stroke: var(--component-color);
        pointer-events: none;
      }

      /* Links inside the dropdown */
      /* .wc-dropdown .dropdown-content .wc-input, */
      .wc-dropdown .dropdown-content a {
        color: var(--component-color);
        padding: 12px 16px;
        text-decoration: none;
        display: block;
      }

      /* Change color of dropdown links on hover */
      /* .wc-dropdown .dropdown-content .wc-input:hover, */
      .wc-dropdown .dropdown-content a:hover {
        background-color: var(--component-border-color);
      }

      /* Show the dropdown menu on hover */
      .wc-dropdown:hover:not(.click):not(.search) .dropdown .dropdown-content {
        display: block;
      }
      .wc-dropdown.show .dropdown .dropdown-content {
        display: block;
      }

      /* Change the background color of the dropdown button when the dropdown content is shown */
      .wc-dropdown:hover:not(.click):not(.search) .dropdown .dropbtn {
        background-color: var(--button-hover-bg-color);
      }
      .wc-dropdown.show .dropdown .dropbtn {
        background-color: var(--button-hover-bg-color);
      }

      @position-try --bottom-left {
        position-area: bottom span-left;
      }
      @position-try --bottom-right {
        position-area: bottom span-right;
      }
      @position-try --top-left {
        position-area: top span-left;
      }
      @position-try --top-right {
        position-area: top span-right;
      }
      @position-try --right {
        position-area: right;
      }
      @position-try --left {
        position-area: left;
      }
      
      /* Mobile-specific styles */
      @media (max-width: 768px) {
        .wc-dropdown .dropdown-content {
          max-width: calc(100vw - 20px) !important;
        }
      }
      
      /* Fallback for browsers without anchor positioning */
      @supports not (anchor-name: --test) {
        .wc-dropdown .dropdown-content {
          position: fixed !important;
        }
      }
    `.trim();await this.loadStyle("wc-dropdown-style",i)}_wireEvents(){super._wireEvents(),this.clickModes.includes(this.mode)&&(document.body.addEventListener("wc-dropdown:open",this._handleOpen.bind(this)),document.body.addEventListener("wc-dropdown:close",this._handleClose.bind(this)),document.body.addEventListener("wc-dropdown:toggle",this._handleToggle.bind(this))),this._boundReposition=this._repositionOnScroll.bind(this),window.addEventListener("scroll",this._boundReposition,{passive:!0}),window.addEventListener("resize",this._boundReposition,{passive:!0})}_unWireEvents(){if(super._unWireEvents(),this.clickModes.includes(this.mode)){document.body.removeEventListener("wc-dropdown:open",this._handleOpen.bind(this)),document.body.removeEventListener("wc-dropdown:close",this._handleClose.bind(this)),document.body.removeEventListener("wc-dropdown:toggle",this._handleToggle.bind(this)),this.querySelector(".dropbtn").removeEventListener("click",this._handleClick.bind(this)),window.removeEventListener("click",this._handleWindowClick.bind(this));let e=this.querySelector(".search");e&&e.removeEventListener("input",this._handleInput.bind(this))}this._boundReposition&&(window.removeEventListener("scroll",this._boundReposition),window.removeEventListener("resize",this._boundReposition),this._boundReposition=null)}};customElements.define("wc-dropdown",X);var K=class extends g{static get observedAttributes(){return["id","class"]}constructor(){super();let i=this.querySelector(".wc-flip-box");i?this.componentElement=i:(this.componentElement=document.createElement("div"),this.componentElement.classList.add("wc-flip-box"),this.appendChild(this.componentElement))}async connectedCallback(){super.connectedCallback(),this._applyStyle()}disconnectedCallback(){super.disconnectedCallback(),this._unWireEvents()}_render(){if(super._render(),!this.querySelector(".flip-box-inner")){this.componentElement.innerHTML="";let e=this._createInnerElement();this.componentElement.appendChild(e)}typeof htmx<"u"&&htmx.process(this)}_createInnerElement(){let i=document.createElement("div");i.classList.add("flip-box-inner");let e=this.querySelector('[slot="front"]'),t=this.querySelector('[slot="back"]');return e&&(e.classList.add("flip-box-front"),i.appendChild(e)),t&&(t.classList.add("flip-box-back"),i.appendChild(t)),this.componentElement.appendChild(i),i}_applyStyle(){let i=`
      wc-flip-box {
        display: contents;
      }

      /* The flip box container - set the width and height to whatever you want. We have added the border property to demonstrate that the flip itself goes out of the box on hover (remove perspective if you don't want the 3D effect */
      .wc-flip-box {
        background-color: transparent;
        /*
        width: 300px;
        height: 200px;
        */
        border: 1px solid var(--component-border-color);
        perspective: 1000px; /* Remove this if you don't want the 3D effect */
      }

      /* This container is needed to position the front and back side */
      .wc-flip-box .flip-box-inner {
        position: relative;
        width: 100%;
        height: 100%;
        text-align: center;
        transition: transform 0.8s;
        transform-style: preserve-3d;
      }

      /* Do an horizontal flip when you move the mouse over the flip box container */
      .wc-flip-box:hover .flip-box-inner {
        transform: rotateY(180deg);
      }

      /* Position the front and back side */
      .wc-flip-box .flip-box-front,
      .wc-flip-box .flip-box-back {
        position: absolute;
        width: 100%;
        height: 100%;
        -webkit-backface-visibility: hidden; /* Safari */
        backface-visibility: hidden;
      }

      /* Style the front side */
      .wc-flip-box .flip-box-front {
        background-color: var(--card-bg-color);
        color: var(--text-1);
      }

      /* Style the back side */
      .wc-flip-box .flip-box-back {
        background-color: var(--card-bg-color);
        color: var(--text-1);
        transform: rotateY(180deg);
      }`.trim();this.loadStyle("wc-flip-box-style",i)}_unWireEvents(){super._unWireEvents()}};customElements.define("wc-flip-box",K);if(!customElements.get("wc-icon")){let d=new Map,i=new Map;class e extends g{static get observedAttributes(){return["name","icon-style","size","color","primary-color","secondary-color","secondary-opacity","swap-opacity","rotate","flip","base-path","spin","pulse"]}static iconAliases={home:"house",search:"magnifying-glass",edit:"pen-to-square",save:"floppy-disk",undo:"arrow-rotate-left",redo:"arrow-rotate-right","sign-out":"right-from-bracket","sign-in":"right-to-bracket","sign-out-alt":"arrow-right-from-bracket","sign-in-alt":"arrow-right-to-bracket",settings:"gear",cog:"gear",cogs:"gears","trash-alt":"trash-can",delete:"trash",remove:"xmark",clear:"eraser",close:"xmark",times:"xmark","search-plus":"magnifying-glass-plus","search-minus":"magnifying-glass-minus","zoom-in":"magnifying-glass-plus","zoom-out":"magnifying-glass-minus","power-off":"power-off","log-out":"right-from-bracket","log-in":"right-to-bracket","shopping-cart":"cart-shopping","chart-bar":"chart-column","bar-chart":"chart-column","line-chart":"chart-line","area-chart":"chart-area","pie-chart":"chart-pie",refresh:"arrows-rotate",sync:"arrows-rotate",mail:"envelope",email:"envelope",warning:"triangle-exclamation","exclamation-triangle":"triangle-exclamation",error:"circle-xmark","times-circle":"circle-xmark",info:"circle-info","info-circle":"circle-info","question-circle":"circle-question",help:"circle-question",picture:"image",photo:"image"};constructor(){super(),this._basePath=this.getAttribute("base-path")||e.defaultBasePath||"/dist/assets/icons"}static get is(){return"wc-icon"}static defaultBasePath="/dist/assets/icons";static setBasePath(o){e.defaultBasePath=o,window.wc?.iconRegistry&&window.wc.iconRegistry.setBaseUrl(o)}async _render(){if(this.classList.remove("contents"),!document.getElementById("wc-icon-animations")){let o=document.createElement("style");o.id="wc-icon-animations",o.textContent=`
          @keyframes wc-icon-spin {
            from { transform: rotate(0deg); }
            to { transform: rotate(360deg); }
          }
          @keyframes wc-icon-pulse {
            0%, 100% { opacity: 1; }
            50% { opacity: 0.5; }
          }
          wc-icon[spin] svg {
            animation: wc-icon-spin 1s linear infinite;
          }
          wc-icon[pulse] svg {
            animation: wc-icon-pulse 2s ease-in-out infinite;
          }
        `,document.head.appendChild(o)}this._svg=document.createElementNS("http://www.w3.org/2000/svg","svg"),this._svg.setAttribute("viewBox","0 0 512 512"),this._svg.setAttribute("fill","currentColor"),this._group=document.createElementNS("http://www.w3.org/2000/svg","g"),this._svg.appendChild(this._group),this.appendChild(this._svg),this._applyStyles(),await this._loadIcon()}_handleAttributeChange(o,n,s){if(o==="name"||o==="icon-style")this._loadIcon();else if(o==="base-path")this._basePath=s||e.defaultBasePath,this._loadIcon();else{if(o==="spin"||o==="pulse")return;this._applyStyles()}}_applyStyles(){if(!this._svg)return;let o=this.getAttribute("size"),n=this.getAttribute("rotate"),s=this.getAttribute("flip"),a=this.getAttribute("icon-style")||"solid";o&&(this._svg.style.width=o,this._svg.style.height=o);let r="";if(n&&!this.hasAttribute("spin")&&(r+=`rotate(${n}deg)`),s==="horizontal"?r+=" scaleX(-1)":s==="vertical"?r+=" scaleY(-1)":s==="both"&&(r+=" scale(-1)"),r?this._svg.style.transform=r.trim():this._svg.style.removeProperty("transform"),a.includes("duotone")){let l=this.getAttribute("primary-color")||this.getAttribute("color")||"currentColor",c=this.getAttribute("secondary-color")||this.getAttribute("color")||"currentColor",p=this.getAttribute("secondary-opacity")||"0.4",u=this.hasAttribute("swap-opacity");this.style.setProperty("--fa-primary-color",l),this.style.setProperty("--fa-secondary-color",c),this.style.setProperty("--fa-primary-opacity",u?p:"1"),this.style.setProperty("--fa-secondary-opacity",u?"1":p),this.style.removeProperty("--fa-color")}else{let l=this.getAttribute("color")||"currentColor";this.style.setProperty("--fa-color",l),this.style.removeProperty("--fa-primary-color"),this.style.removeProperty("--fa-secondary-color"),this.style.removeProperty("--fa-primary-opacity"),this.style.removeProperty("--fa-secondary-opacity")}}async _loadIcon(){let o=this.getAttribute("name");if(!o||!this._group)return;let n=e.iconAliases[o]||o,s=this.getAttribute("icon-style")||"solid",a=this.getAttribute("base-path")||this._basePath,r=`${a}/${s}/${n}`;try{let l=d.get(r);if(!l){let c=i.get(r);if(c)l=await c;else{let p=(async()=>{if(e._globalRegistry?.has(`${s}/${n}`)){let x=e._globalRegistry.get(`${s}/${n}`);return d.set(r,x),x}let u=await fetch(`${a}/${s}/${n}.svg`);if(!u.ok)return console.error(`Icon not found: ${s}/${n}`),null;let h=await u.text(),b=new DOMParser().parseFromString(h,"image/svg+xml"),f=b.querySelector("svg"),v=b.querySelectorAll("path"),E={viewBox:f?.getAttribute("viewBox"),paths:Array.from(v).map(x=>({d:x.getAttribute("d"),opacity:x.getAttribute("opacity"),class:x.getAttribute("class"),fill:x.getAttribute("fill")}))};return d.set(r,E),E})();i.set(r,p);try{l=await p}finally{i.delete(r)}}}if(!l)return;this._group.innerHTML="",l.viewBox&&this._svg.setAttribute("viewBox",l.viewBox),l.paths.forEach(c=>{let p=document.createElementNS("http://www.w3.org/2000/svg","path");p.setAttribute("d",c.d),s.includes("duotone")?c.class&&c.class.includes("fa-secondary")?(p.classList.add("fa-secondary"),p.style.fill="var(--fa-secondary-color)",p.style.opacity="var(--fa-secondary-opacity)"):(p.classList.add("fa-primary"),p.style.fill="var(--fa-primary-color)",p.style.opacity="var(--fa-primary-opacity)"):(p.style.fill="var(--fa-color, currentColor)",c.opacity&&(p.style.opacity=c.opacity)),this._group.appendChild(p)})}catch(l){console.error(`Error loading icon ${r}:`,l)}}static registerIcon(o,n,s="solid"){e._globalRegistry||(e._globalRegistry=new Map);let a=`${s}/${o}`;e._globalRegistry.set(a,n)}static registerIcons(o,n="solid"){Object.entries(o).forEach(([s,a])=>{e.registerIcon(s,a,n)})}static async preloadIcons(o){let n=o.map(async s=>{let{name:a,style:r="solid",basePath:l=e.defaultBasePath}=typeof s=="string"?{name:s}:s,c=e.iconAliases[a]||a,p=`${l}/${r}/${c}`;if(d.has(p))return;if(i.has(p))return i.get(p);let u=(async()=>{if(e._globalRegistry?.has(`${r}/${c}`)){let C=e._globalRegistry.get(`${r}/${c}`);return d.set(p,C),C}let h=await fetch(`${l}/${r}/${c}.svg`);if(!h.ok)return console.error(`Icon not found: ${r}/${c}`),null;let m=await h.text(),f=new DOMParser().parseFromString(m,"image/svg+xml"),v=f.querySelector("svg"),E=f.querySelectorAll("path"),x={viewBox:v?.getAttribute("viewBox"),paths:Array.from(E).map(C=>({d:C.getAttribute("d"),opacity:C.getAttribute("opacity"),class:C.getAttribute("class"),fill:C.getAttribute("fill")}))};return d.set(p,x),x})();i.set(p,u);try{return await u}finally{i.delete(p)}});await Promise.all(n)}static clearCache(){d.clear(),i.clear()}static getCacheStats(){return{cachedIcons:d.size,pendingRequests:i.size,cacheKeys:Array.from(d.keys())}}}customElements.define(e.is,e)}if(!customElements.get("wc-fa-icon")){let d=new Map,i=new Set,e=new Map;class t extends g{static get observedAttributes(){return["name","icon-style","size","color","primary-color","secondary-color","secondary-opacity","swap-opacity","rotate","flip","spin","pulse"]}static iconAliases={home:"house",search:"magnifying-glass",edit:"pen-to-square",save:"floppy-disk",undo:"arrow-rotate-left",redo:"arrow-rotate-right","sign-out":"right-from-bracket","sign-in":"right-to-bracket","sign-out-alt":"arrow-right-from-bracket","sign-in-alt":"arrow-right-to-bracket",settings:"gear",cog:"gear",cogs:"gears","trash-alt":"trash-can",delete:"trash",remove:"xmark",clear:"eraser",close:"xmark",times:"xmark","search-plus":"magnifying-glass-plus","search-minus":"magnifying-glass-minus","zoom-in":"magnifying-glass-plus","zoom-out":"magnifying-glass-minus","power-off":"power-off","log-out":"right-from-bracket","log-in":"right-to-bracket","shopping-cart":"cart-shopping","chart-bar":"chart-column","bar-chart":"chart-column","line-chart":"chart-line","area-chart":"chart-area","pie-chart":"chart-pie",refresh:"arrows-rotate",sync:"arrows-rotate",mail:"envelope",email:"envelope",warning:"triangle-exclamation","exclamation-circle":"circle-exclamation","exclamation-triangle":"triangle-exclamation",error:"circle-xmark","times-circle":"circle-xmark",info:"circle-info","info-circle":"circle-info","question-circle":"circle-question","check-circle":"circle-check","check-square":"square-check",help:"circle-question",picture:"image",photo:"image","play-circle":"circle-play","pause-circle":"circle-pause","plus-circle":"circle-plus","file-download":"file-arrow-down","user-circle":"circle-user",allergies:"hand-dots",heartbeat:"heart-pulse","chalkboard-teacher":"chalkboard-user","phone-alt":"phone-flip","users-cog":"users-gear","user-friends":"user-group","calendar-times":"calendar-xmark","calendar-time":"calendar-clock","calendar-alt":"calendar-days","map-marker-alt":"location-dot","exchange-alt":"right-left","sticky-note":"note-sticky","phone-square":"square-phone","phone-square-alt":"square-phone-flip","phone-square-down":"square-phone-hangup",history:"rectangle-history","birthday-cake":"cake-candles",medkit:"suitcase-medical","shield-alt":"shield-halved","volume-up":"volume-high","volume-down":"volume-low"};constructor(){super()}static get is(){return"wc-fa-icon"}async _render(){if(this.classList.remove("contents"),!document.getElementById("wc-fa-icon-animations")){let n=document.createElement("style");n.id="wc-fa-icon-animations",n.textContent=`
          @keyframes wc-fa-icon-spin {
            from { transform: rotate(0deg); }
            to { transform: rotate(360deg); }
          }
          @keyframes wc-fa-icon-pulse {
            0%, 100% { opacity: 1; }
            50% { opacity: 0.5; }
          }
          wc-fa-icon[spin] svg {
            animation: wc-fa-icon-spin 1s linear infinite;
          }
          wc-fa-icon[pulse] svg {
            animation: wc-fa-icon-pulse 2s ease-in-out infinite;
          }
        `,document.head.appendChild(n)}this.innerHTML="",this._svg=document.createElementNS("http://www.w3.org/2000/svg","svg"),this._svg.setAttribute("viewBox","0 0 512 512"),this._svg.setAttribute("fill","currentColor"),this._group=document.createElementNS("http://www.w3.org/2000/svg","g"),this._svg.appendChild(this._group),this.appendChild(this._svg),this._applyStyles(),await this._loadIcon()}_handleAttributeChange(n,s,a){if(n==="name"||n==="icon-style")this._loadIcon();else{if(n==="spin"||n==="pulse")return;this._applyStyles()}}_applyStyles(){if(!this._svg)return;let n=this.getAttribute("size"),s=this.getAttribute("rotate"),a=this.getAttribute("flip"),r=this.getAttribute("icon-style")||"solid";n&&(this._svg.style.width=n,this._svg.style.height=n);let l="";if(s&&!this.hasAttribute("spin")&&(l+=`rotate(${s}deg)`),a==="horizontal"?l+=" scaleX(-1)":a==="vertical"?l+=" scaleY(-1)":a==="both"&&(l+=" scale(-1)"),l?this._svg.style.transform=l.trim():this._svg.style.removeProperty("transform"),r.includes("duotone")){let c=this.getAttribute("primary-color")||this.getAttribute("color")||"currentColor",p=this.getAttribute("secondary-color")||this.getAttribute("color")||"currentColor",u=this.getAttribute("secondary-opacity")||"0.4",h=this.hasAttribute("swap-opacity");this.style.setProperty("--fa-primary-color",c),this.style.setProperty("--fa-secondary-color",p),this.style.setProperty("--fa-primary-opacity",h?u:"1"),this.style.setProperty("--fa-secondary-opacity",h?"1":u),this.style.removeProperty("--fa-color")}else{let c=this.getAttribute("color")||"currentColor";this.style.setProperty("--fa-color",c),this.style.removeProperty("--fa-primary-color"),this.style.removeProperty("--fa-secondary-color"),this.style.removeProperty("--fa-primary-opacity"),this.style.removeProperty("--fa-secondary-opacity")}}async _loadIcon(){let n=this.getAttribute("name");if(!n||!this._group)return;let s=t.iconAliases[n]||n,a=this.getAttribute("icon-style")||"solid";if(!i.has(a)&&!e.has(a)){let r=`${I.bundleBaseUrl}/${a}-icons.json`,l=t.loadBundle(r).then(c=>(i.add(a),e.delete(a),c)).catch(c=>(console.error(`[wc-fa-icon] Failed to auto-load ${a} bundle:`,c),e.delete(a),i.add(a),0));e.set(a,l)}e.has(a)&&await e.get(a);try{let r=`${a}/${s}`,l=d.get(r);if(!l&&a==="duotone"&&(console.log(`[wc-fa-icon] Looking for duotone icon: ${s}`),console.log("[wc-fa-icon] Loaded bundles:",Array.from(i)),console.log("[wc-fa-icon] Total icons in cache:",d.size),console.log("[wc-fa-icon] Sample keys:",Array.from(d.keys()).slice(0,5))),!l){console.warn(`Icon not found in loaded bundles: ${s} (style: ${a})`),console.warn("Available icons:",d.size>0?Array.from(d.keys()).slice(0,10):"No icons loaded"),console.warn(`Bundle URL was: ${I.bundleBaseUrl}/${a}-icons.json`),this._group.innerHTML="";let c=document.createElementNS("http://www.w3.org/2000/svg","text");c.setAttribute("x","256"),c.setAttribute("y","256"),c.setAttribute("text-anchor","middle"),c.setAttribute("dominant-baseline","middle"),c.setAttribute("font-size","200"),c.textContent="?",this._group.appendChild(c);return}this._group.innerHTML="",l.viewBox&&this._svg.setAttribute("viewBox",l.viewBox),l.paths.forEach(c=>{let p=document.createElementNS("http://www.w3.org/2000/svg","path");p.setAttribute("d",c.d),a.includes("duotone")?c.class&&c.class.includes("fa-secondary")?(p.classList.add("fa-secondary"),p.style.fill="var(--fa-secondary-color)",p.style.opacity="var(--fa-secondary-opacity)"):(p.classList.add("fa-primary"),p.style.fill="var(--fa-primary-color)",p.style.opacity="var(--fa-primary-opacity)"):(p.style.fill="var(--fa-color, currentColor)",c.opacity&&(p.style.opacity=c.opacity)),this._group.appendChild(p)})}catch(r){console.error(`Error loading icon ${bundleKey}:`,r)}}static async loadBundle(n){try{let s=await fetch(n);if(!s.ok)throw new Error(`Failed to load icon bundle: ${n}`);let a=await s.json(),r=0,l=n.match(/\/([^\/]+)-icons\.json$/),c=l?l[1]:"unknown";for(let[p,u]of Object.entries(a)){let h=`${c}/${p}`;d.set(h,u),r++}return c!=="unknown"&&(i.add(c),e.delete(c)),r}catch(s){throw console.error("[wc-fa-icon] Error loading bundle:",s),s}}static async loadBundles(n){let s=await Promise.allSettled(n.map(l=>t.loadBundle(l))),a=s.filter(l=>l.status==="fulfilled").reduce((l,c)=>l+c.value,0),r=s.filter(l=>l.status==="rejected").length;return{totalLoaded:a,failed:r}}static registerIcon(n,s,a="solid"){d.set(n,s)}static registerIcons(n,s="solid"){Object.entries(n).forEach(([a,r])=>{t.registerIcon(a,r,s)})}static getBundleStats(){return{loadedIcons:d.size,iconKeys:Array.from(d.keys())}}static clearBundles(){d.clear()}static isIconLoaded(n,s="solid"){let a=t.iconAliases[n]||n;return d.has(`${s}/${a}`)}static async preloadConfiguredBundles(){if(I.preloadBundles&&I.preloadBundles.length>0){let n=[];for(let r of I.preloadBundles)if(!i.has(r)&&!e.has(r)){let l=`${I.bundleBaseUrl}/${r}-icons.json`,c=t.loadBundle(l).then(p=>(i.add(r),e.delete(r),p)).catch(p=>(console.error(`[wc-fa-icon] Failed to preload ${r} bundle:`,p),e.delete(r),i.add(r),0));e.set(r,c),n.push(c)}let s=await Promise.all(n);return{totalLoaded:s.reduce((r,l)=>r+l,0),failed:s.filter(r=>r===0).length}}return{totalLoaded:0,failed:0}}}customElements.define(t.is,t),window.WcFaIcon=t,I.preloadBundles&&I.preloadBundles.length>0&&t.preloadConfiguredBundles()}var Y=class extends g{static get observedAttributes(){return["id","class","url","caption","modal","hover-overlay","hover-mode"]}constructor(){super();let i=this.querySelector(".wc-image");i?this.componentElement=i:(this.componentElement=document.createElement("div"),this.componentElement.classList.add("wc-image"),this.appendChild(this.componentElement))}async connectedCallback(){super.connectedCallback(),this._applyStyle(),this._wireEvents()}disconnectedCallback(){super.disconnectedCallback(),this._unWireEvents()}_handleAttributeChange(i,e){i==="url"||i==="caption"||i==="modal"||super._handleAttributeChange(i,e)}_render(){super._render(),this.querySelector(".wc-image > *")?this.hasAttribute("modal")&&(this.querySelector(".img").addEventListener("click",this._showModal.bind(this)),this.querySelector(".overlay .closebtn").addEventListener("click",this._hideModal.bind(this))):(this.componentElement.innerHTML="",this._createInnerElement()),typeof htmx<"u"&&htmx.process(this)}_createInnerElement(){let i=this.getAttribute("caption")||"",e=document.createElement("img");e.classList.add("img"),e.src=this.getAttribute("url")||"",e.alt=i;let t=document.createElement("div");if(t.textContent=i,t.classList.add("img-text"),this.componentElement.appendChild(e),this.componentElement.appendChild(t),this.hasAttribute("hover-overlay")){let r=this.getAttribute("hover-mode")||"bottom",l=document.createElement("div");l.classList.add("hover-overlay",r),this.querySelectorAll("wc-image > *:not(.wc-image").forEach(p=>l.appendChild(p)),this.componentElement.appendChild(l)}let o=document.createElement("div");o.classList.add("overlay","hidden");let n=document.createElement("button");n.classList.add("closebtn"),n.innerHTML="&times;",o.appendChild(n);let s=document.createElement("img");s.classList.add("overlay-img"),s.alt=i,o.appendChild(s);let a=document.createElement("div");a.textContent=i,a.classList.add("overlay-img-text"),o.appendChild(a),this.appendChild(o),this.hasAttribute("modal")&&(e.addEventListener("click",this._showModal.bind(this)),n.addEventListener("click",this._hideModal.bind(this)))}_handleHelper(i,e="show"){let{detail:t}=i,{selector:o}=t,n=Array.isArray(o);typeof o=="string"||n?document.querySelectorAll(o).forEach(a=>{a===this&&(e==="show"?this._showModal({target:this}):e==="hide"&&this._hideModal({target:this}))}):o===this&&(e==="show"?this._showModal({target:this}):e==="hide"&&this._hideModal({target:this}))}_handleShow(i){this._handleHelper(i,"show")}_handleHide(i){this._handleHelper(i,"hide")}_showModal(i){let{target:e}=i,t=this.querySelector(".overlay");if(t){let o=this.querySelector("img:not(.overlay-img)"),n=this.querySelector(".overlay-img");n.src=o.src,t.classList.remove("hidden"),t.classList.add("show")}}_hideModal(i){let{target:e}=i,t=this.querySelector(".overlay");t&&(t.classList.remove("show"),t.classList.add("hidden"))}_applyStyle(){let i=`
      wc-image {
        display: contents;
      }
      wc-image .wc-image {
        position: relative;
      }
      wc-image .wc-image .img {
        max-height: 300px;
        width: 100%;
        height: auto;
        object-fit: cover;
        transition: 0.3s;
      }
      wc-image[modal]:not([hover-overlay]) .wc-image .img {
        cursor: pointer;
      }
      wc-image[modal]:not([hover-overlay]) .wc-image .img:hover {
        opacity: 0.7;
      }
      wc-image .wc-image .img-text {
        color: #f2f2f2;
        font-size: 15px;
        padding: 8px 12px;
        position: absolute;
        bottom: 8px;
        width: 100%;
        text-align: center;
      }
      /* Overlay */
      wc-image .overlay {
        position: fixed;
        top: 0;
        left: 0;
        width: 100vw;
        height: 100vh;
        padding-top: 100px;
        background-color: transparent;
        transition: background-color 0.5s ease;
      }
      wc-image .overlay.show {
        background-color: rgba(0,0,0,0.8);
        z-index: 1;
      }
      wc-image .overlay .closebtn {
        position: absolute;
        top: 10px;
        right: 10px;
        font-size: 40px;
        background-color: transparent;
      }
      wc-image .overlay .overlay-img {
        margin: auto;
        display: block;
        width: 80%;
        max-width: 700px;
      }
      wc-image .overlay .overlay-img-text {
        color: #f2f2f2;
        font-size: 36px;
        padding: 8px 12px;
        position: absolute;
        width: 100%;
        text-align: center;
      }
      wc-image .overlay .overlay-img,
      wc-image .overlay .overlay-img-text {
        animation-name: img-zoom;
        animation-duration: 0.6s;
      }
      /* Hover Overlay */
      wc-image[hover-overlay] .hover-overlay.top {
        position: absolute;
        top: 100%;
        left: 0;
        right: 0;
        background-color: var(--card-bg-color);
        overflow: hidden;
        width: 100%;
        height:0;
        transition: .5s ease;
      }
      wc-image[hover-overlay] .wc-image:hover .hover-overlay.top {
        top: 0;
        height: 100%;
      }
      wc-image[hover-overlay] .hover-overlay.bottom {
        position: absolute;
        bottom: 100%;
        left: 0;
        right: 0;
        background-color: var(--card-bg-color);
        overflow: hidden;
        width: 100%;
        height:0;
        transition: .5s ease;
      }
      wc-image[hover-overlay] .wc-image:hover .hover-overlay.bottom {
        bottom: 0;
        height: 100%;
      }
      wc-image[hover-overlay] .hover-overlay.left {
        position: absolute;
        bottom: 0;
        left: 100%;
        right: 0;
        background-color: var(--card-bg-color);
        overflow: hidden;
        width: 0;
        height: 100%;
        transition: .5s ease;
      }
      wc-image[hover-overlay] .wc-image:hover .hover-overlay.left {
        left: 0;
        width: 100%;
      }
      wc-image[hover-overlay] .hover-overlay.right {
        position: absolute;
        bottom: 0;
        left: 0;
        right: 100%;
        background-color: var(--card-bg-color);
        overflow: hidden;
        width: 0;
        height: 100%;
        transition: .5s ease;
      }
      wc-image[hover-overlay] .wc-image:hover .hover-overlay.right {
        right: 0;
        width: 100%;
      }

      @keyframes img-zoom {
        from { transform: scale(0); }
        to { transform: scale(1); }
      }
    `.trim();this.loadStyle("wc-image-style",i)}_wireEvents(){super._wireEvents(),this.hasAttribute("modal")&&(document.body.addEventListener("wc-image:show",this._handleShow.bind(this)),document.body.addEventListener("wc-image:hide",this._handleHide.bind(this)))}_unWireEvents(){super._unWireEvents(),this.hasAttribute("modal")&&(document.body.removeEventListener("wc-image:show",this._handleShow.bind(this)),document.body.removeEventListener("wc-image:hide",this._handleHide.bind(this)),this.querySelector(".img").removeEventListener("click",this._showModal.bind(this)),this.querySelector(".overlay .closebtn").removeEventListener("click",this._hideModal.bind(this)))}};customElements.define("wc-image",Y);var Z=class extends g{static get observedAttributes(){return["id","class","path","wrap"]}constructor(){super(),this._items=[];let i=this.querySelector(".wc-menu");i?this.componentElement=i:(this.componentElement=document.createElement("div"),this.componentElement.classList.add("wc-menu"),this.appendChild(this.componentElement))}async connectedCallback(){super.connectedCallback(),this._applyStyle(),this._wireEvents()}disconnectedCallback(){super.disconnectedCallback(),this._unWireEvents()}_handleAttributeChange(i,e){i==="items"?(typeof e=="string"&&(this._items=JSON.parse(e)),this.removeAttribute("items")):i==="wrap"||super._handleAttributeChange(i,e)}_render(){super._render(),this.querySelector(".wc-menu > *")?(this.querySelectorAll(".menu-link").forEach(o=>o.addEventListener("click",this._handleClick.bind(this))),this.querySelector(".menu-toggle").addEventListener("click",this._handleMenuToggle.bind(this)),this._setActiveLink()):(this.componentElement.innerHTML="",this._createInnerElement(),this._setActiveLink()),typeof htmx<"u"&&htmx.process(this)}_createInnerElement(){this._moveDeclarativeOptions();let i=document.createElement("div");i.classList.add("menu-items"),this.hasAttribute("wrap")&&i.classList.add("flex-wrap"),this._items.forEach(o=>{let n=this._createAnchor(o.name,o.label,o.selected);i.appendChild(n)});let e=document.createElement("div");e.classList.add("menu-toggle");let t=document.createElement("a");t.href="javascript:void(0);",t.classList.add("icon","row"),t.id="menuIcon",t.innerHTML=`
        <svg class="h-4 w-4" fill="currentColor" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512">
            <path d="M0 96C0 78.3 14.3 64 32 64l384 0c17.7 0 32 14.3 32 32s-14.3 32-32 32L32 128C14.3 128 0 113.7 0 96zM0 256c0-17.7 14.3-32 32-32l384 0c17.7 0 32 14.3 32 32s-14.3 32-32 32L32 288c-17.7 0-32-14.3-32-32zM448 416c0 17.7-14.3 32-32 32L32 448c-17.7 0-32-14.3-32-32s14.3-32 32-32l384 0c17.7 0 32 14.3 32 32z"/>
        </svg>
    `.trim(),t.addEventListener("click",this._handleMenuToggle.bind(this)),this.componentElement.appendChild(i),e.appendChild(t),this.componentElement.appendChild(e)}_moveDeclarativeOptions(){let i=this.querySelectorAll("option");i.length>0&&(this._items=[]),i.forEach(e=>{let t={name:e.value,label:e.textContent.trim(),selected:e.hasAttribute("selected")||!1};this._items.push(t)}),Array.from(i).forEach(e=>e.remove())}_createAnchor(i,e,t){let o=this.getAttribute("path")||"/static/views/",n=document.createElement("a");return n.classList.add("menu-link"),t&&n.classList.add("active"),n.dataset.name=i,n.textContent=e,n.setAttribute("href",`${o}${i}.html`),n.setAttribute("hx-get",`${o}${i}.html`),n.setAttribute("hx-trigger","click"),n.setAttribute("hx-target","#viewport"),n.setAttribute("hx-swap","innerHTML transition:true"),n.setAttribute("hx-push-url",`${o}${i}.html`),n.setAttribute("hx-select","#page-contents"),n.addEventListener("click",this._handleClick.bind(this)),n}_setActiveLink(){let i=this._getCurrentRoute(),e=this.querySelectorAll(".wc-menu a");i?e.forEach(t=>{t.dataset.name===i?t.classList.add("active"):t.classList.remove("active")}):e.length>0&&(e.forEach(t=>t.classList.remove("active")),e[0].classList.add("active"))}_getCurrentRoute(){return window.location.pathname.split("/").pop().split(".").shift()}_handleHelper(i,e="click"){let{detail:t}=i,{selector:o,subSelector:n}=t,s=Array.isArray(o);typeof o=="string"||s?document.querySelectorAll(o).forEach(r=>{r===this&&e==="click"&&this.querySelector(n)?.click()}):o===this&&e==="click"&&this.querySelector(n)?.click()}_handleOnClick(i){this._handleHelper(i,"click")}_handleClick(i){let{target:e}=i;this.querySelectorAll(".wc-menu a:not(.icon)").forEach(o=>o.classList.remove("active")),e.classList.add("active")}_handleMenuToggle(i){let{target:e}=i;e.classList.toggle("open"),this.querySelector("wc-menu .wc-menu").classList.toggle("open")}_applyStyle(){let i=`
      wc-menu {
        display: contents;
      }
      wc-menu .wc-menu {
        position: relative;
        display: flex;
        flex-direction: row;
        justify-content: space-between;
        background-color: var(--card-bg-color);
        overflow: hidden;
      }
      wc-menu .wc-menu .menu-items {
        display: flex;
        flex-direction: row;
      }
      wc-menu .wc-menu a {
        color: var(--primary-color);
        text-align: center;
        padding: 14px 16px;
        text-decoration: none;
        font-size: 17px;
        opacity: 0.75;
        user-select: none;
      }
      wc-menu .wc-menu a:hover {
        background-color: var(--primary-bg-color);
        color: var(--primary-color);
        opacity: 1;
      }
      wc-menu .wc-menu a.active {
        background-color: var(--primary-bg-color);
        color: var(--primary-color);
        opacity: 1;
      }
      wc-menu .wc-menu a.icon {
        display: none;
      }
      @media (max-width: 600px) {
        wc-menu .wc-menu a:not(.active) {
          display: none;
        }
        wc-menu .wc-menu a.icon {
          display: block;
        }
      }
      @media (max-width: 600px) {
        wc-menu .wc-menu.open {
          position: relative;
        }
        wc-menu .wc-menu.open .menu-items {
          flex-direction: column;
          flex: 1 1 0%;
        }
        wc-menu .wc-menu.open a:active {
          background-color: var(--primary-bg-color);
          color: var(--primary-color);
          opacity: 1;
        }
        wc-menu .wc-menu.open .icon {
          background-color: var(--primary-bg-color);
          color: var(--primary-color);
          opacity: 1;
          position: absolute;
          right: 0;
          top: 0;
        }
        wc-menu .wc-menu.open a {
          float: none;
          display: block;
          text-align: left;
        }
      }
    `.trim();this.loadStyle("wc-menu-style",i)}_wireEvents(){super._wireEvents(),document.body.addEventListener("wc-menu:click",this._handleOnClick.bind(this))}_unWireEvents(){super._unWireEvents(),document.body.removeEventListener("wc-menu:click",this._handleOnClick.bind(this)),this.querySelectorAll(".menu-link").forEach(t=>t.removeEventListener("click",this._handleClick.bind(this))),this.querySelector(".menu-toggle").removeEventListener("click",this._handleMenuToggle.bind(this))}};customElements.define("wc-menu",Z);if(!customElements.get("wc-page-designer")){class d extends HTMLElement{static get observedAttributes(){return["theme","json-layout","json-layout-fetch-url","json-schema-fetch-url"]}theme="theme-royal dark";designerState={elements:[],selectedElement:null,schema:null,rules:[],editingRuleIndex:-1};designerSurface=null;containerElements=null;formElements=null;schemaFields=null;previewButton=null;renderedPreviewButton=null;preRenderedPreviewButton=null;previewFrame=null;generateJsonButton=null;jsonOutput=null;propId=null;propType=null;propLabel=null;propScope=null;propCss=null;propRequired=null;savePropertiesButton=null;noSelectionPanel=null;elementPropertiesPanel=null;schemaJson=null;loadSchemaButton=null;addRuleButton=null;rulesList=null;saveRuleButton=null;loadDesignButton=null;copyDesignButton=null;downloadDesignButton=null;constructor(){super(),this.loadCSS=k.bind(this),this.loadScript=S.bind(this),this.loadLibrary=A.bind(this),this.loadStyle=L.bind(this),this.elementCustomProperties={a:[{name:"id",label:"ID",type:"string",isReadonly:!0},{name:"type",label:"Type",type:"string",isReadonly:!0},{name:"label",label:"Label",type:"string",isLabel:!0},{name:"css",label:"CSS",type:"string"},{name:"href",label:"Href",type:"string",isSubLabel:!0},{name:"target",label:"Target",type:"string-enum",defaultValue:"_self",enum:["","_blank","_parent","_self","_top"]}],column:[{name:"id",label:"ID",type:"string",isReadonly:!0},{name:"type",label:"Type",type:"string",isReadonly:!0},{name:"css",label:"CSS",type:"string"}],"data-array":[{name:"id",label:"ID",type:"string",isReadonly:!0},{name:"type",label:"Type",type:"string",isReadonly:!0},{name:"has_add_new",label:"Has Add New?",type:"boolean"}],"data-item":[{name:"id",label:"ID",type:"string",isReadonly:!0},{name:"type",label:"Type",type:"string",isReadonly:!0}],div:[{name:"id",label:"ID",type:"string",isReadonly:!0},{name:"type",label:"Type",type:"string",isReadonly:!0},{name:"css",label:"CSS",type:"string"}],fieldset:[{name:"id",label:"ID",type:"string",isReadonly:!0},{name:"type",label:"Type",type:"string",isReadonly:!0},{name:"label",label:"Legend",type:"string",isLabel:!0},{name:"css",label:"CSS",type:"string"}],hr:[{name:"id",label:"ID",type:"string",isReadonly:!0},{name:"type",label:"Type",type:"string",isReadonly:!0},{name:"css",label:"CSS",type:"string"}],option:[{name:"id",label:"ID",type:"string",isReadonly:!0},{name:"type",label:"Type",type:"string",isReadonly:!0},{name:"css",label:"CSS",type:"string"},{name:"value",label:"Value",type:"string"},{name:"content",label:"Content",type:"multiline-string"},{name:"is_selected",label:"Is Selected?",type:"boolean"}],row:[{name:"id",label:"ID",type:"string",isReadonly:!0},{name:"type",label:"Type",type:"string",isReadonly:!0},{name:"css",label:"CSS",type:"string"}],"wc-accordion-option":[{name:"id",label:"ID",type:"string",isReadonly:!0},{name:"type",label:"Type",type:"string",isReadonly:!0},{name:"css",label:"CSS",type:"string"},{name:"value",label:"Value",type:"string",isLabel:!0},{name:"content",label:"Content",type:"multiline-string"},{name:"is_selected",label:"Is Selected?",type:"boolean"}],"wc-accordion":[{name:"id",label:"ID",type:"string",isReadonly:!0},{name:"type",label:"Type",type:"string",isReadonly:!0},{name:"css",label:"CSS",type:"string"},{name:"allow_many",label:"Allow Many?",type:"boolean"}],"wc-article-skeleton":[{name:"id",label:"ID",type:"string",isReadonly:!0},{name:"type",label:"Type",type:"string",isReadonly:!0}],"wc-breadcrumb":[{name:"id",label:"ID",type:"string",isReadonly:!0},{name:"type",label:"Type",type:"string",isReadonly:!0},{name:"title",label:"Title",type:"string",isLabel:!0}],"wc-breadcrumb-item":[{name:"id",label:"ID",type:"string",isReadonly:!0},{name:"type",label:"Type",type:"string",isReadonly:!0},{name:"label",label:"Legend",type:"string",isLabel:!0},{name:"link",label:"Link",type:"string"}],"wc-background-image":[{name:"id",label:"ID",type:"string",isReadonly:!0},{name:"type",label:"Type",type:"string",isReadonly:!0},{name:"caption",label:"Caption",type:"string",isLabel:!0},{name:"url",label:"URL",type:"string",isSubLabel:!0}],"wc-card-skeleton":[{name:"id",label:"ID",type:"string",isReadonly:!0},{name:"type",label:"Type",type:"string",isReadonly:!0}],"wc-code-mirror":[{name:"id",label:"ID",type:"string",isReadonly:!0},{name:"type",label:"Type",type:"string",isReadonly:!0},{name:"name",label:"Name",type:"string"},{name:"label",label:"Legend",type:"string",isLabel:!0},{name:"theme",label:"Theme",type:"string-enum",defaultValue:"",enum:["","3024-day","3024-night","abcdef","ambiance","ayu-dark","ayu-mirage","base16-dark","base16-light","bespin","blackboard","cobalt","colorforth","default","darcula","dracula","duotone-dark","duotone-light","eclipse","elegant","erlang-dark","gruvbox-dark","hopscotch","icecoder","idea","isotope","lesser-dark","liquibyte","lucario","material","material-darker","material-palenight","material-ocean","mbo","mdn-like","midnight","monokai","moxer","neat","neo","night","nord","oceanic-next","panda-syntax","paraiso-dark","paraiso-light","pastel-on-dark","railscasts","rubyblue","seti","shadowfox","solarized","ssms","the-matrix","tomorrow-night-bright","tomorrow-night-eighties","ttcn","twilight","vibrant-ink","xq-dark","xq-light","yeti","yonce","zenburn"]},{name:"mode",label:"Mode",type:"string-enum",isSubLabel:!0,defaultValue:"",enum:["","apl","asciiarmor","asn.1","asterisk","brainfuck","clike","clojure","cmake","cobol","coffeescript","commonlisp","crystal","css","cypher","d","dart","diff","django","dockerfile","dtd","dylan","ebnf","ecl","eiffel","elm","erlang","factor","fcl","forth","fortran","gas","gfm","gherkin","go","groovy","haml","handlebars","haskell","haxe","htmlembedded","htmlmixed","http","idl","javascript","jinja2","julia","kotlin","litespec","livescript","lua","markdown","mathematica","mbox","mirc","mllike","modelica","mscgen","mumps","nginx","nsis","ntriples","octave","oz","pascal","perl","php","pig","powershell","properties","protobuf","pug","puppet","python","q","r","rpm","rst","ruby","rust","sas","sass","scheme","shell","sieve","slim","smalltalk","smarty","solr","soy","sparql","spreadsheet","sql","stex","stylus","swift","tcl","textile","tiddlywiki","tiki","toml","tornado","troff","ttcn","ttcn-cfg","turtle","twig","vb","vbscript","velocity","verilog","vhdl","vue","xml","xquery","yaml","yaml-frontmatter","z80"]},{name:"height",label:"Height",type:"string"},{name:"has_line_numbers",label:"Has Line Numbers?",type:"boolean"},{name:"has_line_wrapping",label:"Has Line Wrapping?",type:"boolean"},{name:"has_fold_gutter",label:"Has Fold Gutter?",type:"boolean"},{name:"lbl_css",label:"Label Class",type:"string"},{name:"tab_size",label:"Tab Size",type:"number"},{name:"indent_unit",label:"Indent Unit",type:"number"},{name:"value",label:"Value",type:"multiline-string"},{name:"url",label:"Fetch URL",type:"string"},{name:"is_disabled",label:"Is Disabled?",type:"boolean"},{name:"script",label:"Hyperscript",type:"multiline-string"}],"wc-contact-card":[{name:"id",label:"ID",type:"string",isReadonly:!0},{name:"type",label:"Type",type:"string",isReadonly:!0},{name:"contact_name",label:"Name",type:"string",isLabel:!0},{name:"contact_title",label:"Title",type:"string",isSubLabel:!0},{name:"contact_gender",label:"Gender",type:"string-radio-modern",defaultValue:"",enum:["male","female"]}],"wc-contact-chip":[{name:"id",label:"ID",type:"string",isReadonly:!0},{name:"type",label:"Type",type:"string",isReadonly:!0},{name:"contact_name",label:"Name",type:"string",isLabel:!0},{name:"contact_gender",label:"Gender",type:"string-radio-modern",defaultValue:"",enum:["male","female"]}],"wc-form":[{name:"id",label:"ID",type:"string",isReadonly:!0},{name:"type",label:"Type",type:"string",isReadonly:!0},{name:"css",label:"CSS",type:"string"},{name:"method",label:"Method",type:"string-radio-modern",isLabel:!0,defaultValue:"",enum:["get","post"]},{name:"action",label:"Action",type:"string",isSubLabel:!0}],"wc-hotkey":[{name:"id",label:"ID",type:"string",isReadonly:!0},{name:"type",label:"Type",type:"string",isReadonly:!0},{name:"keys",label:"Keys",type:"string",isLabel:!0},{name:"target",label:"Target",type:"string"}],"wc-image":[{name:"id",label:"ID",type:"string",isReadonly:!0},{name:"type",label:"Type",type:"string",isReadonly:!0},{name:"url",label:"URL",type:"string"},{name:"caption",label:"Caption",type:"string"},{name:"hover_overlay",label:"Hover Overlay?",type:"boolean"},{name:"hover_mode",label:"Hover Mode",type:"string-radio-modern",defaultValue:"",enum:["left","top","right","bottom"]},{name:"modal",label:"Modal?",type:"boolean"},{name:"overlay_content",label:"Overlay Content",type:"multiline-string"}],"wc-input":[{name:"id",label:"ID",type:"string",isReadonly:!0},{name:"type",label:"Type",type:"string",isReadonly:!0},{name:"label",label:"Label",type:"string",isLabel:!0},{name:"css",label:"CSS",type:"string"},{name:"scope",label:"Scope",type:"string",isSubLabel:!0},{name:"minlength",label:"Min Length",type:"string"},{name:"maxlength",label:"Max Length",type:"string"},{name:"placeholder",label:"Placeholder",type:"string"},{name:"is_readonly",label:"Is Readonly?",type:"boolean"},{name:"is_disabled",label:"Is Disabled?",type:"boolean"},{name:"is_required",label:"Is Required?",type:"boolean"}],"wc-input-checkbox":[{name:"id",label:"ID",type:"string",isReadonly:!0},{name:"type",label:"Type",type:"string",isReadonly:!0},{name:"label",label:"Label",type:"string",isLabel:!0},{name:"css",label:"CSS",type:"string"},{name:"scope",label:"Scope",type:"string",isSubLabel:!0},{name:"is_toggle",label:"Is Toggle?",type:"boolean"},{name:"is_readonly",label:"Is Readonly?",type:"boolean"},{name:"is_disabled",label:"Is Disabled?",type:"boolean"},{name:"is_required",label:"Is Required?",type:"boolean"}],"wc-input-currency":[{name:"id",label:"ID",type:"string",isReadonly:!0},{name:"type",label:"Type",type:"string",isReadonly:!0},{name:"label",label:"Label",type:"string",isLabel:!0},{name:"css",label:"CSS",type:"string"},{name:"scope",label:"Scope",type:"string",isSubLabel:!0},{name:"min",label:"Min",type:"string"},{name:"max",label:"Max",type:"string"},{name:"step",label:"Step",type:"string"},{name:"is_readonly",label:"Is Readonly?",type:"boolean"},{name:"is_disabled",label:"Is Disabled?",type:"boolean"},{name:"is_required",label:"Is Required?",type:"boolean"}],"wc-input-date":[{name:"id",label:"ID",type:"string",isReadonly:!0},{name:"type",label:"Type",type:"string",isReadonly:!0},{name:"label",label:"Label",type:"string",isLabel:!0},{name:"css",label:"CSS",type:"string"},{name:"scope",label:"Scope",type:"string",isSubLabel:!0},{name:"min",label:"Min",type:"string"},{name:"max",label:"Max",type:"string"},{name:"is_readonly",label:"Is Readonly?",type:"boolean"},{name:"is_disabled",label:"Is Disabled?",type:"boolean"},{name:"is_required",label:"Is Required?",type:"boolean"}],"wc-input-email":[{name:"id",label:"ID",type:"string",isReadonly:!0},{name:"type",label:"Type",type:"string",isReadonly:!0},{name:"label",label:"Label",type:"string",isLabel:!0},{name:"css",label:"CSS",type:"string"},{name:"scope",label:"Scope",type:"string",isSubLabel:!0},{name:"minlength",label:"Min Length",type:"string"},{name:"maxlength",label:"Max Length",type:"string"},{name:"placeholder",label:"Placeholder",type:"string"},{name:"is_readonly",label:"Is Readonly?",type:"boolean"},{name:"is_disabled",label:"Is Disabled?",type:"boolean"},{name:"is_required",label:"Is Required?",type:"boolean"}],"wc-input-month":[{name:"id",label:"ID",type:"string",isReadonly:!0},{name:"type",label:"Type",type:"string",isReadonly:!0},{name:"label",label:"Label",type:"string",isLabel:!0},{name:"css",label:"CSS",type:"string"},{name:"scope",label:"Scope",type:"string",isSubLabel:!0},{name:"min",label:"Min",type:"string"},{name:"max",label:"Max",type:"string"},{name:"is_readonly",label:"Is Readonly?",type:"boolean"},{name:"is_disabled",label:"Is Disabled?",type:"boolean"},{name:"is_required",label:"Is Required?",type:"boolean"}],"wc-input-number":[{name:"id",label:"ID",type:"string",isReadonly:!0},{name:"type",label:"Type",type:"string",isReadonly:!0},{name:"label",label:"Label",type:"string",isLabel:!0},{name:"css",label:"CSS",type:"string"},{name:"scope",label:"Scope",type:"string",isSubLabel:!0},{name:"min",label:"Min",type:"string"},{name:"max",label:"Max",type:"string"},{name:"step",label:"Step",type:"string"},{name:"is_readonly",label:"Is Readonly?",type:"boolean"},{name:"is_disabled",label:"Is Disabled?",type:"boolean"},{name:"is_required",label:"Is Required?",type:"boolean"}],"wc-input-range":[{name:"id",label:"ID",type:"string",isReadonly:!0},{name:"type",label:"Type",type:"string",isReadonly:!0},{name:"label",label:"Label",type:"string",isLabel:!0},{name:"css",label:"CSS",type:"string"},{name:"scope",label:"Scope",type:"string",isSubLabel:!0},{name:"min",label:"Min",type:"string"},{name:"max",label:"Max",type:"string"},{name:"step",label:"Step",type:"string"},{name:"is_readonly",label:"Is Readonly?",type:"boolean"},{name:"is_disabled",label:"Is Disabled?",type:"boolean"},{name:"is_required",label:"Is Required?",type:"boolean"}],"wc-input-tel":[{name:"id",label:"ID",type:"string",isReadonly:!0},{name:"type",label:"Type",type:"string",isReadonly:!0},{name:"label",label:"Label",type:"string",isLabel:!0},{name:"css",label:"CSS",type:"string"},{name:"scope",label:"Scope",type:"string",isSubLabel:!0},{name:"minlength",label:"Min Length",type:"string"},{name:"maxlength",label:"Max Length",type:"string"},{name:"placeholder",label:"Placeholder",type:"string"},{name:"is_readonly",label:"Is Readonly?",type:"boolean"},{name:"is_disabled",label:"Is Disabled?",type:"boolean"},{name:"is_required",label:"Is Required?",type:"boolean"}],"wc-input-time":[{name:"id",label:"ID",type:"string",isReadonly:!0},{name:"type",label:"Type",type:"string",isReadonly:!0},{name:"label",label:"Label",type:"string",isLabel:!0},{name:"css",label:"CSS",type:"string"},{name:"scope",label:"Scope",type:"string",isSubLabel:!0},{name:"min",label:"Min",type:"string"},{name:"max",label:"Max",type:"string"},{name:"is_readonly",label:"Is Readonly?",type:"boolean"},{name:"is_disabled",label:"Is Disabled?",type:"boolean"},{name:"is_required",label:"Is Required?",type:"boolean"}],"wc-input-week":[{name:"id",label:"ID",type:"string",isReadonly:!0},{name:"type",label:"Type",type:"string",isReadonly:!0},{name:"label",label:"Label",type:"string",isLabel:!0},{name:"css",label:"CSS",type:"string"},{name:"scope",label:"Scope",type:"string",isSubLabel:!0},{name:"min",label:"Min",type:"string"},{name:"max",label:"Max",type:"string"},{name:"is_readonly",label:"Is Readonly?",type:"boolean"},{name:"is_disabled",label:"Is Disabled?",type:"boolean"},{name:"is_required",label:"Is Required?",type:"boolean"}],"wc-input-radio-collection":[{name:"id",label:"ID",type:"string",isReadonly:!0},{name:"type",label:"Type",type:"string",isReadonly:!0},{name:"label",label:"Label",type:"string",isLabel:!0},{name:"css",label:"CSS",type:"string"},{name:"scope",label:"Scope",type:"string",isSubLabel:!0},{name:"collName",label:"Collection Name",type:"string"},{name:"collCSS",label:"Collection CSS",type:"string"},{name:"collDisplayMember",label:"Display Member",type:"string"},{name:"collValueMember",label:"Value Member",type:"string"},{name:"group_class",label:"Radio Group Class",type:"string"},{name:"is_readonly",label:"Is Readonly?",type:"boolean"},{name:"is_disabled",label:"Is Disabled?",type:"boolean"},{name:"is_required",label:"Is Required?",type:"boolean"}],"wc-input-radio-lookup":[{name:"id",label:"ID",type:"string",isReadonly:!0},{name:"type",label:"Type",type:"string",isReadonly:!0},{name:"label",label:"Label",type:"string",isLabel:!0},{name:"css",label:"CSS",type:"string"},{name:"scope",label:"Scope",type:"string",isSubLabel:!0},{name:"lookupName",label:"Lookup Name",type:"string"},{name:"lookupCSS",label:"Lookup CSS",type:"string"},{name:"group_class",label:"Radio Group Class",type:"string"},{name:"is_readonly",label:"Is Readonly?",type:"boolean"},{name:"is_disabled",label:"Is Disabled?",type:"boolean"},{name:"is_required",label:"Is Required?",type:"boolean"}],"wc-input-radio":[{name:"id",label:"ID",type:"string",isReadonly:!0},{name:"type",label:"Type",type:"string",isReadonly:!0},{name:"label",label:"Label",type:"string",isLabel:!0},{name:"css",label:"CSS",type:"string"},{name:"scope",label:"Scope",type:"string",isSubLabel:!0},{name:"group_class",label:"Radio Group Class",type:"string"},{name:"is_readonly",label:"Is Readonly?",type:"boolean"},{name:"is_disabled",label:"Is Disabled?",type:"boolean"},{name:"is_required",label:"Is Required?",type:"boolean"}],"wc-javascript":[{name:"id",label:"ID",type:"string",isReadonly:!0},{name:"type",label:"Type",type:"string",isReadonly:!0},{name:"content",label:"Content",type:"multiline-string"},{name:"has_defer",label:"Defer?",type:"boolean"}],"wc-list-skeleton":[{name:"id",label:"ID",type:"string",isReadonly:!0},{name:"type",label:"Type",type:"string",isReadonly:!0}],"wc-loader":[{name:"id",label:"ID",type:"string",isReadonly:!0},{name:"type",label:"Type",type:"string",isReadonly:!0},{name:"size",label:"Size",type:"string"},{name:"speed",label:"Speed",type:"string"},{name:"thickness",label:"Thickness",type:"string"}],"wc-option":[{name:"id",label:"ID",type:"string",isReadonly:!0},{name:"type",label:"Type",type:"string",isReadonly:!0},{name:"label",label:"Label",type:"string",isLabel:!0},{name:"css",label:"CSS",type:"string"},{name:"value",label:"Value",type:"string"},{name:"is_selected",label:"Is Selected?",type:"boolean"}],"wc-save-button":[{name:"id",label:"ID",type:"string",isReadonly:!0},{name:"type",label:"Type",type:"string",isReadonly:!0},{name:"label",label:"Label",type:"string",isLabel:!0},{name:"saveUrl",label:"Save URL",type:"string"}],"wc-save-split-button":[{name:"id",label:"ID",type:"string",isReadonly:!0},{name:"type",label:"Type",type:"string",isReadonly:!0},{name:"positionArea",label:"Position Area",type:"string-enum",defaultValue:"",enum:["none","top","bottom","left","right","start","end","self-start","self-end","center","top left","top center","top right","top start","top end","top self-start","top self-end","center left","center center","center right","center start","center end","center self-start","center self-end","bottom left","bottom center","bottom right","bottom start","bottom end","bottom self-start","bottom self-end","start left","start center","start right","start start","start end","start self-start","start self-end","end left","end center","end right","end start","end end","end self-start","end self-end","self-start left","self-start center","self-start right","self-start start","self-start end","self-start self-start","self-start self-end","self-end left","self-end center","self-end right","self-end start","self-end end","self-end self-start","self-end self-end","left top","left center","left bottom","left start","left end","left self-start","left self-end","right top","right center","right bottom","right start","right end","right self-start","right self-end"]},{name:"saveUrl",label:"Save URL",type:"string"},{name:"saveNewUrl",label:"Save New URL",type:"string"},{name:"saveReturnUrl",label:"Save Return URL",type:"string"}],"wc-script":[{name:"id",label:"ID",type:"string",isReadonly:!0},{name:"type",label:"Type",type:"string",isReadonly:!0},{name:"src",label:"Src",type:"string"}],"wc-select-multiple-collection":[{name:"id",label:"ID",type:"string",isReadonly:!0},{name:"type",label:"Type",type:"string",isReadonly:!0},{name:"label",label:"Label",type:"string",isLabel:!0},{name:"css",label:"CSS",type:"string"},{name:"scope",label:"Scope",type:"string",isSubLabel:!0},{name:"mode",label:"Mode",type:"string-enum",defaultValue:"",enum:["","chip","multiple"]},{name:"collName",label:"Collection Name",type:"string"},{name:"collCSS",label:"Collection CSS",type:"string"},{name:"collDisplayMember",label:"Display Member",type:"string"},{name:"collValueMember",label:"Value Member",type:"string"},{name:"is_readonly",label:"Is Readonly?",type:"boolean"},{name:"is_disabled",label:"Is Disabled?",type:"boolean"},{name:"is_required",label:"Is Required?",type:"boolean"},{name:"allow_dynamic",label:"Allow Dynamic?",type:"boolean"}],"wc-select-multiple-lookup":[{name:"id",label:"ID",type:"string",isReadonly:!0},{name:"type",label:"Type",type:"string",isReadonly:!0},{name:"label",label:"Label",type:"string",isLabel:!0},{name:"css",label:"CSS",type:"string"},{name:"scope",label:"Scope",type:"string",isSubLabel:!0},{name:"mode",label:"Mode",type:"string-enum",defaultValue:"",enum:["","chip","multiple"]},{name:"lookupName",label:"Lookup Name",type:"string"},{name:"lookupCSS",label:"Lookup CSS",type:"string"},{name:"is_readonly",label:"Is Readonly?",type:"boolean"},{name:"is_disabled",label:"Is Disabled?",type:"boolean"},{name:"is_required",label:"Is Required?",type:"boolean"},{name:"allow_dynamic",label:"Allow Dynamic?",type:"boolean"}],"wc-select-multiple":[{name:"id",label:"ID",type:"string",isReadonly:!0},{name:"type",label:"Type",type:"string",isReadonly:!0},{name:"label",label:"Label",type:"string",isLabel:!0},{name:"css",label:"CSS",type:"string"},{name:"scope",label:"Scope",type:"string",isSubLabel:!0},{name:"mode",label:"Mode",type:"string-enum",defaultValue:"",enum:["","chip","multiple"]},{name:"is_readonly",label:"Is Readonly?",type:"boolean"},{name:"is_disabled",label:"Is Disabled?",type:"boolean"},{name:"is_required",label:"Is Required?",type:"boolean"},{name:"allow_dynamic",label:"Allow Dynamic?",type:"boolean"}],"wc-select-collection":[{name:"id",label:"ID",type:"string",isReadonly:!0},{name:"type",label:"Type",type:"string",isReadonly:!0},{name:"label",label:"Label",type:"string",isLabel:!0},{name:"css",label:"CSS",type:"string"},{name:"scope",label:"Scope",type:"string",isSubLabel:!0},{name:"collName",label:"Collection Name",type:"string"},{name:"collCSS",label:"Collection CSS",type:"string"},{name:"collDisplayMember",label:"Display Member",type:"string"},{name:"collValueMember",label:"Value Member",type:"string"},{name:"is_readonly",label:"Is Readonly?",type:"boolean"},{name:"is_disabled",label:"Is Disabled?",type:"boolean"},{name:"is_required",label:"Is Required?",type:"boolean"}],"wc-select-lookup":[{name:"id",label:"ID",type:"string",isReadonly:!0},{name:"type",label:"Type",type:"string",isReadonly:!0},{name:"label",label:"Label",type:"string",isLabel:!0},{name:"css",label:"CSS",type:"string"},{name:"scope",label:"Scope",type:"string",isSubLabel:!0},{name:"lookupName",label:"Lookup Name",type:"string"},{name:"lookupCSS",label:"Lookup CSS",type:"string"},{name:"is_readonly",label:"Is Readonly?",type:"boolean"},{name:"is_disabled",label:"Is Disabled?",type:"boolean"},{name:"is_required",label:"Is Required?",type:"boolean"}],"wc-select":[{name:"id",label:"ID",type:"string",isReadonly:!0},{name:"type",label:"Type",type:"string",isReadonly:!0},{name:"label",label:"Label",type:"string",isLabel:!0},{name:"css",label:"CSS",type:"string"},{name:"scope",label:"Scope",type:"string",isSubLabel:!0},{name:"is_readonly",label:"Is Readonly?",type:"boolean"},{name:"is_disabled",label:"Is Disabled?",type:"boolean"},{name:"is_required",label:"Is Required?",type:"boolean"}],"wc-sidebar":[{name:"id",label:"ID",type:"string",isReadonly:!0},{name:"type",label:"Type",type:"string",isReadonly:!0},{name:"label",label:"Label",type:"string",isLabel:!0},{name:"css",label:"CSS",type:"string"},{name:"width",label:"Width",type:"string"},{name:"background_color",label:"Background Color",type:"string"},{name:"push_target",label:"Push Target",type:"string"},{name:"is_auto_height",label:"Is Auto Height?",type:"boolean"},{name:"is_right_side",label:"Is Right Side?",type:"boolean"}],"wc-sidenav":[{name:"id",label:"ID",type:"string",isReadonly:!0},{name:"type",label:"Type",type:"string",isReadonly:!0},{name:"label",label:"Label",type:"string",isLabel:!0},{name:"css",label:"CSS",type:"string"},{name:"width",label:"Width",type:"string"},{name:"open_top",label:"Open Top",type:"string"},{name:"open_btn_css",label:"Open Button CSS",type:"string"},{name:"close_btn_css",label:"Close Button CSS",type:"string"},{name:"background_color",label:"Background Color",type:"string"},{name:"is_push",label:"Is Push?",type:"boolean"},{name:"push_target",label:"Push Target",type:"string"},{name:"is_open",label:"Is Open?",type:"boolean"},{name:"is_auto_height",label:"Is Auto Height?",type:"boolean"},{name:"has_open_vertical_text",label:"Has Open Vertical Text?",type:"boolean"},{name:"is_right_side",label:"Is Right Side?",type:"boolean"},{name:"is_overlay",label:"Is Overlay?",type:"boolean"}],"wc-slideshow":[{name:"id",label:"ID",type:"string",isReadonly:!0},{name:"type",label:"Type",type:"string",isReadonly:!0},{name:"css",label:"CSS",type:"string"},{name:"autoplay",label:"Autoplay?",type:"boolean"},{name:"autoplay_interval",label:"Autoplay Interval",type:"number"},{name:"max_image_height",label:"Max Image Height",type:"string"}],"wc-slideshow-image":[{name:"id",label:"ID",type:"string",isReadonly:!0},{name:"type",label:"Type",type:"string",isReadonly:!0},{name:"url",label:"URL",type:"string"},{name:"caption",label:"Caption",type:"string"},{name:"numbertext",label:"Number Text",type:"string"}],"wc-split-button":[{name:"id",label:"ID",type:"string",isReadonly:!0},{name:"type",label:"Type",type:"string",isReadonly:!0},{name:"label",label:"Label",type:"string",isLabel:!0},{name:"css",label:"CSS",type:"string"},{name:"positionArea",label:"Position Area",type:"string-enum",defaultValue:"",enum:["none","top","bottom","left","right","start","end","self-start","self-end","center","top left","top center","top right","top start","top end","top self-start","top self-end","center left","center center","center right","center start","center end","center self-start","center self-end","bottom left","bottom center","bottom right","bottom start","bottom end","bottom self-start","bottom self-end","start left","start center","start right","start start","start end","start self-start","start self-end","end left","end center","end right","end start","end end","end self-start","end self-end","self-start left","self-start center","self-start right","self-start start","self-start end","self-start self-start","self-start self-end","self-end left","self-end center","self-end right","self-end start","self-end end","self-end self-start","self-end self-end","left top","left center","left bottom","left start","left end","left self-start","left self-end","right top","right center","right bottom","right start","right end","right self-start","right self-end"]}],"wc-tab":[{name:"id",label:"ID",type:"string",isReadonly:!0},{name:"type",label:"Type",type:"string",isReadonly:!0},{name:"css",label:"CSS",type:"string"}],"wc-tab-item":[{name:"id",label:"ID",type:"string",isReadonly:!0},{name:"type",label:"Type",type:"string",isReadonly:!0},{name:"label",label:"Label",type:"string",isLabel:!0},{name:"css",label:"CSS",type:"string"}],"wc-table-skeleton":[{name:"id",label:"ID",type:"string",isReadonly:!0},{name:"type",label:"Type",type:"string",isReadonly:!0}],"wc-tabulator":[{name:"id",label:"ID",type:"string",isReadonly:!0},{name:"type",label:"Type",type:"string",isReadonly:!0},{name:"css",label:"CSS",type:"string"},{name:"ajax_url",label:"AJAX URL",type:"string"},{name:"ajax_params",label:"AJAX Params",type:"multiline-string"},{name:"ajax_params_map",label:"AJAX Params Map",type:"multiline-string"},{name:"filter_mode",label:"Filter Mode",type:"string-enum",defaultValue:"",enum:["","remote"]},{name:"initial_filter",label:"Initial Filter",type:"multiline-string"},{name:"sort_mode",label:"Sort Mode",type:"string-enum",defaultValue:"",enum:["","remote"]},{name:"initial_sort",label:"Initial Sort",type:"multiline-string"},{name:"data_placeholder",label:"Placeholder",type:"string"},{name:"row_context_menu",label:"Row Context Menu",type:"string"},{name:"row_header",label:"Row Header",type:"multiline-string"},{name:"row_height",label:"Row Height",type:"number"},{name:"row_formatter",label:"Row Formatter",type:"multiline-string"},{name:"row_click",label:"Row Click",type:"multiline-string"},{name:"row_selected",label:"Row Selected",type:"multiline-string"},{name:"row_deselected",label:"Row Deselected",type:"multiline-string"},{name:"frozen_rows",label:"Frozen Rows",type:"number"},{name:"pagination",label:"Pagination?",type:"boolean"},{name:"pagination_size",label:"Pagination Size",type:"number"},{name:"pagination_counter",label:"Pagination Counter",type:"string"},{name:"header_visible",label:"Header Visible?",type:"boolean"},{name:"movable_columns",label:"Movable Columns?",type:"boolean"},{name:"resizable_columns",label:"Resizable Columns?",type:"boolean"},{name:"resizable_column_guide",label:"Resizable Column Guide?",type:"boolean"},{name:"movable_rows",label:"Movable Rows?",type:"boolean"},{name:"resizable_rows",label:"Resizable Rows?",type:"boolean"},{name:"resizable_row_guide",label:"Resizable Row Guide?",type:"boolean"},{name:"selectable_rows",label:"Selectable Rows",type:"string"},{name:"persistence",label:"Persistence?",type:"boolean"},{name:"layout",label:"Layout",type:"string-enum",defaultValue:"",enum:["","fitData","fitDataFill","fitDataStretch","fitDataTable","fitColumns"]},{name:"col_field_formatter",label:"Col Field Formatter",type:"multiline-string"},{name:"group_by",label:"Group By",type:"string"},{name:"responsive_layout",label:"Responsive Layout",type:"string"},{name:"record_size",label:"Record Size",type:"number"}],"wc-tabulator-column":[{name:"id",label:"ID",type:"string",isReadonly:!0},{name:"type",label:"Type",type:"string",isReadonly:!0},{name:"css",label:"CSS",type:"string"},{name:"field",label:"Field",type:"string"},{name:"title",label:"Title",type:"string"},{name:"title_formatter",label:"Title Formatter",type:"string-datalist",defaultValue:"",enum:["plaintext","textarea","html","money","image","link","datetime","datetimediff","tickCross","color","star","traffic","progress","array","lookup","json","toggle","buttonTick","buttonCross","adaptable","rownum","handle","rowSelection","responsiveCollapse","pageRowNum","urlFormatter","linkFormatter","localdatetime","linklocaldatetime"]},{name:"header_filter",label:"Header Filter",type:"string",defaultValue:""},{name:"header_filter_params",label:"Header Filter Params",type:"multiline-string"},{name:"header_filter_placeholder",label:"Header Filter Placeholder",type:"string"},{name:"header_filter_func",label:"Header Filter Func",type:"string-datalist",defaultValue:"",enum:["=","!=","like","keywords","starts","ends","<","<=",">",">=","in","regex"]},{name:"header_hoz_align",label:"Header Horizontal Alignment",type:"string-radio-modern",defaultValue:"",enum:["left","center","right"]},{name:"header_menu",label:"Header Menu",type:"string"},{name:"header_sort",label:"Header Sort?",type:"boolean"},{name:"header_sort_starting_dir",label:"Header Sort Starting Dir",type:"string"},{name:"header_sort_tristate",label:"Header Sort Tristate?",type:"boolean"},{name:"formatter",label:"Formatter",type:"string-datalist",defaultValue:"",enum:["plaintext","textarea","html","money","image","link","datetime","datetimediff","tickCross","color","star","traffic","progress","array","lookup","json","toggle","buttonTick","buttonCross","adaptable","rownum","handle","rowSelection","responsiveCollapse","pageRowNum","urlFormatter","linkFormatter","localdatetime","linklocaldatetime"]},{name:"formatter_params",label:"Formatter Params",type:"multiline-string"},{name:"visible",label:"Visible?",type:"boolean"},{name:"resizable",label:"Resizable?",type:"boolean"},{name:"editable",label:"Editable?",type:"boolean"},{name:"frozen",label:"Frozen?",type:"boolean"},{name:"responsive",label:"Responsive?",type:"boolean"},{name:"tooltip",label:"Tooltip",type:"string"},{name:"row_handle",label:"Row Handle?",type:"boolean"},{name:"html_output",label:"HTML Output",type:"multiline-string"},{name:"print",label:"Print?",type:"boolean"},{name:"clipboard",label:"Clipboard?",type:"boolean"},{name:"width",label:"Width",type:"string"},{name:"width_grow",label:"Width Grow",type:"number"},{name:"width_shrink",label:"Width Shrink",type:"number"},{name:"min_width",label:"Min Width",type:"string"},{name:"max_width",label:"Max Width",type:"string"},{name:"max_initial_width",label:"Max Initial Width",type:"string"},{name:"top_calc",label:"Top Calc",type:"string"},{name:"top_calc_params",label:"Top Calc Params",type:"multiline-string"},{name:"bottom_calc",label:"Bottom Calc",type:"string"},{name:"bottom_cal_params",label:"Bottom Calc Params",type:"multiline-string"},{name:"editor",label:"Editor",type:"string-enum",defaultValue:"",enum:["","input","textarea","number","range","tickCross","star","progress","date","time","datetime","list"]},{name:"editor_params",label:"Editor Params",type:"multiline-string"},{name:"sorter",label:"Sorter",type:"string"},{name:"sorter_params",label:"Sorter Params",type:"multiline-string"},{name:"hoz_align",label:"Horizontal Alignment",type:"string-radio-modern",defaultValue:"",enum:["left","center","right"]},{name:"vert_align",label:"Vertical Alignment",type:"string-radio-modern",defaultValue:"",enum:["top","middle","bottom"]},{name:"cell_click",label:"Cell Click",type:"multiline-string"}],"wc-tabulator-func":[{name:"id",label:"ID",type:"string",isReadonly:!0},{name:"type",label:"Type",type:"string",isReadonly:!0},{name:"name",label:"Name",type:"string"},{name:"value",label:"Value",type:"multiline-string"}],"wc-tabulator-row-menu":[{name:"id",label:"ID",type:"string",isReadonly:!0},{name:"type",label:"Type",type:"string",isReadonly:!0},{name:"label",label:"Label",type:"string",isLabel:!0},{name:"order",label:"Order",type:"number"},{name:"icon",label:"Icon",type:"string"},{name:"value",label:"Value",type:"multiline-string"}],"wc-textarea":[{name:"id",label:"ID",type:"string",isReadonly:!0},{name:"type",label:"Type",type:"string",isReadonly:!0},{name:"label",label:"Label",type:"string",isLabel:!0},{name:"css",label:"CSS",type:"string"},{name:"scope",label:"Scope",type:"string",isSubLabel:!0},{name:"placeholder",label:"Placeholder",type:"string"},{name:"rows",label:"Rows",type:"number"},{name:"is_readonly",label:"Is Readonly?",type:"boolean"},{name:"is_disabled",label:"Is Disabled?",type:"boolean"},{name:"is_required",label:"Is Required?",type:"boolean"}],"wc-theme-selector":[{name:"id",label:"ID",type:"string",isReadonly:!0},{name:"type",label:"Type",type:"string",isReadonly:!0},{name:"theme",label:"Theme",type:"string-datalist",defaultValue:"",enum:["theme-rose","theme-petal","theme-sunset","theme-peach","theme-fire","theme-desert","theme-golden","theme-honey","theme-amber","theme-olive","theme-moss","theme-avocado","theme-lime","theme-fern","theme-yellow","theme-meadow","theme-cornsilk","theme-sage","theme-forest","theme-jungle","theme-emerald","theme-mint","theme-turquoise","theme-aqua","theme-lagoon","theme-ice","theme-ocean","theme-azure","theme-sky","theme-midsky","theme-deepsky","theme-royal","theme-twilight","theme-lavender","theme-violet","theme-grape","theme-plum","theme-fuchsia","theme-cottoncandy","theme-blush","theme-bubblegum"]},{name:"mode",label:"Mode",type:"string-radio-modern",defaultValue:"",enum:["light","dark"]}],"wc-timeline":[{name:"id",label:"ID",type:"string",isReadonly:!0},{name:"type",label:"Type",type:"string",isReadonly:!0},{name:"css",label:"CSS",type:"string"}],"wc-timeline-option":[{name:"id",label:"ID",type:"string",isReadonly:!0},{name:"type",label:"Type",type:"string",isReadonly:!0},{name:"css",label:"CSS",type:"string"},{name:"value",label:"Value",type:"string"},{name:"content",label:"Content",type:"multiline-string"}]},this.floatingToolbar=null,this.currentHoveredElement=null,this.toolbarVisible=!1;let e=this.querySelector(".wc-page-designer");e?this.componentElement=e:this.createElement()}async connectedCallback(){await this.render(),this._applyStyle(),this.wireEvents(),setTimeout(()=>{this.setup()},250)}disconnectedCallback(){this.unWireEvents()}attributeChangedCallback(e,t,o){if(e==="theme"){let n=this.theme;this.theme=o;let s=this.querySelector(".wc-page-designer");s.className=s.className.replace(n,o)}else e==="json-layout"?this.jsonLayout=o:e==="json-layout-fetch-url"?(this.jsonLayoutFetchUrl=o,this.querySelector('wc-code-mirror[name="jsonLayout"]').setAttribute("fetch",this.jsonLayoutFetchUrl)):e==="json-schema-fetch-url"&&(this.jsonSchemaFetchUrl=o,this.querySelector('wc-code-mirror[name="jsonSchema"]').setAttribute("fetch",this.jsonSchemaFetchUrl))}async render(){await Promise.all([this.loadLibrary("https://cdn.jsdelivr.net/npm/sortablejs@latest/Sortable.min.js","Sortable"),this.loadLibrary("https://cdnjs.cloudflare.com/ajax/libs/uuid/8.3.2/uuid.min.js","uuid")]),wc.EventHub.broadcast("wc-page-designer:ready","","")}createElement(){let e=`
  <div class="wc-page-designer ${this.theme} flex flex-row flex-1 min-h-0 h-screen">
    <!-- Left Panel - Elements -->
    <div class="left-panel flex flex-col min-h-0 overflow-scroll p-2">
      <wc-tab class="flex flex-col flex-1 min-h-0" animate>
        <wc-tab-item class="active" label="Containers">
          <input class="sticky mx-2 mt-2 mb-2" type="search" id="element_filter" placeholder="Containers..."
            oninput="
            const query = this.value.trim().toLowerCase();
            const elements = this.parentElement.querySelectorAll('.element-list .element-item');
            elements.forEach(el => {
              const text = el.textContent.trim().toLowerCase();
              if (query === '' || text.startsWith(query)) {
                el.classList.remove('hidden');
              } else {
                el.classList.add('hidden');
              }
            });
          ">
          <div class="element-list p-2 flex flex-col min-h-0 overflow-scroll" id="container-elements">
            <div class="element-item" data-element-type="div" draggable="true">Div</div>
            <div class="element-item" data-element-type="column" draggable="true">Column</div>
            <div class="element-item" data-element-type="row" draggable="true">Row</div>
            <div class="element-item" data-element-type="data-array" draggable="true">Data Array</div>
            <div class="element-item" data-element-type="data-item" draggable="true">Data Item</div>
            <div class="element-item" data-element-type="fieldset" draggable="true">Fieldset</div>
            <div class="element-item" data-element-type="wc-accordion" draggable="true">WC Accordion</div>
            <div class="element-item" data-element-type="wc-breadcrumb" draggable="true">WC Breadcrumb</div>
            <div class="element-item" data-element-type="wc-form" draggable="true">WC Form</div>
            <div class="element-item" data-element-type="wc-input-radio" draggable="true">WC Input Radio</div>
            <div class="element-item" data-element-type="wc-select-multiple" draggable="true">WC Select Multiple</div>
            <div class="element-item" data-element-type="wc-select" draggable="true">WC Select</div>
            <div class="element-item" data-element-type="wc-sidebar" draggable="true">WC Sidebar</div>
            <div class="element-item" data-element-type="wc-sidenav" draggable="true">WC Sidenav</div>
            <div class="element-item" data-element-type="wc-slideshow" draggable="true">WC Slideshow</div>
            <div class="element-item" data-element-type="wc-split-button" draggable="true">WC Split Button</div>
            <div class="element-item" data-element-type="wc-tab" draggable="true">WC Tab Container</div>
            <div class="element-item" data-element-type="wc-tab-item" draggable="true">WC Tab Item</div>
            <div class="element-item" data-element-type="wc-tabulator" draggable="true">WC Tabulator</div>
            <div class="element-item" data-element-type="wc-timeline" draggable="true">WC Timeline</div>
          </div>
        </wc-tab-item>
        <wc-tab-item class="" label="Elements">
          <input class="sticky mx-2 mt-2 mb-2" type="search" id="element_filter" placeholder="Elements..."
            oninput="
            const query = this.value.trim().toLowerCase();
            const elements = this.parentElement.querySelectorAll('.element-list .element-item');
            elements.forEach(el => {
              const text = el.textContent.trim().toLowerCase();
              if (query === '' || text.startsWith(query)) {
                el.classList.remove('hidden');
              } else {
                el.classList.add('hidden');
              }
            });
          ">
          <div class="element-list p-2 flex flex-col min-h-0 overflow-scroll" id="form-elements">
            <div class="element-item" data-element-type="a" draggable="true">Anchor</div>
            <div class="element-item" data-element-type="hr" draggable="true">Horizontal Line</div>
            <div class="element-item" data-element-type="wc-article-skeleton" draggable="true">WC Article Skeleton</div>
            <div class="element-item" data-element-type="wc-card-skeleton" draggable="true">WC Card Skeleton</div>
            <div class="element-item" data-element-type="wc-list-skeleton" draggable="true">WC List Skeleton</div>
            <div class="element-item" data-element-type="wc-table-skeleton" draggable="true">WC Table Skeleton</div>
            <div class="element-item" data-element-type="wc-accordion-option" draggable="true">WC Accordion Option</div>
            <div class="element-item" data-element-type="wc-background-image" draggable="true">WC Backgruond Image</div>
            <div class="element-item" data-element-type="wc-breadcrumb-item" draggable="true">WC Breadcrumb Item</div>
            <div class="element-item" data-element-type="wc-code-mirror" draggable="true">WC Code Mirror</div>
            <div class="element-item" data-element-type="wc-contact-card" draggable="true">WC Contact Card</div>
            <div class="element-item" data-element-type="wc-contact-chip" draggable="true">WC Contact Chip</div>
            <div class="element-item" data-element-type="wc-hotkey" draggable="true">WC Hotkey</div>
            <div class="element-item" data-element-type="wc-image" draggable="true">WC Image</div>
            <div class="element-item" data-element-type="wc-input" draggable="true">WC Input</div>
            <div class="element-item" data-element-type="wc-input-checkbox" draggable="true">WC Input Checkbox</div>
            <div class="element-item" data-element-type="wc-input-currency" draggable="true">WC Input Currency</div>
            <div class="element-item" data-element-type="wc-input-date" draggable="true">WC Input Date</div>
            <div class="element-item" data-element-type="wc-input-email" draggable="true">WC Input Email</div>
            <div class="element-item" data-element-type="wc-input-month" draggable="true">WC Input Month</div>
            <div class="element-item" data-element-type="wc-input-number" draggable="true">WC Input Number</div>
            <div class="element-item" data-element-type="wc-input-radio-collection" draggable="true">WC Input Radio Collection</div>
            <div class="element-item" data-element-type="wc-input-radio-lookup" draggable="true">WC Input Radio Lookup</div>
            <div class="element-item" data-element-type="wc-input-range" draggable="true">WC Input Range</div>
            <div class="element-item" data-element-type="wc-input-tel" draggable="true">WC Input Phone</div>
            <div class="element-item" data-element-type="wc-input-time" draggable="true">WC Input Time</div>
            <div class="element-item" data-element-type="wc-input-week" draggable="true">WC Input Week</div>
            <div class="element-item" data-element-type="wc-loader" draggable="true">WC Loader</div>
            <div class="element-item" data-element-type="wc-option" draggable="true">WC Option</div>
            <div class="element-item" data-element-type="wc-save-button" draggable="true">WC Save Button</div>
            <div class="element-item" data-element-type="wc-save-split-button" draggable="true">WC Save Split Button</div>
            <div class="element-item" data-element-type="wc-script" draggable="true">WC Script</div>
            <div class="element-item" data-element-type="wc-select-multiple-collection" draggable="true">WC Select Multiple Collection</div>
            <div class="element-item" data-element-type="wc-select-multiple-lookup" draggable="true">WC Select Multiple Lookup</div>
            <div class="element-item" data-element-type="wc-select-collection" draggable="true">WC Select Collection</div>
            <div class="element-item" data-element-type="wc-select-lookup" draggable="true">WC Select Lookup</div>
            <div class="element-item" data-element-type="wc-slideshow-image" draggable="true">WC Slideshow Image</div>
            <div class="element-item" data-element-type="wc-tabulator-column" draggable="true">WC Tabulator Column</div>
            <div class="element-item" data-element-type="wc-tabulator-func" draggable="true">WC Tabulator Func</div>
            <div class="element-item" data-element-type="wc-tabulator-row-menu" draggable="true">WC Tabulator Row Menu</div>
            <div class="element-item" data-element-type="wc-textarea" draggable="true">WC Textarea</div>
            <div class="element-item" data-element-type="wc-theme-selector" draggable="true">WC Theme Selector</div>
            <div class="element-item" data-element-type="wc-timeline-option" draggable="true">WC Timeline Option</div>
          </div>
        </wc-tab-item>
        <wc-tab-item class="" label="Fields">
          <input class="sticky mx-2 mt-2 mb-2" type="search" id="element_filter" placeholder="Fields..."
            oninput="
            const query = this.value.trim().toLowerCase();
            const elements = this.parentElement.querySelectorAll('.element-list .element-item');
            elements.forEach(el => {
              const text = el.textContent.trim().toLowerCase();
              if (query === '' || text.startsWith(query)) {
                el.classList.remove('hidden');
              } else {
                el.classList.add('hidden');
              }
            });
          ">
          <div class="element-list p-2 flex flex-col min-h-0 overflow-scroll" id="schema-fields">
            <!-- Will be populated dynamically -->
          </div>
        </wc-tab-item>
      </wc-tab>      
    </div>

    <!-- Center Panel - Designer Surface -->
    <div id="center-panel" class="flex flex-col flex-1 min-h-0 min-w-0">
      <wc-tab id="center-tab-control" class="flex flex-col flex-1 min-h-0 min-w-0 p-2" animate>
        <wc-tab-item class="active" label="Canvas">
          <div class="designer-surface flex flex-col flex-1 min-h-0 overflow-scroll" id="designer-surface"></div>
        </wc-tab-item>
        <wc-tab-item label="Schema">
          <div class="flex flex-col flex-1 min-h-0 overflow-scroll gap-2">
            <wc-code-mirror class="flex flex-col flex-1 min-h-0"
              _="install HandleCodeMirrorTabChange end"
              name="jsonSchema"
              line-numbers
              line-wrapper
              fold-gutter
              mode="javascript"
              theme="monokai"
              tab-size="2"
              indent-unit="2">
            </wc-code-mirror>
            <div class="flex flex-row justify-end gap-2 p-2">
              <button id="load-schema" class="btn btn-primary">Load Schema</button>
            </div>
          </div>
        </wc-tab-item>
        <wc-tab-item label="Layout JSON">
          <div class="flex flex-col flex-1 min-h-0 min-w-0 overflow-scroll">
            <wc-code-mirror class="flex flex-col flex-1 min-h-0 min-w-0 w-full max-w-full box-border"
              _="install HandleCodeMirrorTabChange end"
              name="jsonLayout"
              line-numbers
              line-wrapper
              fold-gutter
              mode="javascript"
              theme="monokai"
              tab-size="2"
              indent-unit="2"
              >
            </wc-code-mirror>
            <div class="flex flex-row justify-end gap-2 p-2">
              <button id="copy-design" class="btn btn-secondary">Copy to Clipboard</button>
              <button id="download-design" class="btn btn-primary">Download Design</button>
              <button id="load-design" class="btn btn-info">Apply Design</button>
            </div>
          </div>
        </wc-tab-item>
        <wc-tab-item label="Raw Preview">
          <iframe id="pre-rendered-preview" name="pre-rendered-preview" class="border-none flex flex-col flex-1 min-h-0 overflow-scroll">
          </iframe>
        </wc-tab-item>
        <wc-tab-item label="Preview">
          <iframe id="rendered-preview" name="rendered-preview" class="border-none flex flex-col flex-1 min-h-0 overflow-scroll">
          </iframe>
        </wc-tab-item>
      </wc-tab>
    </div>
    <!-- Right Panel - Properties -->
    <div class="right-panel flex flex-col min-h-0 overflow-scroll p-2">
      <wc-tab id="right-panel" class="flex flex-col flex-1 min-h-0" animate>
        <wc-tab-item class="active" label="Properties">
          <div class="flex flex-col flex-1 min-h-0 min-w-0 overflow-scroll gap-2 py-2 px-4">
            <div id="no-selection" class="col-1 text-center text-muted py-4">
              <p>Select an element to view and edit its properties</p>
            </div>
            <div id="element-properties" class="col-1 gap-2 hidden">
              <!-- Custom properties will be dynamically added here -->
              <div id="custom-properties-container" class="mt-3">
                <div id="custom-properties" class="col-1 gap-2"></div>
              </div>
              <div class="row">
                <button id="save-properties" class="col-1 btn btn-primary">Apply</button>
              </div>
            </div>
          </div>
        </wc-tab-item>
        <wc-tab-item class="" label="Rules">
          <div class="col-1 gap-2 py-2 px-4">
            <div id="rules-no-selection" class="text-center text-muted py-4">
              <p>Select an element to view and edit its rules</p>
            </div>
            <div id="element-rules" class="d-none">
              <div id="rules-list" class="flex flex-col gap-2">
                <!-- Rules will be added here -->
              </div>
              <div class="flex flex-row justify-end mt-2">
                <button id="add-rule" class="">Add Rule</button>
              </div>
            </div>
          </div>
        </wc-tab-item>
      </wc-tab>
    </div>
  </div>
  
  <template id="rule-template">
    <swal-title class="text-sm">
      Edit Rule
    </swal-title>
    <swal-html>
      <div class="flex flex-col flex-1 gap-2 text-sm">
        <div class="flex flex-row flex-1">
          <wc-select name="rule-effect" lbl-label="Effect" class="flex-1">
            <option value="COPY">Copy Value</option>
            <option value="COPY-TOLOWER">Copy to Lowercase</option>
            <option value="COPY-TOLOWER-UNDERSCORE">Copy to Lowercase with Underscores</option>
            <option value="SHOW">Show Element</option>
            <option value="HIDE">Hide Element</option>
            <option value="ENABLE">Enable Element</option>
            <option value="DISABLE">Disable Element</option>
            <option value="REQUIRE">Make Required</option>
            <option value="UN-REQUIRE">Make Optional</option>
          </wc-select>
        </div>
        <fieldset class="flex flex-col flex-1 p-2 gap-2">
          <legend>Condition</legend>
          <div class="flex flex-row flex-1">
            <wc-input name="rule-condition-scope" lbl-label="Scope" class="flex-1">
            </wc-input>
          </div>
          <div class="flex flex-row flex-1 gap-2">
            <wc-select name="rule-schema-type" lbl-label="Rule Type" class="flex-1">
              <option value="">Choose...</option>
              <option value="minLength">Min Length</option>
              <option value="maxLength">Max Length</option>
              <option value="pattern">Pattern</option>
              <option value="minimum">Minimum</option>
              <option value="maximum">Maximum</option>
              <option value="const">Constant</option>
              <option value="enum">Enum</option>
            </wc-select>
            <wc-input name="rule-schema-value" lbl-label="Value" class="flex-1">
            </wc-input>            
          </div>
          <div class="flex flex-row flex-1">
            <wc-input name="rule-src-data-id" lbl-label="Source Element ID" class="flex-1">
            </wc-input>
          </div>
          <div class="flex flex-row flex-1 gap-2">
            <wc-input name="rule-src-selector" lbl-label="Source Selector (optional)" class="flex-1">
            </wc-input>
            <wc-input name="rule-src-property" lbl-label="Source Property (optional)" class="flex-1">
            </wc-input>
          </div>
        </fieldset>
        <fieldset class="flex flex-col flex-1 p-2 gap-2">
          <legend>Target</legend>
          <div class="flex flex-row flex-1">
            <!--
            <wc-input name="rule-tgt-data-id" lbl-label="Target Element ID" class="flex-1">
            </wc-input>
            -->
            <wc-select name="rule-tgt-data-id" lbl-label="Target Element ID" class="flex-1">
            </wc-select>
          </div>
          <div class="flex flex-row flex-1 gap-2">
            <wc-input name="rule-tgt-selector" lbl-label="Target Selector (optional)" class="flex-1">
            </wc-input>
            <wc-input name="rule-tgt-property" lbl-label="Target Property (optional)" class="flex-1">
            </wc-input>
          </div>
        </fieldset>
      </div>
    </swal-html>
    <swal-button type="cancel">
      Cancel
    </swal-button>
    <swal-button type="confirm">
      Save Rule
    </swal-button>
    <swal-param name="allowEscapeKey" value="false" />
    <swal-param name="allowOutsideClick" value="false" />
  </template>
      
      `;this.innerHTML=e}_applyStyle(){this.loadStyle("wc-page-designer-style",`
        wc-page-designer {
          display: contents;
        }
        wc-page-designer .left-panel {
          width: 275px;
          border-right: 1px solid #dee2e6;
        }
        wc-page-designer .center-panel {
          flex: 1;
          background-color: #f8f9fa;
          position: relative;
        }
        wc-page-designer .right-panel {
          width: 300px;
          border-left: 1px solid #dee2e6;
        }
        wc-page-designer .element-list {
          margin-bottom: 20px;
        }
        wc-page-designer .element-item {
          padding: 8px 12px;
          margin-bottom: 5px;
          border: 1px solid var(--button-bg-color);
          border-radius: 4px;
          color: var(--button-color);
          cursor: move;
          user-select: none;
        }
        wc-page-designer .element-item:hover {
          background-color: var(--button-hover-bg-color);
        }
        wc-page-designer .designer-surface {
          padding: 20px;
          background-color: white;
        }
        /* Designer element styling */
        wc-page-designer .designer-element {
          padding: 10px;
          margin: 5px 0;
          border: 2px solid #dee2e6;
          border-radius: 4px;
          position: relative;
        }
        wc-page-designer .designer-element.selected {
          border: 2px solid var(--swatch-9);
        }
        wc-page-designer .designer-element-container {
          min-height: 50px;
          padding: 10px;
          border: 2px dashed #6c757d;
          margin: 8px 0;
          position: relative;
        }
        wc-page-designer .designer-element-container.drag-over {
          background-color: rgba(13, 110, 253, 0.1);
          border: 1px dashed #0d6efd;
        }
        wc-page-designer .designer-element-placeholder {
          height: 50px;
          margin: 8px 0;
          background-color: #f1f1f1;
          text-align: center;
          line-height: 50px;
          color: #6c757d;
        }
        wc-page-designer .container-drop-indicator {
          position: absolute;
          top: 0;
          left: 0;
          width: 100%;
          height: 100%;
          pointer-events: none;
          z-index: -1;
        }
        wc-page-designer .element-actions {
          position: absolute;
          top: 5px;
          right: 5px;
          display: flex;
          gap: 5px;
        }
        wc-page-designer .element-actions button {
          padding: 2px 5px;
          font-size: 12px;
        }
        wc-page-designer .element-type-header {
          font-size: 12px;
          font-weight: bold;
          color: #6c757d;
          margin-bottom: 5px;
          display: block;
        }
        wc-page-designer .element-label {
          font-weight: bold;
          color: var(--text-9);
        }
        wc-page-designer .preview-container {
          height: 100%;
          width: 100%;
          position: absolute;
          top: 0;
          left: 0;
          background-color: white;
          z-index: 1000;
          padding: 20px;
          overflow-y: auto;
        }
        wc-page-designer .preview-container.hidden {
          display: none;
        }
        wc-page-designer .invisible-placeholder {
          visibility: hidden;
          height: 0;
          padding: 0;
          margin: 0;
        }


        /* Floating toolbar styles */
        wc-page-designer .floating-element-toolbar {
          position: absolute;
          background: var(--surface-1, white);
          border: 1px solid var(--surface-4, #dee2e6);
          border-radius: 4px;
          display: flex;
          gap: 1px;
          padding: 2px;
          z-index: 9999;
          box-shadow: 0 2px 8px rgba(0, 0, 0, 0.15);
          opacity: 0;
          visibility: hidden;
          transition: opacity 0.2s ease, visibility 0.2s ease;
          pointer-events: none;
        }
        
        wc-page-designer .floating-element-toolbar.visible {
          opacity: 1;
          visibility: visible;
          pointer-events: auto;
        }
        
        wc-page-designer .floating-element-toolbar .toolbar-btn {
          width: 18px;
          height: 18px;
          border: none;
          border-radius: 2px;
          background: var(--button-bg-color, #f8f9fa);
          color: var(--button-color, #495057);
          font-size: 10px;
          font-weight: bold;
          cursor: pointer;
          display: flex;
          align-items: center;
          justify-content: center;
          transition: background-color 0.2s ease;
          line-height: 1;
        }
        
        wc-page-designer .floating-element-toolbar .toolbar-btn:hover {
          background: var(--button-hover-bg-color, #e9ecef);
        }
        
        wc-page-designer .floating-element-toolbar .toolbar-btn.delete-element {
          background: #dc3545;
          color: white;
        }
        
        wc-page-designer .floating-element-toolbar .toolbar-btn.delete-element:hover {
          background: #c82333;
        }
        
        wc-page-designer .floating-element-toolbar .toolbar-btn:disabled {
          opacity: 0.5;
          cursor: not-allowed;
        }

        wc-page-designer .floating-element-toolbar .toolbar-btn.clone-element {
          background: #17a2b8;
          color: white;
        }

        wc-page-designer .floating-element-toolbar .toolbar-btn.clone-element:hover {
          background: #138496;
        }
        
        /* Dark mode support */
        wc-page-designer .dark .floating-element-toolbar {
          background: var(--surface-2);
          border-color: var(--surface-5);
        }
        
        wc-page-designer .dark .floating-element-toolbar .toolbar-btn {
          background: var(--surface-3);
          color: var(--text-1);
        }
        
        wc-page-designer .dark .floating-element-toolbar .toolbar-btn:hover {
          background: var(--surface-4);
        }




        wc-page-designer .dark .designer-surface {
          background-color: var(--surface-1);
        }
        wc-page-designer .dark .left-panel {
          border-right: 1px solid var(--surface-1);
        }
        wc-page-designer .dark .right-panel {
          border-left: 1px solid var(--surface-1);
        }
        wc-page-designer .dark .designer-element {
          border: 2px solid var(--surface-4);
        }
        wc-page-designer .dark .designer-element.selected {
          border: 2px solid var(--surface-6);
        }
        wc-page-designer .dark .designer-element-container {
          border: 2px dashed var(--surface-5);
        }
        wc-page-designer .dark .designer-element-container.drag-over {
          background-color: rgba(13, 110, 253, 0.1);
          background-color: color-mix(in oklch, var(--surface-2) 50%, transparent);
          border: 1px dashed var(--surface-5);
        }
        wc-page-designer .dark .designer-element-placeholder {
          background-color: var(--surface-3);
          color: var(--text-7);
        }          
        wc-page-designer .dark .element-type-header {
          color: var(--text-3);
        }
        wc-page-designer .dark .element-label {
          color: var(--text-5);
        }
        wc-page-designer .dark .preview-container {
          background-color: white;
        }
      `)}wireEvents(){}unWireEvents(){}setup(){this.hasAttribute("data-wired")||(this.designerSurface=document.getElementById("designer-surface"),this.containerElements=document.getElementById("container-elements"),this.formElements=document.getElementById("form-elements"),this.schemaFields=document.getElementById("schema-fields"),this.previewButton=document.querySelector('button[data-label="Preview"]'),this.renderedPreviewButton=document.querySelector('button[data-label="Preview"]'),this.preRenderedPreviewButton=document.querySelector('button[data-label="Raw Preview"]'),this.generateJsonButton=document.querySelector('button[data-label="Layout JSON"]'),this.jsonOutput=document.querySelector('wc-code-mirror[name="jsonLayout"]'),this.propId=document.getElementById("prop-id"),this.propType=document.getElementById("prop-type"),this.propLabel=document.getElementById("prop-label"),this.propScope=document.getElementById("prop-scope"),this.propCss=document.getElementById("prop-css"),this.propRequired=document.getElementById("prop-required"),this.savePropertiesButton=document.getElementById("save-properties"),this.noSelectionPanel=document.getElementById("no-selection"),this.elementPropertiesPanel=document.getElementById("element-properties"),this.schemaJson=document.querySelector('wc-code-mirror[name="jsonSchema"]'),this.loadSchemaButton=document.getElementById("load-schema"),this.addRuleButton=document.getElementById("add-rule"),this.rulesList=document.getElementById("rules-list"),this.saveRuleButton=document.getElementById("save-rule"),this.loadDesignButton=document.getElementById("load-design"),this.copyDesignButton=document.getElementById("copy-design"),this.downloadDesignButton=document.getElementById("download-design"),this.init(),this.createFloatingToolbar(),this.setupFloatingToolbar(),this.setAttribute("data-wired",!0))}init(){this.initDragAndDrop(),this.initDropZone(this.designerSurface,null),new Sortable(this.designerSurface,{group:"elements",animation:150,onEnd:e=>{this.updateTopLevelElementsOrder()}}),this.initEventListeners()}updateTopLevelElementsOrder(){let e=[];this.designerSurface.querySelectorAll(":scope > .designer-element").forEach(o=>{let n=o.getAttribute("data-id"),s=this.findElementById(n);s&&e.push(s)}),this.designerState.elements=e}initDragAndDrop(){document.querySelectorAll(".element-item").forEach(t=>{t.addEventListener("dragstart",o=>{o.dataTransfer.setData("element-type",t.getAttribute("data-element-type")),o.dataTransfer.setData("schema-field",t.getAttribute("data-schema-field")||""),o.dataTransfer.effectAllowed="copy"})})}initDropZone(e,t=null){e.setAttribute("data-drop-zone","true"),e.addEventListener("dragover",o=>{o.preventDefault(),o.dataTransfer.dropEffect="copy",e.classList.add("drag-over")}),e.addEventListener("dragleave",o=>{e.classList.remove("drag-over")}),e.addEventListener("drop",o=>{o.preventDefault(),o.stopPropagation(),e.classList.remove("drag-over");let n=o.dataTransfer.getData("element-type"),s=o.dataTransfer.getData("schema-field");if(n){let a=this.generateUniqueId(),r={id:a,"data-id":a,type:n,elements:[]},l=this.elementCustomProperties[n];if(l&&l.length>0&&l.forEach(u=>{if(u.type==="boolean")r[u.name]=!1;else if(u.type==="number")r[u.name]=null;else if(u.name==="id")r[u.name]=a;else if(u.name==="type")r[u.name]=n;else if(u.name==="label"&&s){let h=s.split("/"),m=h[h.length-1];if(s.includes("$defs")){let b=h[2],f=h[h.length-1];b&&f&&(m=b+"."+f)}r[u.name]=m}else u.name==="scope"&&s?r[u.name]=s:u.defaultValue!==void 0?r[u.name]=u.defaultValue:r[u.name]=""}),t){let u=this.findElementById(t);u&&(u.elements||(u.elements=[]),u.elements.push(r))}else this.designerState.elements.push(r);let c=e.querySelector(".designer-element-placeholder");if(c&&c.parentNode===e)try{e.removeChild(c)}catch(u){console.warn("Could not remove placeholder:",u)}let p=this.createElementNode(r);e.appendChild(p),e.classList.contains("designer-element-container")&&setTimeout(()=>{if(!e.querySelector(".designer-element-placeholder")){let u=document.createElement("div");u.className="designer-element-placeholder",u.textContent="Drop more elements here",e.appendChild(u)}},100),this.isContainerElement(n)&&document.querySelectorAll(".designer-element-container:not([data-drop-zone])").forEach(h=>{let m=h.getAttribute("data-container-for");m&&this.initDropZone(h,m)})}}),e.addEventListener("drop2",o=>{o.preventDefault(),o.stopPropagation(),e.classList.remove("drag-over");let n=o.dataTransfer.getData("element-type"),s=o.dataTransfer.getData("schema-field");if(n){let a="",r="";if(s){a=s;let m=s.split("/");if(m.length>0&&(r=m[m.length-1],s.includes("$defs"))){let b=m[2],f=m[m.length-1];b&&f&&(r=b+"."+f)}}else r=this.getDefaultLabel(n);let l=this.generateUniqueId(),c={id:l,"data-id":l,type:n,label:r,scope:a,css:"",required:!1,rules:[],elements:[]},p=this.elementCustomProperties[n];if(p&&p.length>0&&p.forEach(m=>{m.type==="boolean"?c[m.name]=!1:m.type==="number"?c[m.name]=null:m.name==="id"?c[m.name]=l:m.name==="type"?c[m.name]=n:m.name==="label"?c[m.name]=r:m.name==="scope"?c[m.name]=a:m.defaultValue?c[m.name]=m.defaultValue:c[m.name]=""}),t){let m=this.findElementById(t);m&&(m.elements||(m.elements=[]),m.elements.push(c))}else this.designerState.elements.push(c);let u=e.querySelector(".designer-element-placeholder");if(u&&u.parentNode===e)try{e.removeChild(u)}catch(m){console.warn("Could not remove placeholder:",m)}let h=this.createElementNode(c);e.appendChild(h),e.classList.contains("designer-element-container")&&setTimeout(()=>{if(!e.querySelector(".designer-element-placeholder")){let m=document.createElement("div");m.className="designer-element-placeholder",m.textContent="Drop more elements here",e.appendChild(m)}},100),this.isContainerElement(n)&&document.querySelectorAll(".designer-element-container:not([data-drop-zone])").forEach(b=>{let f=b.getAttribute("data-container-for");f&&this.initDropZone(b,f)})}})}initEventListeners(){this.renderedPreviewButton.addEventListener("click",this.renderPreview.bind(this)),this.preRenderedPreviewButton.addEventListener("click",this.preRenderPreview.bind(this)),this.generateJsonButton.addEventListener("click",this.generateJson.bind(this)),this.savePropertiesButton.addEventListener("click",this.saveProperties.bind(this)),this.loadSchemaButton.addEventListener("click",()=>{try{let e=JSON.parse(this.schemaJson.editor.getValue());this.loadSchema(e)}catch{alert("Invalid JSON schema")}}),this.schemaJson.addEventListener("fetch-complete",e=>{try{let t=JSON.parse(this.schemaJson.editor.getValue());this.loadSchema(t)}catch{alert("Invalid JSON schema")}}),this.addRuleButton.addEventListener("click",()=>{this.designerState.editingRuleIndex=-1;let e={focusConfirm:!1,template:"template#rule-template",didOpen:()=>{let t=document.querySelector(".swal2-container");if(t){if(this.designerState.selectedElement){let o=document.getElementById("rule-src-data-id");o.value=this.designerState.selectedElement.id;let n=JSON.parse(this.jsonOutput.editor.getValue()),s=WaveHelpers.extractSrcElements(n),a=document.getElementById("rule-tgt-data-id");a.innerHTML="";let r=document.createElement("option");r.value="",r.textContent="Choose...",a.appendChild(r),s.forEach(l=>{r=document.createElement("option"),r.value=l.dataId,r.textContent=l.label,a.appendChild(r)})}htmx.process(t),_hyperscript.processNode(t)}},preConfirm:()=>{let t=document.getElementById("rule-effect").value,o=document.getElementById("rule-condition-scope").value,n=document.getElementById("rule-schema-type").value,s=document.getElementById("rule-schema-value").value,a=document.getElementById("rule-src-data-id").value,r=document.getElementById("rule-src-selector").value||"",l=document.getElementById("rule-src-property").value||"",c=document.getElementById("rule-tgt-data-id").value,p=document.getElementById("rule-tgt-selector").value||"",u=document.getElementById("rule-tgt-property").value||"",h={effect:t,condition:{scope:o,schema:{[n]:s},srcDataId:a,srcSelector:r,srcProperty:l},tgtDataId:c,tgtSelector:p,tgtProperty:u};if(n&&s)switch(n){case"minLength":case"maxLength":case"minimum":case"maximum":h.condition.schema[n]=parseInt(s);break;case"pattern":h.condition.schema[n]=s;break;case"const":h.condition.schema[n]=s;break;case"enum":h.condition.schema[n]=s.split(",").map(m=>m.trim());break}return h},callback:t=>{this.saveRule(t)}};wc.Prompt.notifyTemplate(e)}),this.jsonOutput.addEventListener("wc-code-mirror:ready",()=>{this.jsonOutput.editor.on("change2",async()=>{try{let e=this.jsonOutput.editor.getValue().trim(),t=JSON.parse(e);this.loadDesign(t)}catch(e){alert("Invalid JSON format: "+e.message)}})}),this.jsonOutput.addEventListener("fetch-complete",e=>{let t=this.jsonOutput.editor.getValue().trim(),o=JSON.parse(t);this.loadDesign(o)}),this.loadDesignButton.addEventListener("click",()=>{try{let e=this.jsonOutput.editor.getValue().trim();if(!e){alert("Please paste a valid JSON layout");return}let t=JSON.parse(e);this.loadDesign(t),wc.Prompt.toast({title:"Load Succeeded!"})}catch(e){alert("Invalid JSON format: "+e.message)}}),this.copyDesignButton.addEventListener("click",this.copyDesign.bind(this)),this.downloadDesignButton.addEventListener("click",()=>{let e=this.jsonOutput.editor.getValue(),o="layout-ui-design.json",n=new Blob([e],{type:"application/json"}),s=URL.createObjectURL(n),a=document.createElement("a");a.href=s,a.download=o,document.body.appendChild(a),a.click(),document.body.removeChild(a),URL.revokeObjectURL(s)})}createElementObject({type:e,label:t="",scope:o="",parentElement:n=null,css:s="",id:a=null}){let r=a||this.generateUniqueId(),l={id:r,"data-id":r,type:e,elements:[]},c=this.elementCustomProperties[e];if(c&&c.length>0&&c.forEach(p=>{p.type==="boolean"?l[p.name]=!1:p.type==="number"?l[p.name]=null:p.defaultValue!==void 0?l[p.name]=p.defaultValue:l[p.name]=""}),n){let p=this.findElementById(n);return p&&p.elements.push(l),l}else return this.designerState.elements.push(l),l}addElementToDesigner(e,t){let o=this.createElementNode(e);t.appendChild(o)}createElementNode(e){let t=document.createElement("div");t.className="designer-element",t.setAttribute("data-id",e.id),t.setAttribute("data-type",e.type);let o=document.createElement("span");o.className="element-type-header",o.textContent=e.type,t.appendChild(o);let n=document.createElement("span");n.className="element-label",t.appendChild(n);let s=document.createElement("small");s.className="ms-2 text-muted";let a=this.elementCustomProperties[e.type];if(a&&a.length>0){let r=!1,l="";a.forEach(c=>{if(c.isLabel&&e[c.name])n.textContent=e[c.name],r=!0;else if(c.isSubLabel){let p=e[c.name];p&&p.trim()!==""&&(l=`(${p})`)}}),r||(n.textContent=e.type),l&&(s.textContent=l,n.appendChild(s))}else n.textContent=e.type;if(this.isContainerElement(e.type)){let r=document.createElement("div");if(r.className="designer-element-container",r.setAttribute("data-container-for",e.id),!e.elements||e.elements.length===0){let l=document.createElement("div");l.className="designer-element-placeholder",l.textContent="Drop elements here",r.appendChild(l)}else e.elements.forEach(l=>{let c=this.createElementNode(l);r.appendChild(c)});this.initDropZone(r,e.id),new Sortable(r,{group:"elements",animation:150,onEnd:l=>{this.updateElementsOrder(r,e.id)}}),t.appendChild(r)}return t}updateElementsOrder(e,t){let o=this.findElementById(t);if(!o)return;let n=[];e.querySelectorAll(":scope > .designer-element").forEach(a=>{let r=a.getAttribute("data-id"),l=this.findElementById(r);l&&n.push(l)}),o.elements=n}selectElement(e){document.querySelectorAll(".designer-element.selected").forEach(s=>s.classList.remove("selected"));let o=this.findElementById(e);if(!o)return;this.designerState.selectedElement=o;let n=document.querySelector(`.designer-element[data-id="${e}"]`);n&&n.classList.add("selected"),this.updateProperties(o),this.updateRulesPanel(o),this.noSelectionPanel.classList.add("hidden"),this.elementPropertiesPanel.classList.remove("hidden"),document.getElementById("rules-no-selection").classList.add("hidden"),document.getElementById("element-rules").classList.remove("hidden")}updateProperties(e){let t=document.getElementById("custom-properties");t.innerHTML="",document.getElementById("custom-properties-container").style.display="block";let o=this.elementCustomProperties[e.type];if(o&&o.length>0)o.forEach(n=>{let s=e[n.name]!==void 0?e[n.name]:n.type==="boolean"?!1:n.type==="number"?null:n.defaultValue||"",a=this.createCustomPropertyInput(n,s);t.appendChild(a)});else{let n=document.createElement("p");n.className="text-muted text-center",n.textContent="No custom properties defined for this element type",t.appendChild(n)}}updateRulesPanel(e){if(this.rulesList.innerHTML="",!e.rules||e.rules.length===0){let t=document.createElement("p");t.className="text-muted text-center",t.textContent="No rules defined",this.rulesList.appendChild(t);return}e.rules.forEach((t,o)=>{let n=document.createElement("div");n.className="rule-item flex flex-col rounded border-1 border-solid gap-2 p-2";let s=document.createElement("div");s.className="flex flex-col gap-2";let a=document.createElement("h6");a.textContent=`Rule: ${t.effect}`,s.appendChild(a);let r=document.createElement("div");r.className="flex flex-row justify-between align-center";let l=document.createElement("button");l.className="theme-azure dark",l.textContent="Edit",l.addEventListener("click",()=>this.editRule(o)),r.appendChild(l);let c=document.createElement("button");c.className="theme-fire dark",c.textContent="Delete",c.addEventListener("click",async()=>this.deleteRule(o)),r.appendChild(c),s.appendChild(r),n.appendChild(s);let p=document.createElement("div");p.className="text-sm";let u=document.createElement("div");u.textContent=`When ${t.condition.scope} ${this.getSchemaDescription(t.condition.schema)}`,p.appendChild(u);let h=document.createElement("div");h.textContent=`${t.effect} on ${t.tgtDataId}`,p.appendChild(h),n.appendChild(p),this.rulesList.appendChild(n)})}getSchemaDescription(e){if(!e)return"";let t=[];return e.const!==void 0&&t.push(`equals "${e.const}"`),e.enum&&t.push(`is one of [${e.enum.join(", ")}]`),e.minimum!==void 0&&t.push(`>= ${e.minimum}`),e.maximum!==void 0&&t.push(`<= ${e.maximum}`),e.minLength!==void 0&&t.push(`length >= ${e.minLength}`),e.maxLength!==void 0&&t.push(`length <= ${e.maxLength}`),e.pattern&&t.push(`matches "${e.pattern}"`),t.join(" AND ")}editRule(e){if(!this.designerState.selectedElement||!this.designerState.selectedElement.rules)return;let t=this.designerState.selectedElement.rules[e];if(!t)return;this.designerState.editingRuleIndex=e;let o={focusConfirm:!1,template:"template#rule-template",didOpen:()=>{let n=document.querySelector(".swal2-container");if(n){if(document.getElementById("rule-effect").value=t.effect,document.getElementById("rule-condition-scope").value=t.condition.scope||"",t.condition.schema){let s=t.condition.schema,a="",r="";s.minLength!==void 0?(a="minLength",r=s.minLength):s.maxLength!==void 0?(a="maxLength",r=s.maxLength):s.pattern!==void 0?(a="pattern",r=s.pattern):s.minimum!==void 0?(a="minimum",r=s.minimum):s.maximum!==void 0?(a="maximum",r=s.maximum):s.const!==void 0?(a="const",r=s.const):s.enum!==void 0&&(a="enum",r=s.enum.join(",")),document.getElementById("rule-schema-type").value=a,document.getElementById("rule-schema-value").value=r}document.getElementById("rule-src-data-id").value=t.condition.srcDataId||"",document.getElementById("rule-src-selector").value=t.condition.srcSelector||"",document.getElementById("rule-src-property").value=t.condition.srcProperty||"",document.getElementById("rule-tgt-data-id").value=t.tgtDataId||"",document.getElementById("rule-tgt-selector").value=t.tgtSelector||"",document.getElementById("rule-tgt-property").value=t.tgtProperty||"",htmx.process(n),_hyperscript.processNode(n)}},preConfirm:()=>{let n=document.getElementById("rule-effect").value,s=document.getElementById("rule-condition-scope").value,a=document.getElementById("rule-schema-type").value,r=document.getElementById("rule-schema-value").value,l=document.getElementById("rule-src-data-id").value,c=document.getElementById("rule-src-selector").value||"",p=document.getElementById("rule-src-property").value||"",u=document.getElementById("rule-tgt-data-id").value,h=document.getElementById("rule-tgt-selector").value||"",m=document.getElementById("rule-tgt-property").value||"",b={effect:n,condition:{scope:s,schema:{[a]:r},srcDataId:l,srcSelector:c,srcProperty:p},tgtDataId:u,tgtSelector:h,tgtProperty:m};if(a&&r)switch(a){case"minLength":case"maxLength":case"minimum":case"maximum":b.condition.schema[a]=parseInt(r);break;case"pattern":b.condition.schema[a]=r;break;case"const":b.condition.schema[a]=r;break;case"enum":b.condition.schema[a]=r.split(",").map(f=>f.trim());break}return b},callback:n=>{this.saveRule(n)}};wc.Prompt.notifyTemplate(o)}async deleteRule(e){if(!this.designerState.selectedElement||!this.designerState.selectedElement.rules)return;await wc.Prompt.question({title:"Confirm Delete",text:"Are you are you want to delete this rule?",showCancelButton:!0})&&(this.designerState.selectedElement.rules.splice(e,1),this.updateRulesPanel(this.designerState.selectedElement))}saveRule(e){this.designerState.selectedElement&&(this.designerState.editingRuleIndex>=0?this.designerState.selectedElement.rules[this.designerState.editingRuleIndex]=e:(this.designerState.selectedElement.rules||(this.designerState.selectedElement.rules=[]),this.designerState.selectedElement.rules.push(e)),this.updateRulesPanel(this.designerState.selectedElement))}clearRuleForm(){document.getElementById("rule-effect").value="SHOW",document.getElementById("rule-condition-scope").value="",document.getElementById("rule-schema-type").value="minLength",document.getElementById("rule-schema-value").value="",document.getElementById("rule-src-data-id").value="",document.getElementById("rule-src-selector").value="input",document.getElementById("rule-src-property").value="value",document.getElementById("rule-tgt-data-id").value="",document.getElementById("rule-tgt-selector").value="",document.getElementById("rule-tgt-property").value="value"}saveProperties(){if(!this.designerState.selectedElement)return;let e=this.elementCustomProperties[this.designerState.selectedElement.type];e&&e.length>0&&e.forEach(t=>{if(t.isReadonly)return;let o,n=document.querySelector(`input[type="radio"][name="prop-custom-${t.name}"]:checked`);if(n)o=n.value,this.designerState.selectedElement[t.name]=o;else{let s=document.getElementById(`prop-custom-${t.name}`);s&&(t.type==="boolean"?o=s.checked:t.type==="number"?o=s.value!==""?Number(s.value):null:o=s.value,this.designerState.selectedElement[t.name]=o)}}),this.generateJson(),this.refreshDesigner(),wc.Prompt.toast({title:"Properties Updated!"})}refreshDesigner(){let e=this.designerState.selectedElement?this.designerState.selectedElement.id:null,t=this.toolbarVisible,o=this.currentHoveredElementData?this.currentHoveredElementData.id:null;this.hideToolbar(),this.designerSurface.innerHTML="",this.floatingToolbar=null,this.createFloatingToolbar(),this.designerState.elements.forEach(n=>{this.addElementToDesigner(n,this.designerSurface)}),e&&this.selectElement(e),t&&o&&setTimeout(()=>{let n=document.querySelector(`.designer-element[data-id="${o}"]`);n&&this.showToolbarForElement(n)},100)}removeElement(e){if(!confirm("Are you sure you want to delete this element?")||!this.findElementById(e))return;let o=this.findParentElement(e);o?o.elements=o.elements.filter(n=>n.id!==e):this.designerState.elements=this.designerState.elements.filter(n=>n.id!==e),this.designerState.selectedElement&&this.designerState.selectedElement.id===e&&(this.designerState.selectedElement=null,this.noSelectionPanel.classList.remove("hidden"),this.elementPropertiesPanel.classList.add("hidden"),document.getElementById("rules-no-selection").classList.remove("hidden"),document.getElementById("element-rules").classList.add("hidden")),this.refreshDesigner()}findElementById(e){let t=this.designerState.elements.find(n=>n.id===e);if(t)return t;let o=n=>{if(!n)return null;for(let s of n){if(s.id===e)return s;if(s.elements&&s.elements.length>0){let a=o(s.elements);if(a)return a}}return null};return o(this.designerState.elements)}findParentElement(e){let t=o=>{if(!o)return null;for(let n of o){if(n.elements&&n.elements.some(s=>s.id===e))return n;if(n.elements&&n.elements.length>0){let s=t(n.elements);if(s)return s}}return null};return t(this.designerState.elements)}loadSchema(e){this.designerState.schema=e,this.schemaFields.innerHTML="",e.properties&&Object.entries(e.properties).forEach(([t,o])=>{this.addSchemaField(`#/properties/${t}`,o,e.required)}),e.$defs&&Object.entries(e.$defs).forEach(([t,o])=>{o.properties&&Object.entries(o.properties).forEach(([n,s])=>{this.addSchemaField(`#/$defs/${t}/${n}`,s,o.required)})})}addSchemaField(e,t,o){let n=document.createElement("div");n.className="element-item",n.setAttribute("draggable","true"),n.setAttribute("data-schema-field",e);let s="wc-input";t.type==="boolean"?s="wc-input-checkbox":t.type==="array"&&(s="array"),n.setAttribute("data-element-type",s);let a=e.split("/").pop(),r=a;if(e.includes("$defs")){let c=e.split("/");c.length>=3&&(r=c[2]+"."+a)}if(n.textContent=r,o&&o.includes(a)){let c=document.createElement("span");c.className="ms-1 text-danger",c.textContent="*",n.appendChild(c)}let l=document.createElement("span");l.className="ms-2 text-muted small",l.textContent=`(${t.type})`,n.appendChild(l),n.addEventListener("dragstart",c=>{c.dataTransfer.setData("element-type",s),c.dataTransfer.setData("schema-field",e),c.dataTransfer.effectAllowed="copy"}),this.schemaFields.appendChild(n)}renderPreview(){this.generateJson(),document.getElementById("rendered-preview").addEventListener("load",()=>{WaveHelpers.toggleIndicator("#content-loader",!1)},{once:!0}),WaveHelpers.toggleIndicator("#content-loader",!0);let t=document.createElement("form"),o=document.querySelector('input[name="_id"]').value;t.method="GET",t.action=`/view/${o}`,t.target="rendered-preview",document.body.appendChild(t),t.submit(),t.remove()}preRenderPreview(){this.generateJson(),document.getElementById("pre-rendered-preview").addEventListener("load",()=>{WaveHelpers.toggleIndicator("#content-loader",!1)},{once:!0}),WaveHelpers.toggleIndicator("#content-loader",!0);let t=document.createElement("form"),o=document.querySelector('input[name="_id"]').value;t.method="GET",t.action=`/view/pre/${o}`,t.target="pre-rendered-preview",document.body.appendChild(t),t.submit(),t.remove()}generateJson(){let e={elements:this.designerState.elements},t=JSON.parse(JSON.stringify(e)),o=n=>{n&&n.forEach(s=>{delete s.id,s.elements&&o(s.elements)})};return o(t.elements),this.jsonOutput.editor.setValue(JSON.stringify(t.elements,null,2)),t.elements}copyDesign(){let e=this.jsonOutput.editor.getValue();navigator.clipboard.writeText(e).then(()=>{let t=this.copyDesignButton.textContent;this.copyDesignButton.textContent="Copied!",setTimeout(()=>{this.copyDesignButton.textContent=t},2e3)}).catch(t=>{console.error("Failed to copy: ",t),alert("Failed to copy JSON to clipboard")})}isContainerElement(e){return["div","column","row","data-array","data-item","fieldset","option","wc-accordion","wc-breadcrumb","wc-form","wc-input-radio","wc-select","wc-select-multiple","wc-sidebar","wc-sidenav","wc-slideshow","wc-split-button","wc-timeline","wc-tab","wc-tab-item","wc-tabulator"].includes(e)}generateUniqueId(){return uuid.v4().substring(0,12)}getDefaultLabel(e){switch(e){case"wc-tab":return"Tab Container";case"wc-tab-item":return"Tab Item";case"column":return"Column";case"row":return"Row";case"fieldset":return"Group";case"array":return"Array";case"wc-card":return"Card";case"wc-input":return"Input Field";case"wc-input-checkbox":return"Checkbox";case"hr":return"";default:return e}}createCustomPropertyInput(e,t){let o=document.createElement("div");o.className="row mb-2";let n,s=`prop-custom-${e.name}`;if(e.type==="boolean")n=new(customElements.get("wc-input")),n.setAttribute("name",s),n.setAttribute("lbl-label",e.label),n.setAttribute("class","col"),n.setAttribute("type","checkbox"),n.setAttribute("toggle-switch",""),t===!0&&(n.setAttribute("checked",""),setTimeout(()=>{n.checked=!0},10)),e.isReadonly&&n.setAttribute("disabled","");else if(e.type==="number")n=new(customElements.get("wc-input")),n.setAttribute("name",s),n.setAttribute("lbl-label",e.label),n.setAttribute("class","col-1"),n.setAttribute("type","number"),n.setAttribute("value",t!==void 0?t:0),e.isReadonly&&n.setAttribute("readonly","");else if(e.type==="multiline-string")n=new(customElements.get("wc-textarea")),n.setAttribute("name",s),n.setAttribute("lbl-label",e.label),n.setAttribute("class","col-1"),n.setAttribute("value",t!==void 0?t:""),e.isReadonly&&n.setAttribute("readonly","");else if(e.type==="string-datalist"){n=new(customElements.get("wc-input")),n.setAttribute("name",s),n.setAttribute("lbl-label",e.label),n.setAttribute("class","col-1"),n.setAttribute("value",t!==void 0?t:""),n.setAttribute("list",`${s}_list`),e.isReadonly&&n.setAttribute("readonly","");let a=document.createElement("datalist");a.id=`${s}_list`,e.enum.forEach(r=>{let l=document.createElement("option");l.value=r,l.textContent=r,a.appendChild(l)}),o.appendChild(a)}else if(e.type==="string-enum"){n=new(customElements.get("wc-select")),n.setAttribute("name",s),n.setAttribute("lbl-label",e.label),n.setAttribute("class","col-1"),n.setAttribute("value",t!==void 0?t:"");let a=e.enum.map(r=>`{"key": "${r}", "value": "${r}"}`);n.setAttribute("items",`[${a}]`),e.isReadonly&&n.setAttribute("disabled","")}else if(e.type==="string-radio-modern"){n=new(customElements.get("wc-input")),n.setAttribute("name",s),n.setAttribute("lbl-label",e.label),n.setAttribute("type","radio"),n.setAttribute("class","col-1"),n.setAttribute("radio-group-class","row modern"),n.setAttribute("value",t!==void 0?t:"");let a=e.enum.map(r=>`{"key": "${r}", "value": "${r}"}`);n.setAttribute("options",`[${a}]`),e.isReadonly&&n.setAttribute("disabled","")}else if(e.type==="string-radio"){n=new(customElements.get("wc-input")),n.setAttribute("name",s),n.setAttribute("lbl-label",e.label),n.setAttribute("type","radio"),n.setAttribute("class","col-1"),n.setAttribute("radio-group-class","row"),n.setAttribute("value",t!==void 0?t:"");let a=e.enum.map(r=>`{"key": "${r}", "value": "${r}"}`);n.setAttribute("options",`[${a}]`),e.isReadonly&&n.setAttribute("disabled","")}else n=new(customElements.get("wc-input")),n.setAttribute("name",s),n.setAttribute("lbl-label",e.label),n.setAttribute("class","col-1"),n.setAttribute("value",t!==void 0?t:""),e.isReadonly&&n.setAttribute("readonly","");return n.dataset.propertyName=e.name,n.dataset.propertyType=e.type,n.dataset.isReadonly=e.isReadonly?"true":"false",o.appendChild(n),o}saveDesignToLocalStorage(){let e="layout-ui-design",t=this.jsonOutput.editor.getValue();try{let o=JSON.parse(localStorage.getItem("savedDesigns")||"{}");o[e]=t,localStorage.setItem("savedDesigns",JSON.stringify(o)),alert(`Design "${e}" saved successfully`)}catch(o){console.error("Error saving design to localStorage:",o),alert("Failed to save design to localStorage")}}loadDesign(e){try{let t=Array.isArray(e)?e:e.elements?e.elements:null;if(!t)throw new Error("Invalid layout structure. Expected an array or an object with an elements property.");this.designerState.elements=[];let o=n=>{n&&n.forEach(s=>{s["data-id"]?s.id=s["data-id"]:s.id=generateUniqueId(),s.elements&&o(s.elements)})};return o(t),this.designerState.elements=t,this.refreshDesigner(),!0}catch(t){return console.error("Error loading design:",t),alert("Failed to load design: "+t.message),!1}}createFloatingToolbar(){this.floatingToolbar&&(this.floatingToolbar.remove(),this.floatingToolbar=null);let e=document.createElement("div");e.className="floating-element-toolbar",e.innerHTML=`
        <button class="toolbar-btn move-up" title="Move Up">\u2191</button>
        <button class="toolbar-btn move-down" title="Move Down">\u2193</button>
        <button class="toolbar-btn move-out" title="Move Out">\u2190</button>
        <button class="toolbar-btn clone-element" title="Clone">\u29C9</button>
        <button class="toolbar-btn delete-element" title="Delete">\xD7</button>
      `,e.querySelector(".move-up").addEventListener("click",t=>{t.stopPropagation(),this.moveElementUp()}),e.querySelector(".move-down").addEventListener("click",t=>{t.stopPropagation(),this.moveElementDown()}),e.querySelector(".move-out").addEventListener("click",t=>{t.stopPropagation(),this.moveElementOut()}),e.querySelector(".clone-element").addEventListener("click",t=>{t.stopPropagation(),this.cloneCurrentElement()}),e.querySelector(".delete-element").addEventListener("click",t=>{t.stopPropagation(),this.deleteCurrentElement()}),this.designerSurface.appendChild(e),this.floatingToolbar=e}setupFloatingToolbar(){this.designerSurface.addEventListener("click",e=>{let t=e.target.closest(".designer-element");if(t){if(e.stopPropagation(),this.currentHoveredElement===t&&this.toolbarVisible){this.hideToolbar();return}this.showToolbarForElement(t);let o=t.getAttribute("data-id");this.selectElement(o)}}),document.addEventListener("click",e=>{!this.floatingToolbar?.contains(e.target)&&!e.target.closest(".designer-element")&&!e.target.closest(".designer-surface")&&this.hideToolbar()})}showToolbarForElement(e){let t=e.getAttribute("data-id"),o=this.findElementById(t);o&&(this.currentHoveredElement=e,this.currentHoveredElementData=o,this.updateToolbarButtonStates(o),this.positionToolbarOnElement(e),this.floatingToolbar.classList.add("visible"),this.toolbarVisible=!0)}hideToolbar(){this.floatingToolbar&&(this.floatingToolbar.classList.remove("visible"),this.toolbarVisible=!1,this.currentHoveredElement=null,this.currentHoveredElementData=null)}positionToolbarOnElement(e){if(!this.floatingToolbar||!e)return;let t=e.getBoundingClientRect(),o=this.designerSurface.getBoundingClientRect(),n=t.right-o.left-207,s=t.top-o.top+5;this.floatingToolbar.style.left=`${n}px`,this.floatingToolbar.style.top=`${s}px`}updateToolbarButtonStates(e){if(!this.floatingToolbar||!e)return;let t=this.floatingToolbar.querySelector(".move-up"),o=this.floatingToolbar.querySelector(".move-down"),n=this.floatingToolbar.querySelector(".move-out"),s=this.canMoveElementUp(e);t.disabled=!s;let a=this.canMoveElementDown(e);o.disabled=!a;let r=this.canMoveElementOut(e);n.disabled=!r}canMoveElementUp(e){let t=this.findParentElement(e.id);return(t?t.elements:this.designerState.elements).findIndex(s=>s.id===e.id)>0}canMoveElementDown(e){let t=this.findParentElement(e.id),o=t?t.elements:this.designerState.elements;return o.findIndex(s=>s.id===e.id)<o.length-1}canMoveElementOut(e){return this.findParentElement(e.id)!==null}moveElementUp(){if(!this.currentHoveredElementData)return;let e=this.currentHoveredElementData,t=this.findParentElement(e.id),o=t?t.elements:this.designerState.elements,n=o.findIndex(s=>s.id===e.id);n>0&&([o[n-1],o[n]]=[o[n],o[n-1]],this.refreshDesigner(),this.hideToolbar())}moveElementDown(){if(!this.currentHoveredElementData)return;let e=this.currentHoveredElementData,t=this.findParentElement(e.id),o=t?t.elements:this.designerState.elements,n=o.findIndex(s=>s.id===e.id);n<o.length-1&&([o[n],o[n+1]]=[o[n+1],o[n]],this.refreshDesigner(),this.hideToolbar())}moveElementOut(){if(!this.currentHoveredElementData)return;let e=this.currentHoveredElementData,t=this.findParentElement(e.id);if(!t)return;let o=this.findParentElement(t.id),n=o?o.elements:this.designerState.elements,s=n.findIndex(a=>a.id===t.id);t.elements=t.elements.filter(a=>a.id!==e.id),n.splice(s+1,0,e),this.refreshDesigner(),this.hideToolbar()}cloneCurrentElement(){if(!this.currentHoveredElementData)return;let e=this.currentHoveredElementData,t=this.deepCloneElement(e),o=this.findParentElement(e.id),n=o?o.elements:this.designerState.elements,s=n.findIndex(a=>a.id===e.id);n.splice(s+1,0,t),this.refreshDesigner(),this.hideToolbar(),setTimeout(()=>{this.selectElement(t.id)},100)}deepCloneElement(e){let t=JSON.parse(JSON.stringify(e));return this.regenerateIds(t),t}regenerateIds(e){let t=this.generateUniqueId();e.id=t,e["data-id"]=t,e.elements&&e.elements.length>0&&e.elements.forEach(o=>{this.regenerateIds(o)})}deleteCurrentElement(){this.currentHoveredElementData&&(this.removeElement(this.currentHoveredElementData.id),this.hideToolbar())}}customElements.define("wc-page-designer",d)}if(!customElements.get("wc-save-button")){class d extends g{static get observedAttributes(){return[]}constructor(){super(),this._items=[];let e=this.querySelector(".wc-save-button");if(e)this.componentElement=e;else{let t=this.getAttribute("id")||"",o=this.getAttribute("save-url")||"",n=this.getAttribute("label")||"Save";this.componentElement=document.createElement("button"),this.componentElement.id=t,this.removeAttribute("id"),this.componentElement.textContent=n,this.componentElement.classList.add("wc-save-button"),this.componentElement.setAttribute("hx-target","#viewport"),this.componentElement.setAttribute("hx-swap","innerHTML transition:true"),this.componentElement.setAttribute("hx-indicator","#content-loader"),this.componentElement.setAttribute("hx-post",o),this.removeAttribute("save-url"),this.componentElement.setAttribute("hx-push-url","true"),this.appendChild(this.componentElement)}}async connectedCallback(){this._applyStyle(),this._wireEvents()}disconnectedCallback(){this._unWireEvents()}_handleAttributeChange(e,t){super._handleAttributeChange(e,t)}_applyStyle(){let e=`
        wc-save-button {
          display: contents;
        }
        .wc-save-button {
        }
        .wc-save-button:hover  {
        }
      `.trim();this.loadStyle("wc-save-button-style",e)}_wireEvents(){super._wireEvents()}_unWireEvents(){super._unWireEvents()}}customElements.define("wc-save-button",d)}if(!customElements.get("wc-save-split-button")){class d extends g{static get observedAttributes(){return["hx-include"]}constructor(){super(),this._items=[];let e=this.querySelector(".wc-save-split-button");e?this.componentElement=e:(this.componentElement=document.createElement("div"),this.componentElement.classList.add("wc-save-split-button"),this.componentElement.setAttribute("hx-target","#viewport"),this.componentElement.setAttribute("hx-swap","innerHTML transition:true"),this.componentElement.setAttribute("hx-indicator","#content-loader"),this.componentElement.setAttribute("hx-push-url","true"),this.componentElement.setAttribute("hx-boost","true"),this.appendChild(this.componentElement),this._createElement())}async connectedCallback(){this._applyStyle(),this._wireEvents()}disconnectedCallback(){this._unWireEvents()}_createElement(){let e=this.getAttribute("id")||"",t=this.getAttribute("method")||"post",o=this.getAttribute("save-url")||"",n=this.getAttribute("save-new-url")||"",s=this.getAttribute("save-return-url")||"",a=this.getAttribute("position-area")||"bottom span-left",r=this.getAttribute("position-try-fallbacks")||"--bottom-right, --bottom-left, --top-right, --top-left, --right, --left",l=this.getAttribute("before-send")||"";l&&(l=`hx-on::before-send="${l}"`);let c=this.getAttribute("hx-include")||"",p=c?`hx-include="${c}"`:"",u=`
        <button type="button" class="save-btn btn"
          hx-${t}="${o}" ${l||""} ${p}
          data-url="${o}">Save</button>
        <div class="dropdown">
          <div class="dropdown-content text-sm">
            <a class="save-new-btn btn w-full"
              hx-${t}="${o}" ${l||""} ${p}
              data-url="${n}">
              Save and Add New
            </a>
            <a class="save-return-btn btn w-full"
              hx-${t}="${o}" ${l||""} ${p}
              data-url="${s}">
              Save and Return
            </a>
          </div>
          <button type="button" class="btn" style="border-left:1px solid var(--component-border-color);">
            <svg class="h-3 w-3 pointer-events-none"
              xmlns="http://www.w3.org/2000/svg" viewBox="0 0 320 512"
              stroke="currentColor" fill="currentColor">
              <path d="M137.4 374.6c12.5 12.5 32.8 12.5 45.3 0l128-128c9.2-9.2 11.9-22.9 6.9-34.9s-16.6-19.8-29.6-19.8L32 192c-12.9 0-24.6 7.8-29.6 19.8s-2.2 25.7 6.9 34.9l128 128z"/>
            </svg>
          </button>
        </div>
      `.trim();this.componentElement.innerHTML=u;let h=this.querySelector(".wc-save-split-button");h.style.anchorName=`--${e}-anchor`;let m=this.querySelector(".dropdown-content");m.style.positionAnchor=`--${e}-anchor`,m.style.positionArea=a,m.style.positionTryFallbacks=r,m.style.minWidth=`${h.offsetWidth}px`}_handleAttributeChange(e,t){e==="hx-include"?this.querySelectorAll(".save-btn, .save-new-btn, .save-return-btn").forEach(n=>{t?n.setAttribute("hx-include",t):n.removeAttribute("hx-include")}):super._handleAttributeChange(e,t)}_handleClick(e){let t=this.getAttribute("method")||"post",o=e.target.classList.contains("save-btn"),n=e.target.dataset.url,s=window.location.hash;t=="post"&&o&&(n=n.replace("create","__id__")),document.body.addEventListener("htmx:configRequest",a=>{a.detail.headers["Wc-Save-Redirect"]=n,s&&o&&sessionStorage.setItem("hash",s)},{once:!0}),document.body.addEventListener("htmx:afterSwap",a=>{let r=sessionStorage.getItem("hash");r&&(window.location.hash=r,sessionStorage.removeItem("hash"))},{once:!0})}_applyStyle(){let e=`
        wc-save-split-button {
          display: contents;
        }
        .wc-save-split-button {
          /* anchor-name: --save-anchor; */
          display: flex;
          flex-direction: row;
        }
        /* Dropdown Button */
        .wc-save-split-button .btn {
          border-right: none;
          outline: none;
          border-radius: 0;
        }

        /* The container <div> - needed to position the dropdown content */
        .wc-save-split-button .dropdown {
          /* display: inline-block; */
        }

        /* Dropdown Content (Hidden by Default) */
        .wc-save-split-button .dropdown-content {
          display: none;
          background-color: var(--button-bg-color);
          border: 1px solid var(--button-border-color);
          border-top: none;
          min-width: 160px;
          z-index: 1;

          position: absolute;
          position-try-fallbacks: --bottom-right, --bottom-left, --top-right, --top-left, --right, --left;
          /*
          position-anchor: --save-anchor;
          position-area: bottom span-left;
          */
        }

        @position-try --bottom-left {
          position-area: bottom span-left;
        }
        @position-try --bottom-right {
          position-area: bottom span-right;
        }
        @position-try --top-left {
          position-area: top span-left;
        }
        @position-try --top-right {
          position-area: top span-right;
        }
        @position-try --right {
          position-area: right;
        }
        @position-try --left {
          position-area: left;
        }

        /* Links inside the dropdown */
        .wc-save-split-button .dropdown-content a {
          color: var(--button-color);
          padding: 12px 16px;
          text-decoration: none;
          display: block;
          cursor: pointer;
        }

        /* Change color of dropdown links on hover */
        .wc-save-split-button .dropdown-content a:hover {
          background-color: var(--button-hover-bg-color);
          color: var(--button-hover-color);
        }

        /* Show the dropdown menu on hover */
        .wc-save-split-button .dropdown:hover > .dropdown-content {
          display: block;
        }
        .wc-save-split-button .dropdown-content:hover ~ button {
          background-color: var(--button-hover-bg-color);
          color: var(--button-hover-color);
        }
      `.trim();this.loadStyle("wc-save-split-button-style",e)}_wireEvents(){super._wireEvents(),this.querySelector("button.save-btn").addEventListener("click",this._handleClick.bind(this)),this.querySelector("a.save-new-btn").addEventListener("click",this._handleClick.bind(this)),this.querySelector("a.save-return-btn").addEventListener("click",this._handleClick.bind(this))}_unWireEvents(){super._unWireEvents(),this.querySelector("button.save-btn").removeEventListener("click",this._handleClick.bind(this)),this.querySelector("a.save-new-btn").removeEventListener("click",this._handleClick.bind(this)),this.querySelector("a.save-return-btn").removeEventListener("click",this._handleClick.bind(this))}}customElements.define("wc-save-split-button",d)}if(!customElements.get("wc-split-button")){class d extends g{static get observedAttributes(){return["btn-id","btn-class","btn-label","split-class"]}constructor(){super(),this._items=[],this.parts=Array.from(this.children);let e=this.querySelector(".wc-split-button");if(e)this.componentElement=e;else{this.componentElement=document.createElement("div"),this.componentElement.classList.add("wc-split-button");let t=this.getAttribute("split-class");t&&t.split(" ").forEach(n=>this.componentElement.classList.add(n)),this.appendChild(this.componentElement),this._createElement()}}async connectedCallback(){this._applyStyle(),this._wireEvents()}disconnectedCallback(){this._unWireEvents()}_createElement(){let e=this.getAttribute("id")||"",t=this.getAttribute("label")||"",o=this.getAttribute("position-area")||"bottom span-right",n=this.getAttribute("position-try-fallbacks")||"--bottom-right, --bottom-left, --top-right, --top-left, --right, --left",s=`
        <button id="${e}" type="button" class="btn">${t}</button>
        <div class="dropdown">
          <div class="dropdown-content text-sm">
          </div>
          <button type="button" class="btn" style="border-left:1px solid var(--component-border-color);">
            <svg class="h-3 w-3 pointer-events-none"
              xmlns="http://www.w3.org/2000/svg" viewBox="0 0 320 512"
              stroke="currentColor" fill="currentColor">
              <path d="M137.4 374.6c12.5 12.5 32.8 12.5 45.3 0l128-128c9.2-9.2 11.9-22.9 6.9-34.9s-16.6-19.8-29.6-19.8L32 192c-12.9 0-24.6 7.8-29.6 19.8s-2.2 25.7 6.9 34.9l128 128z"/>
            </svg>
          </button>
        </div>
      `.trim();this.componentElement.innerHTML=s;let a=this.querySelector(".wc-split-button");a.style.anchorName=`--${e}-anchor`;let r=this.querySelector(".dropdown-content");r.style.positionAnchor=`--${e}-anchor`,r.style.positionArea=o,r.style.positionTryFallbacks=n,r.style.minWidth="calc(100% - 20px",this.parts.forEach(p=>{r.appendChild(p)});let l=this.querySelector(`button#${e}`),c=this.getAttribute("onclick");if(c){let p=new Function(c);l.onclick=p,this.removeAttribute("onclick")}this.removeAttribute("id"),this.removeAttribute("label")}_handleAttributeChange(e,t){super._handleAttributeChange(e,t)}_applyStyle(){let e=`
        wc-split-button {
          display: contents;
        }
        .wc-split-button {
          display: flex;
          flex-direction: row;
        }
        /* Dropdown Button */
        .wc-split-button .btn {
          border-right: none;
          outline: none;
          border-radius: 0;
        }

        /* The container <div> - needed to position the dropdown content */
        .wc-split-button .dropdown {
          /* display: inline-block; */
        }

        /* Dropdown Content (Hidden by Default) */
        .wc-split-button .dropdown-content {
          display: none;
          background-color: var(--button-bg-color);
          border: 1px solid var(--button-border-color);
          border-top: none;
          min-width: 160px;
          z-index: 1;

          position: absolute;
          position-try-fallbacks: --bottom-right, --bottom-left, --top-right, --top-left, --right, --left;
        }

        @position-try --bottom-left {
          position-area: bottom span-left;
        }
        @position-try --bottom-right {
          position-area: bottom span-right;
        }
        @position-try --top-left {
          position-area: top span-left;
        }
        @position-try --top-right {
          position-area: top span-right;
        }
        @position-try --right {
          position-area: right;
        }
        @position-try --left {
          position-area: left;
        }

        /* Links inside the dropdown */
        .wc-split-button .dropdown-content a {
          color: var(--button-color);
          padding: 12px 16px;
          text-decoration: none;
          display: block;
          cursor: pointer;
        }

        /* Change color of dropdown links on hover */
        .wc-split-button .dropdown-content a:hover {
          background-color: var(--button-hover-bg-color);
          color: var(--button-hover-color);
        }

        /* Show the dropdown menu on hover */
        .wc-split-button .dropdown:hover > .dropdown-content {
          display: block;
        }

        /* Change the background color of the dropdown button when the dropdown content is shown */
        .wc-split-button .dropdown-content:hover ~ button {
          background-color: var(--button-hover-bg-color);
          color: var(--button-hover-color);
        }
      `.trim();this.loadStyle("wc-split-button-style",e)}_wireEvents(){super._wireEvents()}_unWireEvents(){super._unWireEvents()}}customElements.define("wc-split-button",d)}var Q=class extends g{static get observedAttributes(){return["id","class","width","push-target","right-side","auto-height","background-color"]}constructor(){super(),this.hasAttribute("right-side")||this.setAttribute("left-side","");let i=this.querySelector(".wc-sidebar");i?this.componentElement=i:(this.componentElement=document.createElement("div"),this.componentElement.classList.add("wc-sidebar"),this.appendChild(this.componentElement))}async connectedCallback(){super.connectedCallback(),this._applyStyle()}disconnectedCallback(){super.disconnectedCallback(),this._unWireEvents()}_handleAttributeChange(i,e){i==="label"||i==="auto-height"||i==="background-color"||i==="push-target"||i==="right-side"||i==="width"||super._handleAttributeChange(i,e)}_render(){if(super._render(),this.querySelector(".wc-sidebar > *")){let e=this.getAttribute("push-target")||"body",t=document.querySelector(e),o=this.hasAttribute("right-side"),n=this.getAttribute("width")||"150px";t&&(o?t.style.marginRight=n:t.style.marginLeft=n)}else this.componentElement.innerHTML="",this._createInnerElement();typeof htmx<"u"&&htmx.process(this)}_createInnerElement(){this.querySelectorAll("wc-sidebar > *:not(.wc-sidebar").forEach(s=>this.componentElement.appendChild(s)),this.hasAttribute("auto-height")?this.componentElement.style.height="auto":this.componentElement.style.height="100%";let t=this.getAttribute("push-target")||"body",o=this.hasAttribute("right-side"),n=this.getAttribute("width")||"150px";if(this.hasAttribute("background-color")){let s=this.getAttribute("background-color");this.componentElement.style.setProperty("--background-color",s)}if(this.componentElement.style.width=n,t){let s=document.querySelector(t);s&&(s.style.setProperty("transition","margin-left 0.5s ease, margin-right 0.5s ease"),o?s.style.marginRight=n:s.style.marginLeft=n)}}_applyStyle(){this.loadStyle("wc-sidebar-style",`
      wc-sidebar {
        --background-color: var(--primary-bg-color);
        display: contents;
      }
      wc-sidebar .wc-sidebar {
        /* height: 100%; */
        position: fixed;
        z-index: 1;
        top: 0;
        background-color: var(--background-color);
        overflow-x: hidden;
        padding-top: 20px;
        padding-bottom: 20px;
      }
      wc-sidebar[left-side] .wc-sidebar {
        left: 0;
      }
      wc-sidebar[right-side] .wc-sidebar {
        right: 0;
      }

      wc-sidebar .wc-sidebar a {
        padding: 6px 8px 6px 16px;
        text-decoration: none;
        font-size: 25px;
        color: var(--text-5);
        display: block;
      }

      wc-sidebar .wc-sidebar a:hover {
        color: var(--text-1);
      }
    `)}_unWireEvents(){super._unWireEvents();let i=this.getAttribute("push-target")||"body",e=document.querySelector(i),t=this.hasAttribute("right-side");e&&(t?e.style.marginRight="0":e.style.marginLeft="0")}};customElements.define("wc-sidebar",Q);if(!customElements.get("wc-sidenav")){class d extends g{static get observedAttributes(){return["id","class","label","width","open-btn-class","open","open-top","open-vertical-text","push","push-target","overlay","background-color","auto-height"]}constructor(){super(),this._boundCloseNav=this._closeNav.bind(this),this._boundToggleNav=this._toggleNav.bind(this),this._boundHandleOpen=this._handleOpen.bind(this),this._boundHandleClose=this._handleClose.bind(this),this._boundHandleToggle=this._handleToggle.bind(this),this.hasAttribute("right-side")||this.setAttribute("left-side","");let e=this.querySelector(".wc-sidenav");if(e)this.componentElement=e;else{let t=this.hasAttribute("open");this.componentElement=document.createElement("div"),this.componentElement.classList.add("wc-sidenav","sidenav"),this.appendChild(this.componentElement),t&&this._openNav({target:null})}}async connectedCallback(){super.connectedCallback(),this._applyStyle(),this._wireEvents()}disconnectedCallback(){super.disconnectedCallback(),this._unWireEvents()}_handleAttributeChange(e,t){e==="label"||e==="auto-height"||e==="background-color"||e==="open-vertical-text"||e==="open-btn-class"||e==="open-top"||e==="open"||e==="overlay"||e==="push-target"||e==="push"||e==="width"||super._handleAttributeChange(e,t)}_render(){super._render(),this.querySelector(".wc-sidenav > *")?(this.querySelector(".closebtn").addEventListener("click",this._boundCloseNav),this.querySelector(".openbtn").addEventListener("click",this._boundToggleNav)):(this.componentElement.innerHTML="",this._createInnerElement()),typeof htmx<"u"&&htmx.process(this)}_createInnerElement(){let e=this.querySelectorAll("wc-sidenav > *:not(.wc-sidenav");this.hasAttribute("auto-height")?this.componentElement.style.height="auto":this.componentElement.style.height="100%";let o=document.createElement("div");if(o.classList.add("overlay","hidden"),this.appendChild(o),this.hasAttribute("background-color")){let u=this.getAttribute("background-color");this.componentElement.style.setProperty("--background-color",u)}let n=this.getAttribute("label")||"Sidenav",s=document.createElement("div"),a=this.getAttribute("close-btn-css")||"primary-bg-color text-sm w-5 h-5 rounded-full";s.setAttribute("class",`closebtn cursor-pointer ${a}`),s.innerHTML="&times;",s.addEventListener("click",this._boundCloseNav),this.componentElement.appendChild(s);let r=document.createElement("div"),l=this.getAttribute("open-btn-css")||"primary-bg-color text-xs px-2 py-3";r.setAttribute("class",`openbtn cursor-pointer ${l}`),r.style.top=this.getAttribute("open-top")||"0",r.addEventListener("click",this._boundToggleNav);let c=document.createElement("span");c.textContent=n,r.appendChild(c),this.appendChild(r),e.forEach(u=>this.componentElement.appendChild(u));let p=this.getAttribute("push-target")||"#viewport";if(p){let u=document.querySelector(p);u&&u.style.setProperty("transition","margin-left 0.5s ease, margin-right 0.5s ease")}}_handleHelper(e,t){let{detail:o}=e,{selector:n}=o,s=Array.isArray(n);typeof n=="string"||s?document.querySelectorAll(n).forEach(r=>{r===this&&(t==="toggle"&&(this.querySelector(".wc-sidenav").classList.contains("open")?t=".closebtn":t=".openbtn"),r?.querySelector(t)?.click())}):n?.querySelector(t)?.click()}_handleOpen(e){this._handleHelper(e,".openbtn")}_handleClose(e){this._handleHelper(e,".closebtn")}_handleToggle(e){this._handleHelper(e,"toggle")}_toggleNav(e){let t=this.querySelector(".wc-sidenav");t&&t.classList.contains("open")?this._closeNav(e):this._openNav(e)}_openNav(e){let t=this.getAttribute("width")||"250px",o=this.getAttribute("push-target")||"#viewport",n=this.querySelector(".wc-sidenav");if(n.classList.add("open"),n.style.width=t,this.hasAttribute("overlay")){let s=this.querySelector(".overlay");s&&(s.classList.add("open"),s.classList.remove("hidden"))}if(this.hasAttribute("push")){let s=this.hasAttribute("right-side");if(o){let a=document.querySelector(o);a&&(s?a.style.marginRight=t:a.style.marginLeft=t)}}}_closeNav(e){let t=this.getAttribute("push-target")||"#viewport",o=this.querySelector(".wc-sidenav");if(o.classList.remove("open"),o.style.width="0",this.hasAttribute("overlay")){let n=this.querySelector(".overlay");n&&(n.classList.remove("open"),n.classList.add("hidden"))}if(this.hasAttribute("push")){let n=this.hasAttribute("right-side");if(t){let s=document.querySelector(t);s&&(n?s.style.marginRight="0":s.style.marginLeft="0")}}}_applyStyle(){this.loadStyle("wc-sidenav-style",`
        wc-sidenav {
          --background-color: var(--primary-bg-color);
          display: contents;
        }
        wc-sidenav .wc-sidenav.sidenav {
          /* height: 100%; */
          width: 0;
          position: fixed;
          z-index: 2;
          top: 0;
          background-color: var(--background-color);
          overflow-x: hidden;
          text-align: center;
          transition: 0.5s;
        }
        wc-sidenav[left-side] .wc-sidenav.sidenav {
          left: 0;
        }
        wc-sidenav[right-side] .wc-sidenav.sidenav {
          right: 0;
        }
        wc-sidenav .wc-sidenav.sidenav a {
          text-decoration: none;
          color: var(--button-color);
          display: block;
          transition: 0.3s;
        }
        /*
        wc-sidenav[left-side] .wc-sidenav.sidenav a {
          padding: 8px 8px 8px 32px;
        }
        wc-sidenav[right-side] .wc-sidenav.sidenav a {
          padding: 8px 32px 8px 8px;
        }
        wc-sidenav .wc-sidenav.sidenav.open a {
          padding: 8px 8px;
        }
        */
        wc-sidenav .wc-sidenav.sidenav a:hover {
          color: var(--button-hover-color);
        }
        wc-sidenav .wc-sidenav.sidenav .closebtn {
          position: absolute;
          top: 5px;
          z-index: 3;
        }
        wc-sidenav[left-side] .wc-sidenav.sidenav .closebtn {
          right: 5px;
        }
        wc-sidenav[right-side] .wc-sidenav.sidenav .closebtn {
          left: 5px;
        }
        wc-sidenav .openbtn {
          position: absolute;
          z-index: 2;
        }
        wc-sidenav[left-side] .openbtn {
          left: 0;
          border-radius: 0 0.375rem 0.375rem 0;
        }
        wc-sidenav[right-side] .openbtn {
          right: 0;
          border-radius: 0.375rem 0 0 0.375rem;
        }
        wc-sidenav .openbtn span {
          writing-mode: vertical-rl;
          display: inline-block;
          /* line-height: 2; */
        }
        wc-sidenav[open-vertical-text] .openbtn span {
          text-orientation: upright;
          letter-spacing: 2px;
        }
        wc-sidenav:not([open-vertical-text]) .openbtn span {
          text-orientation: sideways;
          letter-spacing: 4px;
        }
        wc-sidenav .openbtn:hover {
          background-color: var(--button-hover-bg-color);
        }

        .overlay {
          position: fixed;
          top: 0;
          left: 0;
          width: 100vw;
          height: 100vh;
          background-color: transparent;
          transition: background-color 0.5s ease;
        }
        .overlay.open {
          background-color: rgba(0,0,0,0.6);
          z-index: 1;
        }
      `)}_wireEvents(){super._wireEvents(),document.body.addEventListener("wc-sidenav:open",this._boundHandleOpen),document.body.addEventListener("wc-sidenav:close",this._boundHandleClose),document.body.addEventListener("wc-sidenav:toggle",this._boundHandleToggle)}_unWireEvents(){super._unWireEvents();let e=this.querySelector(".closebtn");e&&e.removeEventListener("click",this._boundCloseNav);let t=this.querySelector(".openbtn");t&&t.removeEventListener("click",this._boundToggleNav),document.body.removeEventListener("wc-sidenav:open",this._boundHandleOpen),document.body.removeEventListener("wc-sidenav:close",this._boundHandleClose),document.body.removeEventListener("wc-sidenav:toggle",this._boundHandleToggle)}}customElements.define("wc-sidenav",d)}if(!customElements.get("wc-slideshow-image")){class d extends g{static get observedAttributes(){return["id","class","url","caption","numbertext"]}constructor(){super();let e=this.querySelector(".wc-slideshow-image");e?this.componentElement=e:(this.componentElement=document.createElement("div"),this.componentElement.classList.add("wc-slideshow-image","slide","fade"),this.appendChild(this.componentElement))}async connectedCallback(){super.connectedCallback(),this._applyStyle()}disconnectedCallback(){super.disconnectedCallback(),this._unWireEvents()}_handleAttributeChange(e,t){if(e==="numbertext"){let o=this.querySelector(".numbertext");o&&(o.textContent=t)}else super._handleAttributeChange(e,t)}_render(){super._render(),this.querySelector(".wc-slideshow-image > *")||(this.componentElement.innerHTML="",this._createInnerElement()),typeof htmx<"u"&&htmx.process(this)}_createInnerElement(){let e=document.createElement("div");e.textContent=this.getAttribute("numbertext")||"",e.classList.add("numbertext");let t=document.createElement("img");t.src=this.getAttribute("url")||"";let o=document.createElement("div");o.textContent=this.getAttribute("caption")||"",o.classList.add("text"),this.componentElement.appendChild(e),this.componentElement.appendChild(t),this.componentElement.appendChild(o)}_applyStyle(){let e=`
        wc-slideshow-image {
          display: contents;
        }

        .wc-slideshow-image {
          position: relative;
        }

        .wc-slideshow-image img {
          max-height: 300px;
          width: 100%;
          height: auto;
          object-fit: cover;
        }
        
        /* Caption text */
        .wc-slideshow-image .text {
          color: #f2f2f2;
          font-size: 15px;
          padding: 8px 12px;
          position: absolute;
          bottom: 8px;
          width: 100%;
          text-align: center;
        }

        /* Number text (1/3 etc) */
        .wc-slideshow-image .numbertext {
          color: #f2f2f2;
          font-size: 12px;
          padding: 8px 12px;
          position: absolute;
          top: 0;
        }      
  `.trim();this.loadStyle("wc-slideshow-image-style",e)}_unWireEvents(){super._unWireEvents()}}customElements.define("wc-slideshow-image",d)}if(!customElements.get("wc-slideshow")){class d extends g{static get observedAttributes(){return["id","class","max-image-height","autoplay","autoplay-interval"]}constructor(){super(),this.slides=[],this.slideshowInterval=null,this.isPaused=!1,this.slideIndex=1,this.childComponentSelector="wc-slideshow-image";let e=this.querySelector(".wc-slideshow");e?this.componentElement=e:(this.componentElement=document.createElement("div"),this.componentElement.classList.add("wc-slideshow","container"),this.appendChild(this.componentElement))}async connectedCallback(){super.connectedCallback(),this._applyStyle(),this._wireEvents()}disconnectedCallback(){super.disconnectedCallback(),this._unWireEvents()}_render(){super._render();let e=this.querySelectorAll("wc-slideshow-image");e.forEach((o,n)=>{o.setAttribute("numbertext",`${n+1} / ${e.length}`),o.querySelectorAll("img").forEach(a=>a.style.maxHeight=this.getAttribute("max-image-height")||"300px")}),this.slides=this.querySelectorAll(".wc-slideshow-image.slide"),this.querySelector(".wc-slideshow > *")?this.slideIndex=parseInt(this.dataset.slideIndex||1):(this.componentElement.innerHTML="",this._createInnerElement())}_createInnerElement(){this.querySelectorAll("wc-slideshow > *:not(.wc-slideshow)").forEach(a=>{this.componentElement.appendChild(a)});let t=document.createElement("a");t.classList.add("prev"),t.textContent="\u276E";let o=document.createElement("a");o.textContent="\u276F",o.classList.add("next");let n=document.createElement("a");n.classList.add("play"),n.textContent="\u25B6";let s=document.createElement("a");s.classList.add("pause"),s.textContent="\u23F8",this.componentElement.appendChild(t),this.componentElement.appendChild(o),this.componentElement.appendChild(n),this.componentElement.appendChild(s)}_handleHelper(e,t="next"){let{detail:o}=e,{selector:n=this}=o,s=Array.isArray(n);typeof n=="string"||s?document.querySelectorAll(n).forEach(r=>{r===this&&(t==="next"?this._nextSlide({target:this}):t==="prev"?this._prevSlide({target:this}):t==="start"?(this.setAttribute("autoplay",""),this.isPaused=!1,this.componentElement.classList.add("is-playing"),this._startSlideshow()):t==="stop"&&(this.removeAttribute("autoplay"),this.isPaused=!0,this.componentElement.classList.remove("is-playing"),clearInterval(this.slideshowInterval)))}):n===this&&(t==="next"?this._nextSlide({target:this}):t==="prev"?this._prevSlide({target:this}):t==="start"?(this.setAttribute("autoplay",""),this.isPaused=!1,this.componentElement.classList.add("is-playing"),this._startSlideshow()):t==="stop"&&(this.removeAttribute("autoplay"),this.isPaused=!0,this.componentElement.classList.remove("is-playing"),clearInterval(this.slideshowInterval)))}_handleNext(e){this._handleHelper(e,"next")}_handlePrev(e){this._handleHelper(e,"prev")}_handleStart(e){this._handleHelper(e,"start")}_handleStop(e){this._handleHelper(e,"stop")}_prevSlide(e){e?.target&&(this.isPaused=!0,this.componentElement.classList.remove("is-playing"),clearInterval(this.slideshowInterval)),this.slideIndex-=1,this._showSlide()}_nextSlide(e){e?.target&&(this.isPaused=!0,this.componentElement.classList.remove("is-playing"),clearInterval(this.slideshowInterval)),this.slideIndex+=1,this._showSlide()}_showSlide(){this.slideIndex>this.slides.length&&(this.slideIndex=1),this.slideIndex<1&&(this.slideIndex=this.slides.length),this.slides.forEach(e=>e.style.display="none"),this.slides[this.slideIndex-1].style.display="block",this.dataset.slideIndex=this.slideIndex}_startSlideshow(){if(this.hasAttribute("autoplay")&&!this.isPaused){let e=parseInt(this.getAttribute("autoplay-interval"))||5e3;this.slideshowInterval=setInterval(()=>this._nextSlide(),e),this.componentElement.classList.add("is-playing")}this._showSlide()}_handleVisibilityChange(){document.hidden?(this.isPaused=!0,this.componentElement.classList.remove("is-playing"),clearInterval(this.slideshowInterval)):(this.isPaused=!1,this._startSlideshow())}_applyStyle(){let e=`
        wc-slideshow {
          display: contents;
        }
        .wc-slideshow {

        }
        .wc-slideshow .play,
        .wc-slideshow .pause {
          cursor: pointer;
          position: absolute;
          top: calc(50% - 36px);
          left: calc(50% - 30px);
          width: auto;
          padding: 16px;
          color: white;
          font-weight: bold;
          font-size: 36px;
          transition: 0.6s ease;
          border-radius: 0 3px 3px 0;
          user-select: none;

          display: none;
        }
        .wc-slideshow.is-playing:hover .pause {
          display: block;
        }
        .wc-slideshow:not(.is-playing):hover .play {
          display: block;
        }
        /* Slideshow container */
        .wc-slideshow.container {
          max-width: 1000px;
          position: relative;
          margin: auto;
        }

        /* Hide the images by default */
        .wc-slideshow .slide {
          display: none;
        }

        /* Next & previous buttons */
        .wc-slideshow .prev,
        .wc-slideshow .next {
          cursor: pointer;
          position: absolute;
          top: 50%;
          width: auto;
          margin-top: -22px;
          padding: 16px;
          color: white;
          font-weight: bold;
          font-size: 18px;
          transition: 0.6s ease;
          border-radius: 0 3px 3px 0;
          user-select: none;
        }

        /* Position the "next button" to the right */
        .wc-slideshow .next {
          right: 16px;
          border-radius: 3px 0 0 3px;
        }

        /* On hover, add a black background color with a little bit see-through */
        .wc-slideshow .prev:hover,
        .wc-slideshow .next:hover {
          background-color: rgba(0,0,0,0.8);
        }

        .wc-slideshow .active {
          background-color: #717171;
        }

        /* Fading animation */
        .wc-slideshow .fade {
          animation-name: slideshow-fade;
          animation-duration: 1.5s;
        }

        @keyframes slideshow-fade {
          from {
            opacity: .4;
          }
          to {
            opacity: 1;
          }
        }
  `.trim();this.loadStyle("wc-slideshow-style",e)}_wireEvents(){super._wireEvents(),!this.hasAttribute("data-wired")&&(this.setAttribute("data-wired",!0),setTimeout(()=>{let t=this.querySelector(".prev"),o=this.querySelector(".next"),n=this.querySelector(".play"),s=this.querySelector(".pause");t.addEventListener("click",this._prevSlide.bind(this)),o.addEventListener("click",this._nextSlide.bind(this)),n.addEventListener("click",this._handleStart.bind(this)),s.addEventListener("click",this._handleStop.bind(this)),this._startSlideshow()},50),document.addEventListener("visibilitychange",this._handleVisibilityChange.bind(this)),document.body.addEventListener("wc-slideshow:next",this._handleNext.bind(this)),document.body.addEventListener("wc-slideshow:prev",this._handlePrev.bind(this)),document.body.addEventListener("wc-slideshow:start",this._handleStart.bind(this)),document.body.addEventListener("wc-slideshow:stop",this._handleStop.bind(this)))}_unWireEvents(){super._unWireEvents(),document.removeEventListener("visibilitychange",this._handleVisibilityChange.bind(this)),document.body.removeEventListener("wc-slideshow:next",this._handleNext.bind(this)),document.body.removeEventListener("wc-slideshow:prev",this._handlePrev.bind(this)),document.body.removeEventListener("wc-slideshow:start",this._handleStart.bind(this)),document.body.removeEventListener("wc-slideshow:stop",this._handleStop.bind(this));let e=this.querySelector(".prev"),t=this.querySelector(".next"),o=this.querySelector(".play"),n=this.querySelector(".pause");e?.removeEventListener("click",this._prevSlide.bind(this)),t?.removeEventListener("click",this._nextSlide.bind(this)),o?.removeEventListener("click",this._handleStart.bind(this)),n?.removeEventListener("click",this._handleStop.bind(this))}}customElements.define("wc-slideshow",d)}var ee=class extends g{static get observedAttributes(){return["id","class","label","active"]}constructor(){super();let i=this.querySelector(".wc-tab-item");i?this.componentElement=i:(this.componentElement=document.createElement("div"),this.componentElement.classList.add("wc-tab-item"),this.appendChild(this.componentElement))}async connectedCallback(){super.connectedCallback(),this._applyStyle()}disconnectedCallback(){super.disconnectedCallback(),this._unWireEvents()}_handleAttributeChange(i,e){i==="test"||super._handleAttributeChange(i,e)}_render(){super._render(),this.querySelector(".wc-tab-item > *")||(this.componentElement.innerHTML="",this._createInnerElement()),typeof htmx<"u"&&htmx.process(this)}_createInnerElement(){Array.from(this.children).filter(e=>!e.matches("wc-tab-item")&&!e.matches(".wc-tab-item")).forEach(e=>{this.componentElement.appendChild(e)})}_applyStyle(){let i=`
      wc-tab-item {
        display: contents;
      }
      .wc-tab-item {
        display: flex;
        flex-direction: column;
        flex: 1 1 0%;
        min-height: 0;
        min-width: 0;
        
        position: relative;
      }
    `.trim();this.loadStyle("wc-tab-item-style",i)}_unWireEvents(){super._unWireEvents()}};customElements.define("wc-tab-item",ee);var te=class extends g{static get observedAttributes(){return["id","class","animate","vertical"]}constructor(){super(),this.childComponentSelector="wc-tab-item",this.nestingLevel=0;let i=this.parentElement;for(;i;){let t=i.closest("wc-tab");if(t)this.nestingLevel++,i=t.parentElement;else break}let e=this.querySelector(".wc-tab");e?this.componentElement=e:(this.componentElement=document.createElement("div"),this.componentElement.classList.add("wc-tab"),this.appendChild(this.componentElement)),this.nestingLevel>0&&this.setAttribute("data-nesting-level",this.nestingLevel)}async connectedCallback(){super.connectedCallback(),this._applyStyle(),this._wireEvents()}disconnectedCallback(){super.disconnectedCallback(),this._unWireEvents()}_handleAttributeChange(i,e){i==="animate"||i==="vertical"||super._handleAttributeChange(i,e)}_render(){super._render(),this.querySelector(".wc-tab > *")?this.querySelectorAll(".tab-link").forEach(t=>t.addEventListener("click",this._handleClick.bind(this))):(this.componentElement.innerHTML="",this._createInnerElement()),typeof htmx<"u"&&htmx.process(this),this._restoreTabsWhenReady()}_createInnerElement(){let i=document.createElement("div");i.classList.add("tab-nav");let e=document.createElement("div");e.classList.add("tab-body");let t=Array.from(this.children).filter(o=>!o.matches("wc-tab")&&!o.matches(".wc-tab"));t.forEach((o,n)=>{let s=o.querySelector(".wc-tab-item"),a=document.createElement("button");a.type="button",a.classList.add("tab-link"),a.addEventListener("click",this._handleClick.bind(this)),s?.classList.contains("active")&&a.classList.add("active"),a.textContent=o.getAttribute("label")||`Label ${n+1}`,a.dataset.label=o.getAttribute("label")||`Label ${n+1}`,i.appendChild(a)}),t.forEach(o=>{e.appendChild(o)}),this.componentElement.appendChild(i),this.componentElement.appendChild(e)}_handleHelper(i,e="click"){let{detail:t}=i,{selector:o,subSelector:n}=t,s=Array.isArray(o);typeof o=="string"||s?document.querySelectorAll(o).forEach(r=>{r===this&&e==="click"&&this.querySelector(n)?.click()}):o===this&&e==="click"&&this.querySelector(n)?.click()}_handleOnClick(i){this._handleHelper(i,"click")}_handleClick(i){i.stopPropagation(),i.preventDefault();let{target:e}=i;e.closest(".wc-tab").querySelectorAll(".active").forEach(l=>{l.closest("wc-tab")==this&&l.classList.remove("active")}),e.classList.add("active");let n=e.textContent,s=this.querySelector(`.wc-tab-item[label='${n}']`);s.classList.add("active");let a={detail:{label:n}},r=new CustomEvent("tabchange",a);s.dispatchEvent(r),location.hash=this._buildActiveTabStringFromRoot(e)}_buildActiveTabStringFromRoot(i){function e(s){let a=s.closest("wc-tab"),r=a;for(;a;){let l=a.parentElement?.closest("wc-tab");if(!l){r=a;break}a=l}return r}function t(s){let a=[],r=s.querySelector(":scope > .wc-tab > .tab-nav");if(r){let c=Array.from(r.querySelectorAll(":scope > button.active"));for(let p of c)a.push(p.textContent.trim())}let l=Array.from(s.querySelectorAll(":scope > .wc-tab > .tab-body > wc-tab-item > .wc-tab-item.active > wc-tab"));for(let c of l)a=a.concat(t(c));return a}let o=e(i);return o?t(o).join("+"):""}async _restoreTabsWhenReady(){try{let e=Array.from(this.querySelectorAll("*")).filter(t=>t.tagName.toLowerCase().startsWith("wc-"));await Promise.all(e.map(t=>new Promise(o=>{if(t._isConnected||t.isConnected)o();else{let n=setInterval(()=>{(t._isConnected||t.isConnected)&&(clearInterval(n),o())},50);setTimeout(()=>{clearInterval(n),o()},500)}}))),setTimeout(()=>{this._restoreTabsFromHash()},250)}catch(i){console.warn("Error waiting for components:",i),this._restoreTabsFromHash()}}_restoreTabsFromHash(){location.hash.slice(1).split("+").forEach(e=>{this.querySelector(`button[data-label="${decodeURI(e)}"]`)?.click()})}_applyStyle(){let i=`
      wc-tab {
        display: contents;
      }
      wc-tab .wc-tab {
        position: relative;
        overflow: hidden;
      }
      wc-tab[vertical] .wc-tab {
        display: flex;
        flex-direction: row;
      }
      wc-tab .wc-tab .tab-nav {
        position: relative;
        display: flex;
        flex-direction: row;
        overflow: hidden;
      }
      wc-tab[vertical] .wc-tab .tab-nav {
        flex-direction: column;
        overflow: initial;
        border-right: none;
      }
      wc-tab .wc-tab .tab-nav .tab-link {
        background-color: transparent;
        border: none;
        border-bottom: 1px solid var(--card-bg-color);
        border-radius: 0;
        outline: none;
        cursor: pointer;
        padding: 10px 16px;
        user-select: none;
        transition: 0.3s;
      }
      wc-tab .wc-tab .tab-nav .tab-link.active,
      wc-tab .wc-tab .tab-nav .tab-link:hover {
        border-top-left-radius: .5rem;
        border-top-right-radius: .5rem;
        border-bottom: 1px solid var(--card-bg-color);
        background-color: var(--card-bg-color);
      }

      wc-tab .wc-tab .tab-body {
        display: flex;
        flex-direction: column;
        flex: 1 1 0%;
        min-height: 0;
        background-color: var(--card-bg-color);
      }
      wc-tab[vertical] .wc-tab .tab-body {
        border-top: 1px solid var(--card-border-color);
      }
      wc-tab .wc-tab .tab-body wc-tab-item .wc-tab-item {
        display: none;
      }
      wc-tab[animate] .wc-tab .tab-body wc-tab-item .wc-tab-item {
        animation: tab-fade 1s;
      }
      wc-tab .wc-tab .tab-body wc-tab-item .wc-tab-item.active {
        display: flex;
      }

      /* Add styling for nested tabs */
      wc-tab .wc-tab .tab-body wc-tab {
        margin-top: 1rem;
      }

      /* Nested tab color variations - automatically adjust colors based on nesting level */
      /* Darken background for contrast without borders */
      wc-tab[data-nesting-level="1"] .wc-tab .tab-body {
        background-color: color-mix(in srgb, var(--card-bg-color) 85%, #000 15%);
      }
      wc-tab[data-nesting-level="1"] .wc-tab .tab-nav .tab-link {
        border-bottom-color: color-mix(in srgb, var(--card-bg-color) 85%, #000 15%);
      }
      wc-tab[data-nesting-level="1"] .wc-tab .tab-nav .tab-link.active,
      wc-tab[data-nesting-level="1"] .wc-tab .tab-nav .tab-link:hover {
        background-color: color-mix(in srgb, var(--card-bg-color) 85%, #000 15%);
        border-bottom-color: color-mix(in srgb, var(--card-bg-color) 85%, #000 15%);
      }

      wc-tab[data-nesting-level="2"] .wc-tab .tab-body {
        background-color: color-mix(in srgb, var(--card-bg-color) 70%, #000 30%);
      }
      wc-tab[data-nesting-level="2"] .wc-tab .tab-nav .tab-link {
        border-bottom-color: color-mix(in srgb, var(--card-bg-color) 70%, #000 30%);
      }
      wc-tab[data-nesting-level="2"] .wc-tab .tab-nav .tab-link.active,
      wc-tab[data-nesting-level="2"] .wc-tab .tab-nav .tab-link:hover {
        background-color: color-mix(in srgb, var(--card-bg-color) 70%, #000 30%);
        border-bottom-color: color-mix(in srgb, var(--card-bg-color) 70%, #000 30%);
      }

      @keyframes tab-fade {
        from {
          opacity: 0;
        }
        to {
          opacity: 1;
        }
      }
    `.trim();this.loadStyle("wc-tab-style",i)}_wireEvents(){super._wireEvents(),document.body.addEventListener("wc-tab:click",this._handleOnClick.bind(this))}_unWireEvents(){super._unWireEvents(),document.body.removeEventListener("wc-tab:click",this._handleOnClick.bind(this)),this.querySelectorAll(".tab-link").forEach(e=>e.removeEventListener("click",this._handleClick.bind(this)))}};customElements.define("wc-tab",te);if(!customElements.get("wc-tabulator-column")){class d extends HTMLElement{constructor(){super(),this.classList.add("contents")}connectedCallback(){}}customElements.define("wc-tabulator-column",d)}if(!customElements.get("wc-tabulator-func")){class d extends HTMLElement{constructor(){super(),this.classList.add("contents")}connectedCallback(){}}customElements.define("wc-tabulator-func",d)}if(!customElements.get("wc-tabulator-row-menu")){class d extends HTMLElement{constructor(){super(),this.classList.add("contents")}connectedCallback(){}}customElements.define("wc-tabulator-row-menu",d)}if(!customElements.get("wc-tabulator")){class d extends g{static get observedAttributes(){return["id","class"]}icons={eye:{viewport:"0 0 640 512",d:"M117.2 136C160.3 96 217.6 64 288 64s127.7 32 170.8 72c43.1 40 71.9 88 85.2 120c-13.3 32-42.1 80-85.2 120c-43.1 40-100.4 72-170.8 72s-127.7-32-170.8-72C74.1 336 45.3 288 32 256c13.3-32 42.1-80 85.2-120zM288 32c-80.8 0-145.5 36.8-192.6 80.6C48.6 156 17.3 208 2.5 243.7c-3.3 7.9-3.3 16.7 0 24.6C17.3 304 48.6 356 95.4 399.4C142.5 443.2 207.2 480 288 480s145.5-36.8 192.6-80.6c46.8-43.5 78.1-95.4 93-131.1c3.3-7.9 3.3-16.7 0-24.6c-14.9-35.7-46.2-87.7-93-131.1C433.5 68.8 368.8 32 288 32zM192 256a96 96 0 1 1 192 0 96 96 0 1 1 -192 0zm224 0a128 128 0 1 0 -256 0 128 128 0 1 0 256 0z"},eyeSlash:{viewport:"0 0 640 512",d:"M38.8 5.1C28.4-3.1 13.3-1.2 5.1 9.2S-1.2 34.7 9.2 42.9l592 464c10.4 8.2 25.5 6.3 33.7-4.1s6.3-25.5-4.1-33.7L525.6 386.7c39.6-40.6 66.4-86.1 79.9-118.4c3.3-7.9 3.3-16.7 0-24.6c-14.9-35.7-46.2-87.7-93-131.1C465.5 68.8 400.8 32 320 32c-68.2 0-125 26.3-169.3 60.8L38.8 5.1zm151 118.3C226 97.7 269.5 80 320 80c65.2 0 118.8 29.6 159.9 67.7C518.4 183.5 545 226 558.6 256c-12.6 28-36.6 66.8-70.9 100.9l-53.8-42.2c9.1-17.6 14.2-37.5 14.2-58.7c0-70.7-57.3-128-128-128c-32.2 0-61.7 11.9-84.2 31.5l-46.1-36.1zM394.9 284.2l-81.5-63.9c4.2-8.5 6.6-18.2 6.6-28.3c0-5.5-.7-10.9-2-16c.7 0 1.3 0 2 0c44.2 0 80 35.8 80 80c0 9.9-1.8 19.4-5.1 28.2zm9.4 130.3C378.8 425.4 350.7 432 320 432c-65.2 0-118.8-29.6-159.9-67.7C121.6 328.5 95 286 81.4 256c8.3-18.4 21.5-41.5 39.4-64.8L83.1 161.5C60.3 191.2 44 220.8 34.5 243.7c-3.3 7.9-3.3 16.7 0 24.6c14.9 35.7 46.2 87.7 93 131.1C174.5 443.2 239.2 480 320 480c47.8 0 89.9-12.9 126.2-32.5l-41.9-33zM192 256c0 70.7 57.3 128 128 128c13.3 0 26.1-2 38.2-5.8L302 334c-23.5-5.4-43.1-21.2-53.7-42.3l-56.1-44.2c-.2 2.8-.3 5.6-.3 8.5z"},square:{viewport:"0 0 448 512",d:"M384 80c8.8 0 16 7.2 16 16l0 320c0 8.8-7.2 16-16 16L64 432c-8.8 0-16-7.2-16-16L48 96c0-8.8 7.2-16 16-16l320 0zM64 32C28.7 32 0 60.7 0 96L0 416c0 35.3 28.7 64 64 64l320 0c35.3 0 64-28.7 64-64l0-320c0-35.3-28.7-64-64-64L64 32z"},squareCheck:{viewport:"0 0 448 512",d:"M64 80c-8.8 0-16 7.2-16 16l0 320c0 8.8 7.2 16 16 16l320 0c8.8 0 16-7.2 16-16l0-320c0-8.8-7.2-16-16-16L64 80zM0 96C0 60.7 28.7 32 64 32l320 0c35.3 0 64 28.7 64 64l0 320c0 35.3-28.7 64-64 64L64 480c-35.3 0-64-28.7-64-64L0 96zM337 209L209 337c-9.4 9.4-24.6 9.4-33.9 0l-64-64c-9.4-9.4-9.4-24.6 0-33.9s24.6-9.4 33.9 0l47 47L303 175c9.4-9.4 24.6-9.4 33.9 0s9.4 24.6 0 33.9z"},remove:{viewport:"0 0 448 512",d:"M177.1 48l93.7 0c2.7 0 5.2 1.3 6.7 3.6l19 28.4-145 0 19-28.4c1.5-2.2 4-3.6 6.7-3.6zM354.2 80L317.5 24.9C307.1 9.4 289.6 0 270.9 0L177.1 0c-18.7 0-36.2 9.4-46.6 24.9L93.8 80 80.1 80 32 80l-8 0C10.7 80 0 90.7 0 104s10.7 24 24 24l11.6 0L59.6 452.7c2.5 33.4 30.3 59.3 63.8 59.3l201.1 0c33.5 0 61.3-25.9 63.8-59.3L412.4 128l11.6 0c13.3 0 24-10.7 24-24s-10.7-24-24-24l-8 0-48.1 0-13.7 0zm10.1 48L340.5 449.2c-.6 8.4-7.6 14.8-16 14.8l-201.1 0c-8.4 0-15.3-6.5-16-14.8L83.7 128l280.6 0z"},clone:{viewport:"0 0 512 512",d:"M288 448L64 448l0-224 64 0 0-64-64 0c-35.3 0-64 28.7-64 64L0 448c0 35.3 28.7 64 64 64l224 0c35.3 0 64-28.7 64-64l0-64-64 0 0 64zm-64-96l224 0c35.3 0 64-28.7 64-64l0-224c0-35.3-28.7-64-64-64L224 0c-35.3 0-64 28.7-64 64l0 224c0 35.3 28.7 64 64 64z"},check:{viewport:"0 0 448 512",d:"M438.6 105.4c12.5 12.5 12.5 32.8 0 45.3l-256 256c-12.5 12.5-32.8 12.5-45.3 0l-128-128c-12.5-12.5-12.5-32.8 0-45.3s32.8-12.5 45.3 0L160 338.7 393.4 105.4c12.5-12.5 32.8-12.5 45.3 0z"},checkDouble:{viewport:"0 0 448 512",d:"M337 81c9.4-9.4 9.4-24.6 0-33.9s-24.6-9.4-33.9 0l-143 143L97 127c-9.4-9.4-24.6-9.4-33.9 0s-9.4 24.6 0 33.9l80 80c9.4 9.4 24.6 9.4 33.9 0L337 81zM441 201c9.4-9.4 9.4-24.6 0-33.9s-24.6-9.4-33.9 0l-247 247L41 295c-9.4-9.4-24.6-9.4-33.9 0s-9.4 24.6 0 33.9L143 465c9.4 9.4 24.6 9.4 33.9 0L441 201z"},listCheck:{viewport:"0 0 512 512",d:"M156.3 58.2c5.7-6.8 4.7-16.9-2-22.5s-16.9-4.7-22.5 2L62.9 120.3 27.3 84.7c-6.2-6.2-16.4-6.2-22.6 0s-6.2 16.4 0 22.6l48 48c3.2 3.2 7.5 4.9 12 4.7s8.7-2.3 11.6-5.7l80-96zm0 160c5.7-6.8 4.7-16.9-2-22.5s-16.9-4.7-22.5 2L62.9 280.3 27.3 244.7c-6.2-6.2-16.4-6.2-22.6 0s-6.2 16.4 0 22.6l48 48c3.2 3.2 7.5 4.9 12 4.7s8.7-2.3 11.6-5.7l80-96zM192 96c0 8.8 7.2 16 16 16l288 0c8.8 0 16-7.2 16-16s-7.2-16-16-16L208 80c-8.8 0-16 7.2-16 16zm0 160c0 8.8 7.2 16 16 16l288 0c8.8 0 16-7.2 16-16s-7.2-16-16-16l-288 0c-8.8 0-16 7.2-16 16zM160 416c0 8.8 7.2 16 16 16l320 0c8.8 0 16-7.2 16-16s-7.2-16-16-16l-320 0c-8.8 0-16 7.2-16 16zm-64 0a32 32 0 1 0 -64 0 32 32 0 1 0 64 0z"},list:{viewport:"0 0 512 512",d:"M40 48C26.7 48 16 58.7 16 72l0 48c0 13.3 10.7 24 24 24l48 0c13.3 0 24-10.7 24-24l0-48c0-13.3-10.7-24-24-24L40 48zM184 72c-13.3 0-24 10.7-24 24s10.7 24 24 24l304 0c13.3 0 24-10.7 24-24s-10.7-24-24-24L184 72zm0 160c-13.3 0-24 10.7-24 24s10.7 24 24 24l304 0c13.3 0 24-10.7 24-24s-10.7-24-24-24l-304 0zm0 160c-13.3 0-24 10.7-24 24s10.7 24 24 24l304 0c13.3 0 24-10.7 24-24s-10.7-24-24-24l-304 0zM16 232l0 48c0 13.3 10.7 24 24 24l48 0c13.3 0 24-10.7 24-24l0-48c0-13.3-10.7-24-24-24l-48 0c-13.3 0-24 10.7-24 24zM40 368c-13.3 0-24 10.7-24 24l0 48c0 13.3 10.7 24 24 24l48 0c13.3 0 24-10.7 24-24l0-48c0-13.3-10.7-24-24-24l-48 0z"},xmark:{viewport:"0 0 384 512",d:"M342.6 150.6c12.5-12.5 12.5-32.8 0-45.3s-32.8-12.5-45.3 0L192 210.7 86.6 105.4c-12.5-12.5-32.8-12.5-45.3 0s-12.5 32.8 0 45.3L146.7 256 41.4 361.4c-12.5 12.5-12.5 32.8 0 45.3s32.8 12.5 45.3 0L192 301.3 297.4 406.6c12.5 12.5 32.8 12.5 45.3 0s12.5-32.8 0-45.3L237.3 256 342.6 150.6z"},download:{viewport:"0 0 512 512",d:"M280 24c0-13.3-10.7-24-24-24s-24 10.7-24 24l0 270.1-95-95c-9.4-9.4-24.6-9.4-33.9 0s-9.4 24.6 0 33.9L239 369c9.4 9.4 24.6 9.4 33.9 0L409 233c9.4-9.4 9.4-24.6 0-33.9s-24.6-9.4-33.9 0l-95 95L280 24zM128.8 304L64 304c-35.3 0-64 28.7-64 64l0 80c0 35.3 28.7 64 64 64l384 0c35.3 0 64-28.7 64-64l0-80c0-35.3-28.7-64-64-64l-64.8 0-48 48L448 352c8.8 0 16 7.2 16 16l0 80c0 8.8-7.2 16-16 16L64 464c-8.8 0-16-7.2-16-16l0-80c0-8.8 7.2-16 16-16l112.8 0-48-48zM432 408a24 24 0 1 0 -48 0 24 24 0 1 0 48 0z"}};funcs={};rowMenus=[];rowMenu=[{label:this.createMenuLabel("Select All Rows",this.icons.listCheck),action:(e,t)=>{t.getTable().selectRow()}},{label:this.createMenuLabel("Un-Select Rows",this.icons.list),action:(e,t)=>{t.getTable().deselectRow()}},{label:this.createMenuLabel("Select Row",this.icons.check),action:(e,t)=>{t.select()}},{label:this.createMenuLabel("Un-Select Row",this.icons.xmark),action:(e,t)=>{t.deselect()}},{separator:!0},{label:this.createMenuLabel("Delete Row",this.icons.remove),action:(e,t)=>{wc.Prompt.question({title:"Are you sure?",text:"This record will be deleted. Are you sure?",callback:o=>{this.funcs.onDelete&&this.funcs.onDelete(t,o)}})}},{label:this.createMenuLabel("Clone Row",this.icons.clone),action:(e,t)=>{let o={title:"Clone Record(s)",icon:"info",focusConfirm:!1,template:"template#clone-template",didOpen:()=>{let n=document.querySelector(".swal2-container");n&&(htmx.process(n),_hyperscript.processNode(n))},callback:n=>{this.funcs.onClone&&this.funcs.onClone(t,n)}};wc.Prompt.fire(o)}},{separator:!0},{label:this.createMenuLabel("Download Table",this.icons.download),action:(e,t)=>{wc.Prompt.notify({icon:"info",title:"Download Format?",text:"Please select the format:",input:"select",inputPlaceholder:"Select a format",inputOptions:{csv:"CSV",json:"JSON",html:"HTML",pdf:"PDF",xlsx:"XLSX"},callback:o=>{let n=t.getTable();switch(o){case"csv":n.download("csv","data.csv");break;case"json":n.download("json","data.json");break;case"html":n.download("html","data.html");break;case"pdf":n.download("pdf","data.pdf");break;case"xlsx":n.download("xlsx","data.xlsx",{});break}wc.Prompt.toast({title:"Download in progress...",type:"success"})}})}}];constructor(){super(),this.table=null,this._internals=this.attachInternals();let e=this.querySelector(".wc-tabulator");e?this.componentElement=e:(this.componentElement=document.createElement("div"),this.componentElement.classList.add("wc-tabulator"),this.componentElement.id=this.getAttribute("id")||"wc-tabulator",this.appendChild(this.componentElement))}async connectedCallback(){super.connectedCallback(),this._applyStyle()}disconnectedCallback(){super.disconnectedCallback(),this._unWireEvents()}async _handleAttributeChange(e,t){super._handleAttributeChange(e,t)}_render(){super._render(),this.querySelector(".wc-tabulator > *")||(this.componentElement.innerHTML="",this._createInnerElement())}async _createInnerElement(){let e=this.hasAttribute("pagination"),t=this.getAttribute("pagination-size"),o=this.getAttribute("pagination-counter"),n=this.getAttribute("movable-columns"),s=this.getAttribute("resizable-columns"),a=this.getAttribute("resizable-column-guide"),r=this.getAttribute("movable-rows"),l=this.getAttribute("row-header"),c=this.getAttribute("row-height"),p=this.getAttribute("row-formatter"),u=this.getAttribute("resizable-rows"),h=this.getAttribute("resizable-row-guide"),m=this.getAttribute("frozen-rows"),b=this.getAttribute("persistence"),f=this.getAttribute("header-visible"),v=this.getAttribute("row-context-menu"),E=this.getAttribute("placeholder"),x=this.getAttribute("selectable-rows"),C=this.getAttribute("col-field-formatter")||"{}",T=this.getAttribute("responsive-layout"),M=this.getAttribute("group-by"),R=this.getAttribute("initial-filter"),D=this.getAttribute("initial-sort"),B=this.getAttribute("row-click"),H=this.getAttribute("row-selected"),$=this.getAttribute("row-deselected");if(C){let _=JSON.parse(C);_&&_.params&&_.params.url&&(_.params.url=this.resolveFormatter(_.params,_.params.url)),_&&_.formatter&&_.params&&(_.formatter=this.resolveFormatter(_.params,_.formatter)),this.colFieldFormatter=_}this.getFuncs(),this.getRowMenu();let y={columns:this.getColumnsConfig(),layout:this.getAttribute("layout")||"fitData",filterMode:"remote",sortMode:"remote",ajaxURL:this.getAttribute("ajax-url")||"",ajaxURLGenerator:this.getAjaxURLGenerator.bind(this),ajaxConfig:this.getAjaxConfig(),ajaxResponse:this.handleAjaxResponse.bind(this)};if(e&&(y.pagination=e),y.pagination&&(y.paginationMode="remote",t?y.paginationSize=parseInt(t)||10:y.paginationSize=10),o&&(y.paginationCounter=o),n&&(y.movableColumns=n.toLowerCase()=="true"),s&&(y.resizableColumns=s.toLowerCase()=="true"),a&&(y.resizableColumnGuide=a.toLowerCase()=="true"),r&&(y.movableRows=r.toLowerCase()=="true"),l){let _=JSON.parse(l);_.cellClick&&(_.cellClick=this.resolveFunc(_.cellClick),y.rowHeader=_)}p&&(y.rowFormatter=this.resolveRowFormatter(p)),c&&(y.rowHeight=parseInt(c)),u&&(y.resizableRows=u.toLowerCase()=="true"),h&&(y.resizableRowGuide=h.toLowerCase()=="true"),m&&(y.frozenRows=parseInt(m)),b&&(y.persistence=b.toLowerCase()=="true"),y.persistence&&(y.persistenceID=container.id),f&&(y.headerVisible=f.toLowerCase()=="true"),v&&v=="rowContextMenu"&&(y.rowContextMenu=this.rowMenu),E&&(y.placeholder=E),x&&(isNaN(parseInt(x))?y.selectableRows=x.toLowerCase()=="true":y.selectableRows=parseInt(x)),M&&(y.groupBy=M),T&&(y.responsiveLayout=T),R&&(y.initialFilter=JSON.parse(R),this.initialFilter=y.initialFilter),D&&(y.initialSort=JSON.parse(D),this.initialSort=y.initialSort),B&&(this.rowClick=this.resolveFunc(B)),H&&(this.rowSelected=this.resolveFunc(H)),$&&(this.rowDeselected=this.resolveFunc($)),await this.renderTabulator(y)}async renderTabulator(e){await Promise.all([this.loadScript("https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"),this.loadScript("https://unpkg.com/jspdf-autotable@3.8.4/dist/jspdf.plugin.autotable.js"),this.loadScript("https://cdn.sheetjs.com/xlsx-0.20.3/package/dist/xlsx.full.min.js"),this.loadScript("https://cdn.jsdelivr.net/npm/luxon@2.3.1/build/global/luxon.min.js"),this.loadCSS("https://unpkg.com/tabulator-tables@6.3.0/dist/css/tabulator.min.css"),this.loadLibrary("https://unpkg.com/tabulator-tables@6.3.0/dist/js/tabulator.min.js","Tabulator")]),this.table=new Tabulator(this.componentElement,e),this.table.on("tableBuilt",async()=>{"onInit"in this.funcs&&this.funcs.onInit(this.table),wc.EventHub.broadcast("wc-tabulator:ready",[],""),wc.EventHub.broadcast("wc-tabulator-ready",[],""),typeof htmx<"u"&&(await W(1e3),htmx.process(this))}),"onCellEdited"in this.funcs&&this.table.on("cellEdited",this.funcs.onCellEdited.bind(this)),"onCellDblClick"in this.funcs&&this.table.on("cellDblClick",this.funcs.onCellDblClick.bind(this)),this.rowClick&&this.table.on("rowClick",this.rowClick.bind(this)),this.rowSelected&&this.table.on("rowSelected",this.rowSelected.bind(this)),this.rowDeselected&&this.table.on("rowDeselected",this.rowDeselected.bind(this)),this.table.on("pageLoaded",o=>{typeof htmx<"u"&&setTimeout(()=>{htmx.process(this)},10)});let t=!1;this.table.on("dataFiltering",o=>{})}getFuncs(){this.querySelectorAll("wc-tabulator-func").forEach(t=>{let o=t.getAttribute("name"),n=t.textContent,s=new Function(`return (${n})`)();this.funcs[o]=s,t.innerHTML=""})}getRowMenu(){this.querySelectorAll("wc-tabulator-row-menu").forEach(t=>{let o=t.getAttribute("order"),n=t.hasAttribute("separator"),s={};if(n)s={separator:!0,order:o};else{let a=t.getAttribute("label"),r=t.getAttribute("icon"),l=t.textContent,c=new Function(`return (${l})`)();s={label:this.createMenuLabel(a,this.icons[r]),action:c,order:o}}t.innerHTML="",this.rowMenus.push(s)}),this.rowMenus.forEach(t=>{t.order!==null&&!isNaN(t.order)&&t.order>=0?this.rowMenu.splice(t.order,0,t):this.rowMenu.push(t)})}getColumnsConfig(){let e=[];return this.querySelectorAll("wc-tabulator-column").forEach(o=>{let n=o.getAttribute("field"),s=o.getAttribute("title")||n,a=o.getAttribute("width"),r=o.getAttribute("width-grow"),l=o.getAttribute("width-shrink"),c=o.getAttribute("min-width"),p=o.getAttribute("max-width"),u=o.getAttribute("max-initial-width"),h=o.getAttribute("resizable"),m=o.getAttribute("editable"),b=o.getAttribute("frozen"),f=o.getAttribute("responsive"),v=o.getAttribute("tooltip"),E=o.getAttribute("css-class"),x=o.getAttribute("row-handle"),C=o.getAttribute("html-output"),T=o.getAttribute("print"),M=o.getAttribute("clipboard"),R=o.getAttribute("title-formatter"),D=o.getAttribute("formatter"),B=o.getAttribute("formatter-params"),H=o.getAttribute("hoz-align"),$=o.getAttribute("vert-align")||"middle",y=o.getAttribute("header-hoz-align"),_=o.getAttribute("visible"),pe=o.getAttribute("header-sort"),ue=o.getAttribute("header-sort-starting-dir"),he=o.getAttribute("header-sort-tristate"),me=o.getAttribute("sorter"),be=o.getAttribute("sorter-params"),ge=o.getAttribute("header-filter"),fe=o.getAttribute("header-filter-params"),we=o.getAttribute("header-filter-placeholder"),ye=o.getAttribute("header-filter-func"),ve=o.getAttribute("header-menu"),O=o.getAttribute("editor"),Ee=o.getAttribute("editor-params"),xe=o.getAttribute("cell-click"),_e=o.getAttribute("bottom-calc"),Ce=o.getAttribute("bottom-calc-params"),ke=o.getAttribute("top-calc"),Se=o.getAttribute("top-calc-params"),w={field:n,title:s};if(a&&(w.width=a),r&&(w.widthGrow=parseInt(r)),l&&(w.widthShrink=parseInt(l)),c&&(w.minWidth=c),p&&(w.maxWidth=p),u&&(w.maxInitialWidth=u),h&&(w.resizable=h.toLowerCase()=="true"),m&&(w.editable=m.toLowerCase()=="true"),m&&(m.toLowerCase()=="true"||m.toLowerCase()=="false"?w.editable=m.toLowerCase()=="true":w.editable=this.resolveFunc(m)),b&&(w.frozen=b.toLowerCase()=="true"),f&&(w.responsive=parseInt(f)),v&&(w.tooltip=v),E&&(w.cssClass=E),x&&(w.rowHandle=x.toLowerCase()=="true"),C&&(w.htmlOutput=C),T&&(w.print=T.toLowerCase()=="true"),M&&(w.clipboard=M.toLowerCase()=="true"),pe&&(w.headerSort=pe.toLowerCase()=="true"),ue&&(w.headerSortStartingDir=ue),he&&(w.headerSortTristate=he.toLowerCase()=="true"),ge&&(w.headerFilter=ge),fe&&(w.headerFilterParams=JSON.parse(fe)),we&&(w.headerFilterPlaceholder=we),ye&&(w.headerFilterFunc=ye),ve&&ve=="headerMenu"&&(w.headerMenu=this.headerMenu.bind(this)),O&&(O=="dateEditor"?w.editor=this.dateEditor.bind(this):w.editor=O),Ee&&(w.editorParams=JSON.parse(Ee)),xe&&(w.cellClick=this.resolveFunc(xe)),R&&(w.titleFormatter=R),D?w.formatter=this.resolveCellFormatter(D):n&&this.colFieldFormatter?.cols?.includes(n)&&(w.formatter=this.colFieldFormatter.formatter),B){let P=JSON.parse(B);P&&P.url&&(P.url=this.resolveFormatter(P,P.url)),w.formatterParams=P}else n&&this.colFieldFormatter?.cols?.includes(n)&&(w.formatterParams=this.colFieldFormatter.params);H&&(w.hozAlign=H),$&&(w.vertAlign=$),y&&(w.headerHozAlign=y),_&&(w.visible=_.toLowerCase()=="true"),me&&(w.sorter=me),be&&(w.sorterParams=JSON.parse(be)),_e&&(w.bottomCalc=_e),Ce&&(w.bottomCalcParams=JSON.parse(Ce)),ke&&(w.topCalc=ke),Se&&(w.topCalcParams=JSON.parse(Se)),e.push(w)}),e}resolveRowFormatter(e){try{if(e)return e.startsWith("function")?new Function("row",`return (${e})(row);`):this[e]?this[e].bind(this):window[e]?window[e]:e}catch(t){return console.error(`Error resolving row formatter: ${t.message}`),null}}resolveFunc(e){try{return e.startsWith("function")?new Function(`return (${e})`)():e.includes("=>")?new Function(`return (${e})`)():this[e]?this[e]:window[e]?window[e]:(console.warn(`Func "${e}" not found.`),null)}catch(t){return console.error(`Error resolving func: ${t.message}`),null}}resolveFormatter(e,t){try{return t.startsWith("function")?new Function(`return (${t})`)(e):this[t]?this[t].bind(this):window[t]?window[t]:(console.warn(`Formatter "${t}" not found.`),null)}catch(o){return console.error(`Error resolving formatter: ${o.message}`),null}}pageRowNum=function(e,t,o){var n=e.getRow(),s=e.getTable(),a=s.getPage()||1,r=s.getPageSize(),l=n.getPosition(!0);return(a-1)*r+l};resolveCellFormatter(e){try{if(e)return e.startsWith("function")?new Function("cell",`return (${e})(cell);`):this[e]?this[e].bind(this):window[e]?window[e]:e}catch(t){return console.error(`Error resolving formatter: ${t.message}`),null}}urlFormatter(e,t,o){let n=e.getColumn().getDefinition().formatterParams.routePrefix||"screen",s=e.getColumn().getDefinition().formatterParams.screen,a=e.getColumn().getDefinition().formatterParams.screen_id,r=e.getColumn().getDefinition().formatterParams.id_name,c=e.getData()._id,p="";return s?p=`/${n}/${s}/${c}`:p=`/${n}/${a}?${r}=${c}`,p}pageFormatter(e,t,o){let n=e.getColumn().getDefinition().formatterParams.page_id,a=e.getData()._id;return`/view/${n}?record_id=${a}`}linkFormatter(e,t,o){var n=e.getValue(),s=document.createElement("a");let a=e.getColumn().getDefinition().formatterParams.routePrefix||"screen",r=e.getColumn().getDefinition().formatterParams.screen,l=e.getColumn().getDefinition().formatterParams.screen_id,c=e.getColumn().getDefinition().formatterParams.id_name,u=e.getData()._id,h="";return r?h=`/${a}/${r}/${u}`:h=`/${a}/${l}?${c}=${u}`,s.setAttribute("href",h),t.target&&s.setAttribute("target",t.target),s.innerText=t.labelField?e.getData()[t.labelField]:n,t.attributes&&typeof t.attributes=="object"&&Object.entries(t.attributes).forEach(([m,b])=>{s.setAttribute(m,b)}),s}toggleSelect(e,t){t.getRow().toggleSelect()}headerMenu(){var e=[],t=this.table.getColumns();let o=this.createMenuLabel("Hide Filter",this.icons.eyeSlash);e.push({label:o,action:async s=>{let a=[],r=this.table.getColumns();s.stopPropagation();for(let l of r)await l.updateDefinition({headerFilter:!1})}});let n=this.createMenuLabel("Show Filter",this.icons.eye);e.push({label:n,action:s=>{let a=this.getColumnsConfig();s.stopPropagation(),this.table.setColumns(a)}}),e.push({separator:!0});for(let s of t){let a=this.createHeaderMenuIcon(s,this.icons.square,this.icons.squareCheck),r=document.createElement("span");r.classList.add("flex"),r.classList.add("flex-row"),r.classList.add("gap-2");let l=document.createElement("span");l.textContent=" "+s.getDefinition().title,l.textContent=l.textContent.replace("null","").replace("undefined",""),l.classList.add("pointer-events-none"),r.appendChild(a),r.appendChild(l),e.push({label:r,action:c=>{let{target:p}=c;c.stopPropagation(),s.toggle();let u=p.querySelector("path");u.setAttribute("d",s.isVisible()?this.icons.squareCheck.d:this.icons.square.d),u.classList.add("pointer-events-none"),this.table.redraw()}})}return e}createHeaderMenuIcon(e){let t=document.createElementNS("http://www.w3.org/2000/svg","svg");t.setAttribute("aria-hidden","true"),t.setAttribute("focusable","false"),t.setAttribute("fill","currentColor"),t.classList.add("h-4"),t.classList.add("w-4"),t.classList.add("align-text-top"),t.classList.add("pointer-events-none"),t.setAttribute("viewBox",this.icons.square.viewport);let o=document.createElementNS("http://www.w3.org/2000/svg","path");return o.setAttribute("d",e.isVisible()?this.icons.squareCheck.d:this.icons.square.d),o.classList.add("pointer-events-none"),t.appendChild(o),t}createMenuLabel(e,t){let o=document.createElementNS("http://www.w3.org/2000/svg","svg");o.setAttribute("aria-hidden","true"),o.setAttribute("focusable","false"),o.setAttribute("fill","currentColor"),o.classList.add("h-4"),o.classList.add("w-4"),o.classList.add("align-text-top"),o.classList.add("pointer-events-none"),o.setAttribute("viewBox",t.viewport);let n=document.createElementNS("http://www.w3.org/2000/svg","path");n.setAttribute("d",t.d),n.classList.add("pointer-events-none"),o.appendChild(n);let s=document.createElement("span");s.classList.add("flex"),s.classList.add("flex-row"),s.classList.add("gap-2");let a=document.createElement("span");return a.textContent=" "+e,a.classList.add("pointer-events-none"),s.appendChild(o),s.appendChild(a),s}localdatetime(e,t,o){let{format:n}=t,s=e.getValue();if(!s)return"";let a=luxon.DateTime.DATETIME_MED;switch(n){case"DATE_SHORT":a=luxon.DateTime.DATE_SHORT;break;case"DATE_MED":a=luxon.DateTime.DATE_MED;break;case"DATE_MED_WITH_WEEKDAY":a=luxon.DateTime.DATE_MED_WITH_WEEKDAY;break;case"DATE_FULL":a=luxon.DateTime.DATE_FULL;break;case"DATE_HUGE":a=luxon.DateTime.DATE_HUGE;break;case"DATETIME_SHORT":a=luxon.DateTime.DATETIME_SHORT;break;case"DATETIME_STANDARD":a={month:"2-digit",day:"2-digit",year:"numeric",hour:"2-digit",minute:"2-digit",hour12:!0};break;case"DATETIME_SHORT_WITH_SECONDS":a=luxon.DateTime.DATETIME_SHORT_WITH_SECONDS;break;case"DATETIME_MED":a=luxon.DateTime.DATETIME_MED;break;case"DATETIME_MED_WITH_SECONDS":a=luxon.DateTime.DATETIME_MED_WITH_SECONDS;break;case"DATETIME_MED_WITH_WEEKDAY":a=luxon.DateTime.DATETIME_MED_WITH_WEEKDAY;break;case"DATETIME_FULL":a=luxon.DateTime.DATETIME_FULL;break;case"DATETIME_FULL_WITH_SECONDS":a=luxon.DateTime.DATETIME_FULL_WITH_SECONDS;break;case"DATETIME_HUGE":a=luxon.DateTime.DATETIME_HUGE;break;case"DATETIME_HUGE_WITH_SECONDS":a=luxon.DateTime.DATETIME_HUGE_WITH_SECONDS;break}let r=new Date(s);return isNaN(r)?"(Invalid Date)":luxon.DateTime.fromISO(s,{zone:"utc"}).setZone("America/New_York").toLocaleString(a)}linklocaldatetime(e,t,o){let n=this.urlFormatter(e,t,o),s=this.localdatetime(e,t,o);return`<a href="${n}">${s}</a>`}dateEditor(e,t,o,n){var s=luxon.DateTime.fromFormat(e.getValue(),"dd/MM/yyyy").toFormat("yyyy-MM-dd");input=document.createElement("input"),input.setAttribute("type","date"),input.style.padding="4px",input.style.width="100%",input.style.boxSizing="border-box",input.value=s,t(function(){input.focus(),input.style.height="100%"});function a(){input.value!=s?o(luxon.DateTime.fromFormat(input.value,"yyyy-MM-dd").toFormat("dd/MM/yyyy")):n()}return input.addEventListener("blur",a),input.addEventListener("keydown",function(r){r.keyCode==13&&a(),r.keyCode==27&&n()}),input}getAjaxConfig(){return{method:"GET",headers:{"Content-Type":"application/json"}}}getAjaxURLGenerator(e,t,o){let n=[],s=JSON.parse(this.getAttribute("ajax-params-map")||"{}");for(let[p,u]of Object.entries(s))n.push(`${u}=${o[p]}`);if(n.length===0){let{page:p,size:u}=o;if(p&&u)n.push(`page=${p}`),n.push(`size=${u}`);else{let h=this.getAttribute("record-size");h&&n.push(`size=${h}`)}}let a=JSON.parse(this.getAttribute("ajax-params")||"{}");for(let[p,u]of Object.entries(a))n.push(`${p}=${u}`);let{filter:r}=o;if(r&&r.length>0){let p=this.dedupeByField(r);n.push(`filter=${JSON.stringify(p)}`)}let{sort:l}=o;l&&l.length>0&&n.push(`sort=${JSON.stringify(l)}`);let c=n.join("&");return e.includes("?")?e+`&${c}`:e+`?${c}`}dedupeByField(e){let t=new Set;return e.filter(o=>t.has(o.field)?!1:(t.add(o.field),!0))}handleAjaxResponse(e,t,o){let{results:n}=o;if(this.hasAttribute("pagination")){let{data:s,last_page:a,last_row:r}=o;return s==null&&a===0?{last_page:0,last_row:0,data:[]}:s&&a&&r?{last_page:a,last_row:r,data:s}:{last_page:10,data:n}}else return n}_applyStyle(){this.loadStyle("wc-tabulator-style",`
  /* Tabulator */
  wc-tabulator {
    display: contents;
  }
  .wc-tabulator.tabulator {
    background-color: var(--card-bg-color);
    border: 1px solid var(--card-border-color);
  }
  .wc-tabulator.tabulator.rounded {
    border-radius: 10px;
  }

  /* Table Header */
  .wc-tabulator.tabulator .tabulator-header {
    border-bottom: none;
  }
  .wc-tabulator.tabulator .tabulator-header,
  .wc-tabulator.tabulator .tabulator-header .tabulator-col {
    color: var(--card-color);
    background-color: var(--card-border-color);
  }
  .wc-tabulator.tabulator .tabulator-header .tabulator-col:not(:last-of-type) {
    border-right: 1px solid var(--text-3);
  }
  .wc-tabulator.tabulator .tabulator-header .tabulator-col:last-of-type {
    border-right: 1px solid transparent;
  }
  /*Allow column header names to wrap lines*/
  .wc-tabulator.tabulator .tabulator-header .tabulator-col,
  .wc-tabulator.tabulator .tabulator-header .tabulator-col-row-handle {
    white-space: normal;
  }
  .wc-tabulator.tabulator .tabulator-header input,
  .wc-tabulator.tabulator .tabulator-row .tabulator-cell input {
    accent-color: var(--accent-color);
  }
  .wc-tabulator.tabulator .tabulator-header .tabulator-header-contents .tabulator-headers .tabulator-col:hover {
    background-color: var(--primary-bg-color);
    color: var(--surface-1);
  }
  .wc-tabulator.tabulator .tabulator-header .tabulator-header-contents .tabulator-headers .tabulator-col:hover input {
    color: var(--component-color);
  }

  /* Table Rows */
  .wc-tabulator.tabulator .tabulator-tableholder .tabulator-table .tabulator-row.tabulator-row-odd .tabulator-cell.tabulator-row-header.tabulator-row-handle,
  .wc-tabulator.tabulator .tabulator-tableholder .tabulator-table .tabulator-row.tabulator-row-odd {
    color: var(--text-1);
    background-color: var(--card-bg-color);
  }
  .wc-tabulator.tabulator .tabulator-tableholder .tabulator-table .tabulator-row.tabulator-row-even .tabulator-cell.tabulator-row-header.tabulator-row-handle,
  .wc-tabulator.tabulator .tabulator-tableholder .tabulator-table .tabulator-row.tabulator-row-even {
    color: var(--text-1);
    background-color: var(--surface-5);
  }
  .wc-tabulator.tabulator .tabulator-tableholder .tabulator-table .tabulator-row.tabulator-row-odd .tabulator-cell.tabulator-row-handle .tabulator-row-handle-box .tabulator-row-handle-bar,
  .wc-tabulator.tabulator .tabulator-tableholder .tabulator-table .tabulator-row.tabulator-row-even .tabulator-cell.tabulator-row-handle .tabulator-row-handle-box .tabulator-row-handle-bar,
  .wc-tabulator.tabulator .tabulator-tableholder .tabulator-table .tabulator-row.tabulator-row-odd .tabulator-cell.tabulator-row-header.tabulator-row-handle .tabulator-row-handle-box .tabulator-row-handle-bar,
  .wc-tabulator.tabulator .tabulator-tableholder .tabulator-table .tabulator-row.tabulator-row-even .tabulator-cell.tabulator-row-header.tabulator-row-handle .tabulator-row-handle-box .tabulator-row-handle-bar {
    background: var(--text-1);
  }
  .wc-tabulator.tabulator .tabulator-tableholder .tabulator-table .tabulator-row .tabulator-cell.tabulator-row-header.tabulator-row-handle {
      border-bottom: none;
  }
  .wc-tabulator .tabulator-row .tabulator-cell a {
    color: var(--text-1);
    text-decoration: underline;
    text-decoration-color: var(--text-1);
  }
  .wc-tabulator.tabulator .tabulator-tableholder .tabulator-table .tabulator-row.tabulator-row-odd.tabulator-selected,
  .wc-tabulator.tabulator .tabulator-tableholder .tabulator-table .tabulator-row.tabulator-row-even.tabulator-selected {
    background-color: var(--primary-bg-color);
    color: var(--surface-1);
  }
  .wc-tabulator.tabulator .tabulator-tableholder .tabulator-table .tabulator-row.tabulator-row-odd:hover:not(.tabulator-selected),
  .wc-tabulator.tabulator .tabulator-tableholder .tabulator-table .tabulator-row.tabulator-row-even:hover:not(.tabulator-selected) 
  {
    background-color: var(--primary-bg-color);
    color: var(--surface-1);
  }
  .wc-tabulator.tabulator .tabulator-tableholder .tabulator-table .tabulator-row.tabulator-row-odd:hover:not(.tabulator-selected) a,
  .wc-tabulator.tabulator .tabulator-tableholder .tabulator-table .tabulator-row.tabulator-row-even:hover:not(.tabulator-selected) a 
  {
    color: var(--surface-1);
    text-decoration-color: var(--surface-1);
  }
  .wc-tabulator.tabulator.tabulator-block-select .tabulator-tableholder .tabulator-table .tabulator-row.tabulator-row-placeholder {
    background-color: var(--secondary-bg-color);
  }
  .wc-tabulator .tabulator-row .tabulator-cell {
    border-right: 1px solid var(--text-3);
  }
  .wc-tabulator .tabulator-row .tabulator-cell:last-child {
    border-right: 1px solid transparent;
  }
  /*
  .wc-tabulator .tabulator-tableholder .tabulator-row .tabulator-cell {
    border-right: 1px solid var(--text-3);
  }
  */
  .wc-tabulator .tabulator-tableholder .tabulator-row .tabulator-cell:last-of-type {
    border-right: 1px solid transparent;
  }    

  /* Table Footer */
  .wc-tabulator.tabulator .tabulator-footer {
    border-top: none;
  }
  .wc-tabulator.tabulator .tabulator-footer .tabulator-footer-contents {
    color: var(--card-color);
    background-color: var(--card-border-color);
    border-top: 1px solid var(--text-3);
    border-top: 1px solid transparent;
  }
  .wc-tabulator.tabulator .tabulator-footer .tabulator-footer-contents .tabulator-page {
    color: var(--card-color);
    background-color: var(--card-border-color);
  }
  .wc-tabulator.tabulator .tabulator-footer .tabulator-footer-contents .tabulator-page.active {
    color: var(--card-color);
    background-color: var(--card-border-color);
  }
  .wc-tabulator.tabulator .tabulator-footer .tabulator-footer-contents .tabulator-page[disabled] {
    pointer-events: none;
  }

  /* Table Groups */
  .wc-tabulator.tabulator .tabulator-row.tabulator-group > span {
    color: var(--card-color);  
  }

  /* Table Calcs */
  .wc-tabulator.tabulator .tabulator-header .tabulator-header-contents .tabulator-calcs-holder,
  .wc-tabulator.tabulator .tabulator-header .tabulator-header-contents .tabulator-calcs-holder .tabulator-row.tabulator-calcs,
  .wc-tabulator.tabulator .tabulator-header .tabulator-header-contents .tabulator-calcs-holder .tabulator-row.tabulator-calcs.tabulator-calcs-top,
  .wc-tabulator.tabulator .tabulator-footer .tabulator-calcs-holder,
  .wc-tabulator.tabulator .tabulator-footer .tabulator-calcs-holder .tabulator-row.tabulator-calcs.tabulator-calcs-bottom {
    color: var(--card-color) !important;
    background-color: var(--card-border-color) !important;

    /*
    border-color: var(--component-border-color);
    border-top: 1px solid var(--component-border-color);
    border-bottom: 1px solid var(--component-border-color);
    */
  } 
  .wc-tabulator.tabulator .tabulator-header .tabulator-header-contents .tabulator-calcs-holder,
  .wc-tabulator.tabulator .tabulator-header .tabulator-header-contents .tabulator-calcs-holder .tabulator-row.tabulator-calcs,
  .wc-tabulator.tabulator .tabulator-header .tabulator-header-contents .tabulator-calcs-holder .tabulator-row.tabulator-calcs.tabulator-calcs-top {
    border-top: 1px solid var(--text-3);
    border-bottom: 1px solid var(--text-3);
  }
  .wc-tabulator.tabulator .tabulator-footer .tabulator-calcs-holder,
  .wc-tabulator.tabulator .tabulator-footer .tabulator-calcs-holder .tabulator-row.tabulator-calcs.tabulator-calcs-bottom {
    border-top: 1px solid var(--text-3);
    border-bottom: 1px solid transparent;
  }

  
  .wc-tabulator.tabulator .tabulator-row.tabulator-unselectable.tabulator-calcs.tabulator-calcs-top,
  .wc-tabulator.tabulator .tabulator-row.tabulator-unselectable.tabulator-calcs.tabulator-calcs-bottom {
    color: var(--card-color) !important;
    background-color: var(--card-border-color) !important;
    /*
    border-color: var(--component-border-color);
    border-top: 1px solid var(--component-border-color);
    border-bottom: 1px solid var(--component-border-color);
    */
  } 

  /* Table Popup */
  .tabulator-menu.tabulator-popup-container {
    color: var(--text-1);
    background-color: var(--surface-1);
  }
  .tabulator-menu.tabulator-popup-container .tabulator-menu-item:hover {
    color: var(--card-color);
    background-color: var(--card-bg-color);
  }

  /* Tabulator Edit List / Popup Container */
  .tabulator-edit-list.tabulator-popup-container {
    color: var(--text-1);
    background-color: var(--surface-1);
  }
  .tabulator-edit-list-item.tabulator-edit-list-group-level-0 {
    color: var(--text-1);
  }
  .tabulator-edit-list-item.tabulator-edit-list-group-level-0:hover {
    color: var(--card-color);
    background-color: var(--card-bg-color);
  }
      `)}}customElements.define("wc-tabulator",d)}if(!customElements.get("wc-template-preview")){class d extends g{static get observedAttributes(){return[]}constructor(){super(),this.childComponentSelector="wc-input";let e=this.querySelector(".wc-template-preview");if(e)this.componentElement=e;else{this.componentElement=document.createElement("div");let t=this.getAttribute("cls")||"";this.componentElement.className=`wc-template-preview ${t}`,this.appendChild(this.componentElement),this._createElement()}}async _connectedCallback(){this._applyStyle(),this._wireEvents()}_disconnectedCallback(){this._unWireEvents()}_createElement(){let e=this.getAttribute("record-id")||"",t=this.getAttribute("slug")||"",o=`<div class="flex flex-row justify-between">
            <wc-input name="preview_toggle" 
              class="row items-center gap-1"
              lbl-label="Preview"
              type="radio"
              radio-group-class="row modern text-2xs"
              value="off"
              >
              <option value="on">Show</option>
              <option value="off">Hide</option>
            </wc-input>
            <wc-input name="drag_toggle" 
              class="row items-center gap-1 hidden"
              lbl-label="Drag n Drop"
              type="radio"
              radio-group-class="row modern text-2xs"
              value="off"
              >
              <option value="on">Enable</option>
              <option value="off">Disable</option>
            </wc-input>
        </div>
      `,n="";e==="create"||e===""?n=`/v/${t}/create`:n=`/v/${t}/${e}`,this.src=n;let s=`${o}
        <iframe class="preview hidden"
                src=""
                style="height: calc(-360px + 100vh);"
                >
        </iframe>
      `.trim();this.componentElement.innerHTML=s}_handleAttributeChange(e,t){super._handleAttributeChange(e,t)}_applyStyle(){let e=`
        wc-template-preview {
          display: contents;
        }
        .wc-template-preview {
        }
      `.trim();this.loadStyle("wc-template-preview-style",e)}_wireEvents(){super._wireEvents();let e=this.querySelector("iframe.preview"),o=this.querySelector('wc-input input[name="preview_toggle"]').closest("wc-input"),s=this.querySelector('wc-input input[name="drag_toggle"]').closest("wc-input");o.addEventListener("change",a=>{let{target:r}=a,l=s.querySelector(".wc-input");r.value==="on"?(e.src=this.src,l.classList.remove("hidden"),this.componentElement.classList.add("col-1"),e.classList.remove("hidden")):(e.src="",l.classList.add("hidden"),this.componentElement.classList.remove("col-1"),e.classList.add("hidden"))}),s.addEventListener("change",a=>{let{target:r}=a;r.value==="on"?(e.contentDocument.body.classList.add("preview-frame"),wc.EventHub.broadcast("wc-template-preview:enable-drag","","")):(e.contentDocument.body.classList.remove("preview-frame"),wc.EventHub.broadcast("wc-template-preview:disable-drag","",""))})}_unWireEvents(){super._unWireEvents();let e=this.querySelector("iframe.preview"),o=this.querySelector('wc-input input[name="preview_toggle"]').closest("wc-input"),s=this.querySelector('wc-input input[name="drag_toggle"]').closest("wc-input");o.removeEventListener("change",a=>{let{target:r}=a,l=s.querySelector(".wc-input");r.value==="on"?(e.src=this.src,l.classList.remove("hidden"),this.componentElement.classList.add("col-1"),e.classList.remove("hidden")):(e.src="",l.classList.add("hidden"),this.componentElement.classList.remove("col-1"),e.classList.add("hidden"))}),s.removeEventListener("change",a=>{let{target:r}=a;r.value==="on"?(e.contentDocument.body.classList.add("preview-frame"),wc.EventHub.broadcast("wc-template-preview:enable-drag","","")):(e.contentDocument.body.classList.remove("preview-frame"),wc.EventHub.broadcast("wc-template-preview:disable-drag","",""))})}}customElements.define("wc-template-preview",d)}var ie=class extends g{static get observedAttributes(){return["id","class","theme","mode"]}constructor(){super(),this.prefersDark=window.matchMedia("(prefers-color-scheme: dark)").matches,this.prefersLight=window.matchMedia("(prefers-color-scheme: light)").matches;let i=this.querySelector(".wc-theme-selector");i?this.componentElement=i:(this.componentElement=document.createElement("div"),this.componentElement.classList.add("wc-theme-selector"),this.appendChild(this.componentElement))}async connectedCallback(){super.connectedCallback(),this._applyStyle()}disconnectedCallback(){super.disconnectedCallback(),this._unWireEvents()}_handleAttributeChange(i,e){i==="theme"?this.componentElement.querySelector(`button[data-theme="${e}"]`)?.click():super._handleAttributeChange(i,e)}_render(){super._render(),this.querySelector(".wc-theme-selector > *")||(this.componentElement.innerHTML="",this._createInnerElement()),this._wireEvents(),typeof htmx<"u"&&htmx.process(this)}_createInnerElement(){let i=["theme-rose","theme-petal","theme-sunset","theme-peach","theme-fire","theme-desert","theme-golden","theme-honey","theme-amber","theme-olive","theme-moss","theme-avocado","theme-lime","theme-fern","theme-yellow","theme-meadow","theme-cornsilk","theme-sage","theme-forest","theme-jungle","theme-emerald","theme-mint","theme-turquoise","theme-aqua","theme-lagoon","theme-ice","theme-ocean","theme-azure","theme-sky","theme-midsky","theme-deepsky","theme-royal","theme-twilight","theme-lavender","theme-violet","theme-grape","theme-plum","theme-fuchsia","theme-cottoncandy","theme-blush","theme-bubblegum"],e=document.createElement("template");e.innerHTML=`
      <div class="relative row flex-wrap">
        ${i.map(t=>`
          <button class="theme-button flat h-10 w-10 rounded-t-md ${t}" type="button" data-theme="${t}" title="${t}">
            <svg class="selectmark h-4 w-4" fill="currentColor" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512">
              <path d="M438.6 105.4c12.5 12.5 12.5 32.8 0 45.3l-256 256c-12.5 12.5-32.8 12.5-45.3 0l-128-128c-12.5-12.5-12.5-32.8 0-45.3s32.8-12.5 45.3 0L160 338.7 393.4 105.4c12.5-12.5 32.8-12.5 45.3 0z"/>
            </svg>
          </button>
          `.trim()).join("")}
      </div>
      <wc-input name="theme_mode"
        class="col"
        lbl-label="Light or Dark?"
        type="checkbox"
        toggle-switch
        ${this.prefersDark?"checked":""}
        _="on change
          if me.value
            remove .light from document.documentElement
            add .dark to document.documentElement
            send theme:change to <body/>
          else
            remove .dark from document.documentElement
            add .light to document.documentElement
            send theme:change to <body/>
          end
        end"
        >
      </wc-input>
      `.trim(),this.componentElement.appendChild(e.content.cloneNode(!0))}_applyStyle(){this.loadStyle("wc-theme-selector-style",`
      wc-theme-selector {
        display: contents;
      }
      wc-theme-selector .wc-theme-selector {

      }
      wc-theme-selector .wc-theme-selector .theme-button {
        background-color: var(--primary-bg-color);
        padding: 0;
      }
      wc-theme-selector .wc-theme-selector .selectmark {
        padding: 0;
        pointer-events: none;
      }
    `)}_handleThemeClick(i){let{target:e}=i,t=e.getAttribute("data-theme");this._setTheme(e,t),localStorage.setItem("theme",t.replace("theme-",""))}_setTheme(i,e){this.componentElement.querySelectorAll("button[data-theme]").forEach(o=>{o.classList.remove("selected"),o.innerHTML=""}),i.classList.add("selected"),i.innerHTML=`<svg class="selectmark h-4 w-4" fill="currentColor" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512">
        <path d="M438.6 105.4c12.5 12.5 12.5 32.8 0 45.3l-256 256c-12.5 12.5-32.8 12.5-45.3 0l-128-128c-12.5-12.5-12.5-32.8 0-45.3s32.8-12.5 45.3 0L160 338.7 393.4 105.4c12.5-12.5 32.8-12.5 45.3 0z"/>
      </svg>`.trim(),document.documentElement.classList.forEach(o=>{o.startsWith("theme-")&&document.documentElement.classList.remove(o)}),document.documentElement.classList.add(e),window.wc&&window.wc.EventHub&&window.wc.EventHub.broadcast("theme:change","",{theme:e})}_handleLoadTheme(){let e=`theme-${localStorage.getItem("theme")||"rose"}`,t=this.componentElement.querySelector(`button[data-theme="${e}"]`);this._setTheme(t,e)}_wireEvents(){super._wireEvents(),this.componentElement.querySelectorAll("button[data-theme]").forEach(e=>e.addEventListener("click",this._handleThemeClick.bind(this))),this.componentElement.addEventListener("load",this._handleLoadTheme.bind(this))}_unWireEvents(){super._unWireEvents(),this.componentElement.querySelectorAll("button[data-theme]").forEach(e=>e.removeEventListener("click",this._handleThemeClick.bind(this)))}};customElements.define("wc-theme-selector",ie);var oe=class extends g{static get observedAttributes(){return["id","class","items"]}constructor(){super(),this._items=[];let i=this.querySelector(".wc-timeline");i?this.componentElement=i:(this.componentElement=document.createElement("div"),this.componentElement.classList.add("wc-timeline"),this.appendChild(this.componentElement))}async connectedCallback(){super.connectedCallback(),this._applyStyle()}disconnectedCallback(){super.disconnectedCallback(),this._unWireEvents()}_handleAttributeChange(i,e){i==="items"?(typeof e=="string"&&(this._items=JSON.parse(e)),this.removeAttribute("items")):super._handleAttributeChange(i,e)}_render(){super._render(),this.querySelector(".wc-timeline > *")||(this._moveDeclarativeOptions(),this.componentElement.innerHTML="",this._items.forEach((e,t)=>{let o=this._createElement(e.label,e.content,t);this.componentElement.appendChild(o)})),typeof htmx<"u"&&htmx.process(this)}_createElement(i,e,t){let o="left";t%2!==0&&(o="right");let n=document.createElement("div");n.classList.add("timeline-container",o);let s=document.createElement("div");s.classList.add("timeline-card");let a=document.createElement("h2");a.textContent=i;let r=document.createElement("p");return r.textContent=e,s.appendChild(a),s.appendChild(r),n.appendChild(s),n}_applyStyle(){let i=`
      wc-timeline {
        display: contents;
      }
        
      .wc-timeline,
      .wc-timeline * {
        box-sizing: border-box;
      }

      .wc-timeline {
        position: relative;
        max-width: 1200px;
        margin: 0 auto;
      }

      /* The actual timeline (the vertical ruler) */
      .wc-timeline::after {
        content: '';
        position: absolute;
        width: 6px;
        background-color: var(--primary-bg-color);
        top: 0;
        bottom: 0;
        left: 50%;
        margin-left: -3px;
      }

      /* Container around content */
      .wc-timeline .timeline-container {
        padding: 10px 40px;
        position: relative;
        background-color: inherit;
        width: 50%;
      }

      /* The circles on the timeline */
      .wc-timeline .timeline-container::after {
        content: '';
        position: absolute;
        width: 25px;
        height: 25px;
        right: -17px;
        background-color: var(--component-color);
        border: 4px solid var(--container-border-color);
        top: 15px;
        border-radius: 50%;
        z-index: 1;
      }

      /* Place the container to the left */
      .wc-timeline .left {
        left: 0;
      }

      /* Place the container to the right */
      .wc-timeline .right {
        left: 50%;
      }

      /* Add arrows to the left container (pointing right) */
      .wc-timeline .left::before {
        content: " ";
        height: 0;
        position: absolute;
        top: 22px;
        width: 0;
        z-index: 1;
        right: 30px;
        border: medium solid white;
        border-width: 10px 0 10px 10px;
        border-color: transparent transparent transparent var(--card-bg-color);
      }

      /* Add arrows to the right container (pointing left) */
      .wc-timeline .right::before {
        content: " ";
        height: 0;
        position: absolute;
        top: 22px;
        width: 0;
        z-index: 1;
        left: 30px;
        border: medium solid white;
        border-width: 10px 10px 10px 0;
        border-color: transparent var(--card-bg-color); transparent transparent;
      }

      /* Fix the circle for containers on the right side */
      .wc-timeline .right::after {
        left: -16px;
      }

      /* The actual content */
      .wc-timeline .timeline-card {
        padding: 20px 30px;
        background-color: var(--card-bg-color);
        color: var(--card-color);
        position: relative;
        border-radius: 6px;
      }
      /* Media queries - Responsive timeline on screens less than 600px wide */
      @media screen and (max-width: 600px) {
        /* Place the timelime to the left */
        .wc-timeline::after {
          left: 31px;
        }
        
        /* Full-width containers */
        .wc-timeline .timeline-container {
          width: 100%;
          padding-left: 70px;
          padding-right: 25px;
        }
        
        /* Make sure that all arrows are pointing leftwards */
        .wc-timeline .timeline-container::before {
          left: 60px;
          border: medium solid white;
          border-width: 10px 10px 10px 0;
          border-color: transparent white transparent transparent;
        }

        /* Make sure all circles are at the same spot */
        .wc-timeline .left::after,
        .wc-timeline .right::after {
          left: 15px;
        }
        
        /* Make all right containers behave like the left ones */
        .wc-timeline .right {
          left: 0%;
        }
      }`.trim();this.loadStyle("wc-timeline-style",i)}_unWireEvents(){super._unWireEvents()}_moveDeclarativeOptions(){let i=this.querySelectorAll("option");i.length>0&&(this._items=[]),i.forEach((e,t)=>{let o={label:e.value,content:e.textContent.trim()};this._items.push(o)}),Array.from(i).forEach(e=>e.remove())}};customElements.define("wc-timeline",oe);if(!customElements.get("wc-ai-bot")){let d=null,i=null,e=new Map,t=new Map;class o extends g{static get observedAttributes(){return["bot-id","model","system-prompt","title","placeholder","theme","position","auto-open","max-height","temperature","max-tokens","debug","check-gpu-compatibility","force-enable"]}static KNOWN_CAPABLE_CONFIGS=[{gpu:/Apple M[1-4]/,capability:"high",name:"Apple Silicon"},{gpu:/RTX [34]0[6-9]0/,capability:"high",name:"NVIDIA RTX High-end"},{gpu:/RTX [34]0[7-8]0/,capability:"high",name:"NVIDIA RTX High-end"},{gpu:/RTX [34]0[5-6]0/,capability:"medium",name:"NVIDIA RTX Mid-range"},{gpu:/RTX 20[7-8]0/,capability:"medium",name:"NVIDIA RTX 20 Series"},{gpu:/GTX 16[6-8]0/,capability:"low",name:"NVIDIA GTX 16 Series"},{gpu:/Radeon RX 6[7-9]00/,capability:"medium",name:"AMD Radeon RX 6000"},{gpu:/Radeon RX 7[7-9]00/,capability:"medium",name:"AMD Radeon RX 7000"},{gpu:/Intel.*HD Graphics/,capability:"none",name:"Intel HD Graphics"},{gpu:/Intel.*UHD Graphics/,capability:"none",name:"Intel UHD Graphics"},{gpu:/Intel.*Iris/,capability:"low",name:"Intel Iris"},{gpu:/Radeon Vega/,capability:"low",name:"AMD Radeon Vega"},{gpu:/GeForce MX/,capability:"none",name:"NVIDIA GeForce MX"}];constructor(){super(),this._messages=[],this._isLoading=!1,this._isModelReady=!1,this._isMinimized=!0,this._error=null,this._engine=null,this._modelProgress=0,this._isUnsupported=!1,this._unsupportedReason="",this._handleSend=this._handleSend.bind(this),this._handleKeydown=this._handleKeydown.bind(this),this._handleToggle=this._handleToggle.bind(this),this._handleClose=this._handleClose.bind(this)}static get is(){return"wc-ai-bot"}async _render(){if(this.classList.add("contents"),this.getAttribute("check-gpu-compatibility")!=="false"&&!await this._checkSystemCapabilities()){this._renderUnsupportedUI();return}let a=this.getAttribute("title")||"AI Assistant",r=this.getAttribute("placeholder")||"Type your message...";this._container=document.createElement("div"),this._container.className="wc-ai-bot-container";let l=document.createElement("div");l.className="wc-ai-bot-header",l.innerHTML=`
        <div class="wc-ai-bot-header-title">
          <wc-fa-icon name="robot" icon-style="solid" size="1.2rem" class="mr-2"></wc-fa-icon>
          <span>${a}</span>
        </div>
        <div class="wc-ai-bot-header-actions">
          <button class="wc-ai-bot-toggle" aria-label="Toggle chat">
            <wc-fa-icon name="minus" icon-style="solid" size="1rem"></wc-fa-icon>
          </button>
          <button class="wc-ai-bot-close" aria-label="Close chat">
            <wc-fa-icon name="xmark" icon-style="solid" size="1rem"></wc-fa-icon>
          </button>
        </div>
      `,this._messagesContainer=document.createElement("div"),this._messagesContainer.className="wc-ai-bot-messages";let c=document.createElement("div");c.className="wc-ai-bot-input-container",this._input=document.createElement("textarea"),this._input.className="wc-ai-bot-input",this._input.placeholder=r,this._input.rows=2,this._sendButton=document.createElement("button"),this._sendButton.className="wc-ai-bot-send",this._sendButton.innerHTML='<wc-fa-icon name="paper-plane" icon-style="solid" size="1rem"></wc-fa-icon>',this._sendButton.disabled=!0,c.appendChild(this._input),c.appendChild(this._sendButton),this._container.appendChild(l),this._container.appendChild(this._messagesContainer),this._container.appendChild(c),this._statusBar=document.createElement("div"),this._statusBar.className="wc-ai-bot-status",this._container.appendChild(this._statusBar),this.appendChild(this._container),(this.getAttribute("theme")==="bubble"||!this.getAttribute("theme"))&&(this._fab=document.createElement("button"),this._fab.className="wc-ai-bot-fab",this._fab.setAttribute("aria-label","Open chat"),this._fab.innerHTML='<wc-fa-icon name="message" icon-style="solid" size="1.5rem"></wc-fa-icon>',this._fab.addEventListener("click",()=>{this._isMinimized=!1,this.classList.add("wc-ai-bot--open"),this._fab.style.display="none",setTimeout(()=>this._input.focus(),100)}),this.appendChild(this._fab)),this._applyStyles(),this._sendButton.addEventListener("click",this._handleSend),this._input.addEventListener("keydown",this._handleKeydown),this._input.addEventListener("input",()=>this._adjustInputHeight());let p=this._container.querySelector(".wc-ai-bot-toggle");p&&p.addEventListener("click",this._handleToggle);let u=this._container.querySelector(".wc-ai-bot-close");if(u&&u.addEventListener("click",this._handleClose),await this._initializeModel(),!i)try{i=await import("https://cdn.jsdelivr.net/npm/marked@4/lib/marked.esm.js"),console.log("[wc-ai-bot] Marked module loaded successfully")}catch(h){console.error("[wc-ai-bot] Failed to load marked module:",h)}this.getAttribute("auto-open")==="true"&&(this._isMinimized=!1,this.classList.add("wc-ai-bot--open"),this._fab&&(this._fab.style.display="none")),this._addMessage("bot",this._getWelcomeMessage())}_applyStyles(){let s=`
        wc-ai-bot {
          display: contents;
        }

        /* Base container styles */
        .wc-ai-bot-container {
          display: flex;
          flex-direction: column;
          background: var(--component-bg-color);
          border: 1px solid var(--border-color);
          border-radius: 0.5rem;
          overflow: hidden;
          box-shadow: 0 4px 6px -1px rgb(0 0 0 / 0.1);
        }

        /* Header styles */
        .wc-ai-bot-header {
          display: flex;
          justify-content: space-between;
          align-items: center;
          padding: 0.75rem 1rem;
          background: var(--primary-bg-color);
          color: var(--primary-color);
        }

        .wc-ai-bot-header-title {
          display: flex;
          align-items: center;
          font-weight: 600;
        }

        .wc-ai-bot-header-actions {
          display: flex;
          gap: 0.5rem;
        }

        .wc-ai-bot-header button {
          background: transparent;
          border: none;
          color: var(--primary-color);
          cursor: pointer;
          padding: 0.25rem;
          border-radius: 0.25rem;
          transition: opacity 0.2s;
        }

        .wc-ai-bot-header button:hover {
          opacity: 0.8;
        }

        /* Messages container */
        .wc-ai-bot-messages {
          flex: 1;
          overflow-y: auto;
          padding: 1rem;
          min-height: 200px;
          max-height: 400px;
          background: var(--component-bg-color);
        }

        /* Message styles */
        .wc-ai-bot-message {
          margin-bottom: 1rem;
          display: flex;
        }

        .wc-ai-bot-message--user {
          justify-content: flex-end;
        }

        .wc-ai-bot-message--bot {
          justify-content: flex-start;
        }

        .wc-ai-bot-message-bubble {
          max-width: 80%;
          padding: 0.75rem;
          border-radius: 0.5rem;
          word-wrap: break-word;
          white-space: pre-wrap;
        }

        .wc-ai-bot-message--user .wc-ai-bot-message-bubble {
          background: var(--primary-color);
          color: var(--primary-bg-color);
        }

        .wc-ai-bot-message--bot .wc-ai-bot-message-bubble {
          background: var(--primary-bg-color);
          color: var(--primary-color);
        }

        /* Markdown content styling */
        .wc-ai-bot-message-bubble p {
          margin: 0 0 0.5rem 0;
        }
        
        .wc-ai-bot-message-bubble p:last-child {
          margin-bottom: 0;
        }
        
        .wc-ai-bot-message-bubble ul,
        .wc-ai-bot-message-bubble ol {
          margin: 0 0 0.5rem 0;
          padding-left: 1.5rem;
        }
        
        .wc-ai-bot-message-bubble li {
          margin-bottom: 0.25rem;
        }
        
        .wc-ai-bot-message-bubble pre {
          background: var(--code-bg-color, rgba(0,0,0,0.1));
          padding: 0.5rem;
          border-radius: 0.25rem;
          overflow-x: auto;
          margin: 0.5rem 0;
        }
        
        .wc-ai-bot-message-bubble code {
          background: var(--code-bg-color, rgba(0,0,0,0.1));
          padding: 0.125rem 0.25rem;
          border-radius: 0.125rem;
          font-size: 0.875em;
        }
        
        .wc-ai-bot-message-bubble pre code {
          background: none;
          padding: 0;
        }

        /* Transparent background for loading bubbles */
        .wc-ai-bot-message-bubble--loading {
          background: transparent !important;
          padding: 0 !important;
          display: flex;
          flex: 1 1 0%;
          justify-content: center;
          align-items: center;
          min-width: 100px;
          min-height: 60px;
        }

        /* Input container */
        .wc-ai-bot-input-container {
          display: flex;
          align-items: center;
          gap: 0.5rem;
          padding: 1rem 0 1rem 1rem;
          border-top: 1px solid var(--border-color);
          background: var(--component-bg-color);
        }

        .wc-ai-bot-input {
          flex: 1;
          padding: 0.5rem;
          border: 1px solid var(--border-color);
          border-radius: 0.375rem;
          background: var(--input-bg-color);
          color: var(--input-color);
          resize: none;
          font-family: inherit;
          font-size: 0.875rem;
          line-height: 1.25rem;
          min-height: 3.5rem;
          max-height: 120px;
        }

        .wc-ai-bot-input:focus {
          outline: none;
          border-color: var(--primary-color);
          box-shadow: 0 0 0 3px var(--primary-color-alpha);
        }

        .wc-ai-bot-send {
          padding: 0.5rem 0.75rem;
          /*
          background: var(--primary-color);
          color: var(--primary-contrast-color);
          */
          border: none;
          border-radius: 0.375rem;
          cursor: pointer;
          transition: opacity 0.2s;
          display: flex;
          align-items: center;
          justify-content: center;
          align-self: center;
          flex-shrink: 0;
          height: 2.5rem;
        }

        .wc-ai-bot-send:hover:not(:disabled) {
          opacity: 0.9;
        }

        .wc-ai-bot-send:disabled {
          opacity: 0.5;
          cursor: not-allowed;
        }

        /* Status bar */
        .wc-ai-bot-status {
          display: none;
          padding: 0.5rem 1rem;
          font-size: 0.875rem;
          background: var(--primary-bg-color);
          color: var(--primary-color);
          border-top: 1px solid var(--border-color);
        }

        .wc-ai-bot-status--error {
          background: var(--danger-color);
          color: var(--danger-contrast-color);
        }

        .wc-ai-bot-status--warning {
          background: var(--warning-color, #f59e0b);
          color: var(--warning-contrast-color, white);
        }

        /* FAB Button */
        .wc-ai-bot-fab {
          position: fixed;
          width: 60px;
          height: 60px;
          border-radius: 50%;
          background: var(--primary-bg-color);
          color: var(--primary-color);
          border: none;
          box-shadow: 0 4px 6px -1px rgb(0 0 0 / 0.1), 0 2px 4px -1px rgb(0 0 0 / 0.06);
          cursor: pointer;
          transition: transform 0.2s, box-shadow 0.2s;
          z-index: 999;
          display: flex;
          align-items: center;
          justify-content: center;
        }

        .wc-ai-bot-fab:hover {
          transform: scale(1.05);
          box-shadow: 0 10px 15px -3px rgb(0 0 0 / 0.1), 0 4px 6px -2px rgb(0 0 0 / 0.05);
        }

        /* FAB positions based on bot position */
        .wc-ai-bot--bubble.wc-ai-bot--bottom-right .wc-ai-bot-fab {
          bottom: 1rem;
          right: 1rem;
        }

        .wc-ai-bot--bubble.wc-ai-bot--bottom-left .wc-ai-bot-fab {
          bottom: 1rem;
          left: 1rem;
        }

        .wc-ai-bot--bubble.wc-ai-bot--top-right .wc-ai-bot-fab {
          top: 1rem;
          right: 1rem;
        }

        .wc-ai-bot--bubble.wc-ai-bot--top-left .wc-ai-bot-fab {
          top: 1rem;
          left: 1rem;
        }

        /* Hide FAB for non-bubble themes */
        .wc-ai-bot--minimal .wc-ai-bot-fab,
        .wc-ai-bot--sidebar .wc-ai-bot-fab {
          display: none !important;
        }

        /* Theme: Bubble */
        .wc-ai-bot--bubble .wc-ai-bot-container {
          position: fixed;
          width: 350px;
          height: 500px;
          z-index: 1000;
          transition: opacity 0.3s, transform 0.3s;
          opacity: 0;
          transform: scale(0.95);
          pointer-events: none;
        }

        .wc-ai-bot--bubble.wc-ai-bot--open .wc-ai-bot-container {
          opacity: 1;
          transform: scale(1);
          pointer-events: auto;
        }

        /* Bubble positions */
        .wc-ai-bot--bubble.wc-ai-bot--bottom-right .wc-ai-bot-container {
          bottom: 1rem;
          right: 1rem;
        }

        .wc-ai-bot--bubble.wc-ai-bot--bottom-left .wc-ai-bot-container {
          bottom: 1rem;
          left: 1rem;
        }

        .wc-ai-bot--bubble.wc-ai-bot--top-right .wc-ai-bot-container {
          top: 1rem;
          right: 1rem;
        }

        .wc-ai-bot--bubble.wc-ai-bot--top-left .wc-ai-bot-container {
          top: 1rem;
          left: 1rem;
        }

        /* Theme: Minimal */
        .wc-ai-bot--minimal .wc-ai-bot-container {
          width: 100%;
          height: 100%;
          border-radius: 0;
          box-shadow: none;
        }

        .wc-ai-bot--minimal .wc-ai-bot-header {
          background: transparent;
          color: var(--color);
          border-bottom: 1px solid var(--border-color);
        }

        .wc-ai-bot--minimal .wc-ai-bot-header button {
          color: var(--color);
        }

        /* Theme: Sidebar */
        .wc-ai-bot--sidebar .wc-ai-bot-container {
          width: 100%;
          height: 100%;
          border-radius: 0;
        }

        .wc-ai-bot--sidebar .wc-ai-bot-messages {
          max-height: none;
        }

        /* Responsive */
        @media (max-width: 640px) {
          .wc-ai-bot--bubble .wc-ai-bot-container {
            width: calc(100vw - 2rem);
            height: calc(100vh - 2rem);
            max-width: 350px;
            max-height: 500px;
          }
        }

        /* Unsupported UI */
        .wc-ai-bot-container--unsupported {
          display: flex;
          align-items: center;
          justify-content: center;
          min-height: 300px;
        }

        .wc-ai-bot-unsupported {
          text-align: center;
          padding: 2rem;
          max-width: 400px;
        }

        .wc-ai-bot-unsupported-icon {
          color: var(--warning-color, #f59e0b);
          margin-bottom: 1rem;
        }

        .wc-ai-bot-unsupported-title {
          font-size: 1.25rem;
          font-weight: 600;
          margin-bottom: 0.75rem;
          color: var(--color);
        }

        .wc-ai-bot-unsupported-message {
          color: var(--muted-color);
          margin-bottom: 1rem;
        }

        .wc-ai-bot-unsupported-help {
          font-size: 0.875rem;
          color: var(--muted-color);
        }
      `.trim();this.loadStyle("wc-ai-bot-style",s);let a=this.getAttribute("theme")||"bubble",r=this.getAttribute("position")||"bottom-right",l=this.getAttribute("max-height");if(this.classList.remove("wc-ai-bot--bubble","wc-ai-bot--minimal","wc-ai-bot--sidebar"),this.classList.remove("wc-ai-bot--bottom-right","wc-ai-bot--bottom-left","wc-ai-bot--top-right","wc-ai-bot--top-left"),this.classList.add(`wc-ai-bot--${a}`),a==="bubble"&&r&&this.classList.add(`wc-ai-bot--${r}`),l&&a!=="bubble"&&this._container?this._container.style.maxHeight=l:this._container&&(this._container.style.maxHeight=""),this._container){let c=this._container.querySelector(".wc-ai-bot-toggle");c&&(c.style.display=a==="bubble"?"block":"none")}}async _initializeModel(){let s=this.getAttribute("model");!s&&this._detectedCapability&&(this._detectedCapability==="high"||this._detectedCapability==="medium"?s="Llama-3.2-3B-Instruct-q4f32_1-MLC":s="Llama-3.2-1B-Instruct-q4f32_1-MLC",this.getAttribute("debug")==="true"&&console.log(`[wc-ai-bot] Auto-selected model ${s} based on ${this._detectedCapability} capability`)),s||(s="Llama-3.2-1B-Instruct-q4f32_1-MLC");let a=this.getAttribute("bot-id")||"default";try{if(this._updateStatus("Initializing AI model..."),d||(this._updateStatus("Loading WebLLM..."),d=await import("https://esm.run/@mlc-ai/web-llm")),e.has(s)){this._engine=e.get(s),this._isModelReady=!0,this._sendButton.disabled=!1,this._updateStatus(""),this._emitEvent("bot:ready",{botId:a,model:s});return}if(t.has(s)){this._updateStatus("Waiting for model to load..."),this._engine=await t.get(s),this._isModelReady=!0,this._sendButton.disabled=!1,this._updateStatus(""),this._emitEvent("bot:ready",{botId:a,model:s});return}let r=this._loadModel(s);t.set(s,r),this._engine=await r,e.set(s,this._engine),t.delete(s),this._isModelReady=!0,this._sendButton.disabled=!1,this._updateStatus(""),this._emitEvent("bot:ready",{botId:a,model:s}),localStorage.setItem("wc-ai-bot-success","true")}catch(r){console.error("[wc-ai-bot] Failed to initialize model:",r),this._error=r.message,this._updateStatus(`Error: ${r.message}`,"error"),this._emitEvent("bot:error",{botId:a,error:r.message}),this.getAttribute("force-enable")!=="true"&&localStorage.setItem("wc-ai-bot-failure","true")}}async _loadModel(s){let a=new d.MLCEngine,r=0,l=null;a.setInitProgressCallback(c=>{let p=Math.round(c.progress*100);this._modelProgress=p,c.text?this._updateStatus(`${c.text} ${p}%`):this._updateStatus(`Loading model: ${p}%`),l&&clearTimeout(l),r=p,l=setTimeout(()=>{r<100&&this._updateStatus(`Download may be stalled at ${r}%. Check network connection.`,"warning")},3e4)});try{return await a.reload(s),l&&clearTimeout(l),a}catch(c){throw l&&clearTimeout(l),c}}_handleAttributeChange(s,a,r){if(!(s==="system-prompt"&&this._isModelReady))if(s==="theme"||s==="position"||s==="max-height")this._applyStyles();else if(s==="title"&&this._container){let l=this._container.querySelector(".wc-ai-bot-header-title span");l&&(l.textContent=a)}else s==="placeholder"&&this._input&&(this._input.placeholder=a||"Type your message...")}_handleSend(){let s=this._input.value.trim();!s||!this._isModelReady||this._isLoading||this._sendMessage(s)}_handleKeydown(s){s.key==="Enter"&&!s.shiftKey&&(s.preventDefault(),this._handleSend())}_handleToggle(){this._isMinimized=!this._isMinimized,this.classList.toggle("wc-ai-bot--open",!this._isMinimized),this._isMinimized?this._fab&&(this._fab.style.display="flex"):(this._input.focus(),this._fab&&(this._fab.style.display="none"))}_handleClose(){this.getAttribute("theme")==="bubble"?(this._isMinimized=!0,this.classList.remove("wc-ai-bot--open"),this._fab&&(this._fab.style.display="flex")):this._emitEvent("bot:closed",{botId:this.getAttribute("bot-id")})}async _sendMessage(s){let a=this.getAttribute("bot-id")||"default";this._addMessage("user",s),this._input.value="",this._adjustInputHeight(),this._emitEvent("bot:message-sent",{botId:a,message:s}),this._isLoading=!0,this._sendButton.disabled=!0;let r=this._addMessage("bot","...",!0);try{let l=this._prepareMessages(s),c=parseFloat(this.getAttribute("temperature")||"0.7"),p=parseInt(this.getAttribute("max-tokens")||"1000"),u=await this._engine.chat.completions.create({messages:l,temperature:c,max_tokens:p,stream:!0}),h="";for await(let m of u){let b=m.choices[0].delta.content||"";h+=b,this._updateMessage(r,h)}this.getAttribute("debug")==="true"&&console.log("[wc-ai-bot] Raw LLM response:",h),this._emitEvent("bot:response-received",{botId:a,response:h})}catch(l){console.error("[wc-ai-bot] Failed to get response:",l),this._updateMessage(r,`Error: ${l.message}`),this._emitEvent("bot:error",{botId:a,error:l.message})}finally{this._isLoading=!1,this._sendButton.disabled=!1,this._input.focus()}}_prepareMessages(s){let r=[{role:"system",content:this.getAttribute("system-prompt")||"You are a helpful AI assistant. Be concise and friendly in your responses."}];return this._messages.slice(-10).forEach(c=>{c.role!=="system"&&r.push({role:c.role==="user"?"user":"assistant",content:c.content})}),r.push({role:"user",content:s}),r}_addMessage(s,a,r=!1){let l=Date.now().toString(),c={id:l,role:s,content:a,timestamp:new Date,isLoading:r};this._messages.push(c);let p=document.createElement("div");p.className=`wc-ai-bot-message wc-ai-bot-message--${s}`,p.dataset.messageId=l;let u=document.createElement("div");if(u.className="wc-ai-bot-message-bubble",r)u.classList.add("wc-ai-bot-message-bubble--loading"),u.innerHTML='<wc-loader size="90px" speed="1s" thickness="12px"></wc-loader>';else if(s==="bot"&&i&&i.marked){let h=i.marked.parse(a);u.innerHTML=h,this.getAttribute("debug")==="true"&&console.log("[wc-ai-bot] Parsed HTML:",h)}else u.textContent=a;return p.appendChild(u),this._messagesContainer.appendChild(p),this._messagesContainer.scrollTop=this._messagesContainer.scrollHeight,l}_updateMessage(s,a){let r=this._messagesContainer.querySelector(`[data-message-id="${s}"]`);if(r){let c=r.querySelector(".wc-ai-bot-message-bubble");if(c)if(c.classList.remove("wc-ai-bot-message-bubble--loading"),i&&i.marked){let p=i.marked.parse(a);c.innerHTML=p,this.getAttribute("debug")==="true"&&console.log("[wc-ai-bot] Updated HTML:",p)}else c.textContent=a}let l=this._messages.find(c=>c.id===s);l&&(l.content=a,l.isLoading=!1),this._messagesContainer.scrollTop=this._messagesContainer.scrollHeight}_updateStatus(s,a="info"){this._statusBar&&(this._statusBar.textContent=s,this._statusBar.className=`wc-ai-bot-status wc-ai-bot-status--${a}`,this._statusBar.style.display=s?"block":"none")}_adjustInputHeight(){this._input.style.height="auto",this._input.style.height=Math.min(this._input.scrollHeight,120)+"px"}_getWelcomeMessage(){return`Hello! I'm ${this.getAttribute("title")||"AI Assistant"}. How can I help you today?`}_emitEvent(s,a){this.dispatchEvent(new CustomEvent(s,{detail:a,bubbles:!0,composed:!0}));let r=this.getAttribute("bot-id");r&&window.wc&&window.wc.EventHub&&window.wc.EventHub.broadcast(s,[`[bot-id="${r}"]`],a)}async sendMessage(s){this._isModelReady&&!this._isLoading&&(this._input.value=s,await this._sendMessage(s))}static async getAvailableModels(){return d||(d=await import("https://esm.run/@mlc-ai/web-llm")),d.prebuiltAppConfig&&d.prebuiltAppConfig.model_list?d.prebuiltAppConfig.model_list.map(s=>({model_id:s.model_id,model:s.model,description:s.description||""})):[]}clearConversation(){this._messages=[],this._messagesContainer.innerHTML="",this._addMessage("bot",this._getWelcomeMessage()),this._emitEvent("bot:conversation-cleared",{botId:this.getAttribute("bot-id")})}exportConversation(){return{botId:this.getAttribute("bot-id"),model:this.getAttribute("model"),messages:this._messages.map(s=>({role:s.role,content:s.content,timestamp:s.timestamp}))}}setContext(s){this.setAttribute("system-prompt",s)}toggleMinimize(){this.getAttribute("theme")==="bubble"&&this._handleToggle()}async _checkSystemCapabilities(){try{if(this.getAttribute("force-enable")==="true")return console.warn("[wc-ai-bot] Force-enabled, skipping capability checks"),!0;let s=localStorage.getItem("wc-ai-bot-success"),a=localStorage.getItem("wc-ai-bot-failure");if(a==="true"&&s!=="true")return this._unsupportedReason='AI models previously failed to load on this device. Use force-enable="true" to retry.',!1;let r="gpu"in navigator,l=document.createElement("canvas"),c=l.getContext("webgl2")||l.getContext("webgl"),p=!!c;if(!r&&!p)return this._unsupportedReason="WebGPU and WebGL are not available. A modern browser with GPU support is required.",!1;let u="unknown";if(c){let m=c.getExtension("WEBGL_debug_renderer_info");m&&(u=c.getParameter(m.UNMASKED_RENDERER_WEBGL))}let h=null;for(let m of o.KNOWN_CAPABLE_CONFIGS)if(m.gpu.test(u)){h=m;break}return this.getAttribute("debug")==="true"&&console.log("[wc-ai-bot] Hardware detection:",{renderer:u,detectedConfig:h,hasWebGPU:r,hasWebGL:p,previousSuccess:s,previousFailure:a}),h?h.capability==="none"?(this._unsupportedReason=`${h.name} is not capable of running AI models efficiently. This would cause your browser to freeze.`,!1):h.capability==="low"&&(this.getAttribute("required-performance")||"low")!=="low"?(this._unsupportedReason=`${h.name} can only run small AI models. Set required-performance="low" to proceed.`,!1):(this._detectedCapability=h.capability,!0):s==="true"?!0:(this._unsupportedReason=`Unable to verify GPU compatibility (${u}). To protect your browsing experience, AI models are disabled. Add force-enable="true" to try anyway.`,!1)}catch(s){return console.error("[wc-ai-bot] Error checking system capabilities:",s),this._unsupportedReason="Error detecting system capabilities. AI models are disabled for safety.",!1}}_renderUnsupportedUI(){this._isUnsupported=!0;let s=this.getAttribute("theme")||"bubble",a=this.getAttribute("title")||"AI Assistant";if(s==="bubble"){this.style.display="none",this._emitEvent("bot:unsupported",{botId:this.getAttribute("bot-id"),reason:this._unsupportedReason});return}this._container=document.createElement("div"),this._container.className="wc-ai-bot-container wc-ai-bot-container--unsupported",this._container.innerHTML=`
        <div class="wc-ai-bot-unsupported">
          <div class="wc-ai-bot-unsupported-icon">
            <wc-fa-icon name="triangle-exclamation" icon-style="solid" size="2rem"></wc-fa-icon>
          </div>
          <h3 class="wc-ai-bot-unsupported-title">${a} Unavailable</h3>
          <p class="wc-ai-bot-unsupported-message">${this._unsupportedReason}</p>
          <p class="wc-ai-bot-unsupported-help">
            For the best experience, please use a modern browser on a device with at least 
            ${this.getAttribute("min-memory-gb")||"4"}GB of memory.
          </p>
        </div>
      `,this.appendChild(this._container),this._applyStyles(),this._emitEvent("bot:unsupported",{botId:this.getAttribute("bot-id"),reason:this._unsupportedReason})}static async checkSystemSupport(){try{let s=localStorage.getItem("wc-ai-bot-success")==="true",a=localStorage.getItem("wc-ai-bot-failure")==="true",r="gpu"in navigator,l=document.createElement("canvas"),c=l.getContext("webgl2")||l.getContext("webgl"),p=!!c;if(!r&&!p)return{supported:!1,reason:"No WebGPU or WebGL support",hasWebGPU:r,hasWebGL:p};let u="unknown";if(c){let b=c.getExtension("WEBGL_debug_renderer_info");b&&(u=c.getParameter(b.UNMASKED_RENDERER_WEBGL))}let h=null;for(let b of o.KNOWN_CAPABLE_CONFIGS)if(b.gpu.test(u)){h=b;break}let m={renderer:u,hasWebGPU:r,hasWebGL:p,previousSuccess:s,previousFailure:a};return h?(m.hardware=h.name,m.capability=h.capability,m.supported=h.capability!=="none",h.capability==="high"?(m.recommendation="Excellent hardware for AI models. Can run large models smoothly.",m.suggestedModel="Llama-3.2-3B-Instruct-q4f32_1-MLC"):h.capability==="medium"?(m.recommendation="Good hardware for AI models. Suitable for medium-sized models.",m.suggestedModel="Llama-3.2-3B-Instruct-q4f32_1-MLC"):h.capability==="low"?(m.recommendation="Limited hardware. Only small AI models recommended.",m.suggestedModel="Llama-3.2-1B-Instruct-q4f32_1-MLC"):(m.recommendation="This hardware cannot run AI models efficiently.",m.suggestedModel=null)):(m.hardware="Unknown",m.capability="unknown",m.supported=s&&!a,m.recommendation=s?"This hardware has successfully run AI models before.":'Unknown hardware. Use force-enable="true" to try at your own risk.'),m}catch(s){return{supported:!1,error:s.message,recommendation:"Error detecting hardware capabilities."}}}static clearStoredPreferences(){localStorage.removeItem("wc-ai-bot-success"),localStorage.removeItem("wc-ai-bot-failure")}}customElements.define(o.is,o)}if(!customElements.get("wc-hf-bot")){let d=null,i=null,e=new Map,t=new Map;class o extends g{static get observedAttributes(){return["bot-id","model","system-prompt","title","placeholder","theme","position","auto-open","max-height","temperature","max-tokens","debug","check-gpu-compatibility","force-enable"]}static KNOWN_CAPABLE_CONFIGS=[{gpu:/Apple M[1-4]/,capability:"high",name:"Apple Silicon"},{gpu:/RTX [34]0[6-9]0/,capability:"high",name:"NVIDIA RTX High-end"},{gpu:/RTX [34]0[7-8]0/,capability:"high",name:"NVIDIA RTX High-end"},{gpu:/RTX [34]0[5-6]0/,capability:"medium",name:"NVIDIA RTX Mid-range"},{gpu:/RTX 20[7-8]0/,capability:"medium",name:"NVIDIA RTX 20 Series"},{gpu:/GTX 16[6-8]0/,capability:"low",name:"NVIDIA GTX 16 Series"},{gpu:/Radeon RX 6[7-9]00/,capability:"medium",name:"AMD Radeon RX 6000"},{gpu:/Radeon RX 7[7-9]00/,capability:"medium",name:"AMD Radeon RX 7000"},{gpu:/Intel.*HD Graphics/,capability:"none",name:"Intel HD Graphics"},{gpu:/Intel.*UHD Graphics/,capability:"none",name:"Intel UHD Graphics"},{gpu:/Intel.*Iris/,capability:"low",name:"Intel Iris"},{gpu:/Radeon Vega/,capability:"low",name:"AMD Radeon Vega"},{gpu:/GeForce MX/,capability:"none",name:"NVIDIA GeForce MX"}];constructor(){super(),this._messages=[],this._isLoading=!1,this._isModelReady=!1,this._isMinimized=!0,this._error=null,this._tokenizer=null,this._model=null,this._modelProgress=0,this._isUnsupported=!1,this._unsupportedReason="",this._currentMessageId=null,this._currentResponse="",this._handleSend=this._handleSend.bind(this),this._handleKeydown=this._handleKeydown.bind(this),this._handleToggle=this._handleToggle.bind(this),this._handleClose=this._handleClose.bind(this)}static get is(){return"wc-hf-bot"}async _render(){if(this.classList.add("contents"),this.getAttribute("check-gpu-compatibility")!=="false"&&!await this._checkSystemCapabilities()){this._renderUnsupportedUI();return}let a=this.getAttribute("title")||"HF Assistant",r=this.getAttribute("placeholder")||"Type your message...";this._container=document.createElement("div"),this._container.className="wc-hf-bot-container";let l=document.createElement("div");l.className="wc-hf-bot-header",l.innerHTML=`
        <div class="wc-hf-bot-header-title">
          <wc-fa-icon name="robot" icon-style="solid" size="1.2rem" class="mr-2"></wc-fa-icon>
          <span>${a}</span>
        </div>
        <div class="wc-hf-bot-header-actions">
          <button class="wc-hf-bot-toggle" aria-label="Toggle chat">
            <wc-fa-icon name="minus" icon-style="solid" size="1rem"></wc-fa-icon>
          </button>
          <button class="wc-hf-bot-close" aria-label="Close chat">
            <wc-fa-icon name="xmark" icon-style="solid" size="1rem"></wc-fa-icon>
          </button>
        </div>
      `,this._messagesContainer=document.createElement("div"),this._messagesContainer.className="wc-hf-bot-messages";let c=document.createElement("div");c.className="wc-hf-bot-input-container",this._input=document.createElement("textarea"),this._input.className="wc-hf-bot-input",this._input.placeholder=r,this._input.rows=2,this._sendButton=document.createElement("button"),this._sendButton.className="wc-hf-bot-send",this._sendButton.innerHTML='<wc-fa-icon name="paper-plane" icon-style="solid" size="1rem"></wc-fa-icon>',this._sendButton.disabled=!0,c.appendChild(this._input),c.appendChild(this._sendButton),this._container.appendChild(l),this._container.appendChild(this._messagesContainer),this._container.appendChild(c),this._statusBar=document.createElement("div"),this._statusBar.className="wc-hf-bot-status",this._container.appendChild(this._statusBar),this.appendChild(this._container),(this.getAttribute("theme")==="bubble"||!this.getAttribute("theme"))&&(this._fab=document.createElement("button"),this._fab.className="wc-hf-bot-fab",this._fab.setAttribute("aria-label","Open chat"),this._fab.innerHTML='<wc-fa-icon name="message" icon-style="solid" size="1.5rem"></wc-fa-icon>',this._fab.addEventListener("click",()=>{this._isMinimized=!1,this.classList.add("wc-hf-bot--open"),this._fab.style.display="none",setTimeout(()=>this._input.focus(),100)}),this.appendChild(this._fab)),this._applyStyles(),this._sendButton.addEventListener("click",this._handleSend),this._input.addEventListener("keydown",this._handleKeydown),this._input.addEventListener("input",()=>this._adjustInputHeight());let p=this._container.querySelector(".wc-hf-bot-toggle");p&&p.addEventListener("click",this._handleToggle);let u=this._container.querySelector(".wc-hf-bot-close");if(u&&u.addEventListener("click",this._handleClose),await this._initializeModel(),!i)try{i=await import("https://cdn.jsdelivr.net/npm/marked@4/lib/marked.esm.js"),console.log("[wc-hf-bot] Marked module loaded successfully")}catch(h){console.error("[wc-hf-bot] Failed to load marked module:",h)}this.getAttribute("auto-open")==="true"&&(this._isMinimized=!1,this.classList.add("wc-hf-bot--open"),this._fab&&(this._fab.style.display="none")),this._addMessage("bot",this._getWelcomeMessage())}_applyStyles(){let s=`
        wc-hf-bot {
          display: contents;
        }

        /* Base container styles */
        .wc-hf-bot-container {
          display: flex;
          flex-direction: column;
          background: var(--component-bg-color);
          border: 1px solid var(--border-color);
          border-radius: 0.5rem;
          overflow: hidden;
          box-shadow: 0 4px 6px -1px rgb(0 0 0 / 0.1);
        }

        /* Header styles */
        .wc-hf-bot-header {
          display: flex;
          justify-content: space-between;
          align-items: center;
          padding: 0.75rem 1rem;
          background: var(--primary-bg-color);
          color: var(--primary-color);
        }

        .wc-hf-bot-header-title {
          display: flex;
          align-items: center;
          font-weight: 600;
        }

        .wc-hf-bot-header-actions {
          display: flex;
          gap: 0.5rem;
        }

        .wc-hf-bot-header button {
          background: transparent;
          border: none;
          color: var(--primary-color);
          cursor: pointer;
          padding: 0.25rem;
          border-radius: 0.25rem;
          transition: opacity 0.2s;
        }

        .wc-hf-bot-header button:hover {
          opacity: 0.8;
        }

        /* Messages container */
        .wc-hf-bot-messages {
          flex: 1;
          overflow-y: auto;
          padding: 1rem;
          min-height: 200px;
          max-height: 400px;
          background: var(--component-bg-color);
        }

        /* Message styles */
        .wc-hf-bot-message {
          margin-bottom: 1rem;
          display: flex;
        }

        .wc-hf-bot-message--user {
          justify-content: flex-end;
        }

        .wc-hf-bot-message--bot {
          justify-content: flex-start;
        }

        .wc-hf-bot-message-bubble {
          max-width: 80%;
          padding: 0.75rem;
          border-radius: 0.5rem;
          word-wrap: break-word;
          white-space: pre-wrap;
        }

        .wc-hf-bot-message--user .wc-hf-bot-message-bubble {
          background: var(--primary-color);
          color: var(--primary-bg-color);
        }

        .wc-hf-bot-message--bot .wc-hf-bot-message-bubble {
          background: var(--primary-bg-color);
          color: var(--primary-color);
        }

        /* Markdown content styling */
        .wc-hf-bot-message-bubble p {
          margin: 0 0 0.5rem 0;
        }
        
        .wc-hf-bot-message-bubble p:last-child {
          margin-bottom: 0;
        }
        
        .wc-hf-bot-message-bubble ul,
        .wc-hf-bot-message-bubble ol {
          margin: 0 0 0.5rem 0;
          padding-left: 1.5rem;
        }
        
        .wc-hf-bot-message-bubble li {
          margin-bottom: 0.25rem;
        }
        
        .wc-hf-bot-message-bubble pre {
          background: var(--code-bg-color, rgba(0,0,0,0.1));
          padding: 0.5rem;
          border-radius: 0.25rem;
          overflow-x: auto;
          margin: 0.5rem 0;
        }
        
        .wc-hf-bot-message-bubble code {
          background: var(--code-bg-color, rgba(0,0,0,0.1));
          padding: 0.125rem 0.25rem;
          border-radius: 0.125rem;
          font-size: 0.875em;
        }
        
        .wc-hf-bot-message-bubble pre code {
          background: none;
          padding: 0;
        }

        /* Transparent background for loading bubbles */
        .wc-hf-bot-message-bubble--loading {
          background: transparent !important;
          padding: 0 !important;
          display: flex;
          flex: 1 1 0%;
          justify-content: center;
          align-items: center;
          min-width: 100px;
          min-height: 60px;
        }

        /* Input container */
        .wc-hf-bot-input-container {
          display: flex;
          align-items: center;
          gap: 0.5rem;
          padding: 1rem 0 1rem 1rem;
          border-top: 1px solid var(--border-color);
          background: var(--component-bg-color);
        }

        .wc-hf-bot-input {
          flex: 1;
          padding: 0.5rem;
          border: 1px solid var(--border-color);
          border-radius: 0.375rem;
          background: var(--input-bg-color);
          color: var(--input-color);
          resize: none;
          font-family: inherit;
          font-size: 0.875rem;
          line-height: 1.25rem;
          min-height: 3.5rem;
          max-height: 120px;
        }

        .wc-hf-bot-input:focus {
          outline: none;
          border-color: var(--primary-color);
          box-shadow: 0 0 0 3px var(--primary-color-alpha);
        }

        .wc-hf-bot-send {
          padding: 0.5rem 0.75rem;
          border: none;
          border-radius: 0.375rem;
          cursor: pointer;
          transition: opacity 0.2s;
          display: flex;
          align-items: center;
          justify-content: center;
          align-self: center;
          flex-shrink: 0;
          height: 2.5rem;
        }

        .wc-hf-bot-send:hover:not(:disabled) {
          opacity: 0.9;
        }

        .wc-hf-bot-send:disabled {
          opacity: 0.5;
          cursor: not-allowed;
        }

        /* Status bar */
        .wc-hf-bot-status {
          display: none;
          padding: 0.5rem 1rem;
          font-size: 0.875rem;
          background: var(--primary-bg-color);
          color: var(--primary-color);
          border-top: 1px solid var(--border-color);
        }

        .wc-hf-bot-status--error {
          background: var(--danger-color);
          color: var(--danger-contrast-color);
        }

        .wc-hf-bot-status--warning {
          background: var(--warning-color, #f59e0b);
          color: var(--warning-contrast-color, white);
        }

        /* FAB Button */
        .wc-hf-bot-fab {
          position: fixed;
          width: 60px;
          height: 60px;
          border-radius: 50%;
          background: var(--primary-bg-color);
          color: var(--primary-color);
          border: none;
          box-shadow: 0 4px 6px -1px rgb(0 0 0 / 0.1), 0 2px 4px -1px rgb(0 0 0 / 0.06);
          cursor: pointer;
          transition: transform 0.2s, box-shadow 0.2s;
          z-index: 999;
          display: flex;
          align-items: center;
          justify-content: center;
        }

        .wc-hf-bot-fab:hover {
          transform: scale(1.05);
          box-shadow: 0 10px 15px -3px rgb(0 0 0 / 0.1), 0 4px 6px -2px rgb(0 0 0 / 0.05);
        }

        /* FAB positions based on bot position */
        .wc-hf-bot--bubble.wc-hf-bot--bottom-right .wc-hf-bot-fab {
          bottom: 1rem;
          right: 1rem;
        }

        .wc-hf-bot--bubble.wc-hf-bot--bottom-left .wc-hf-bot-fab {
          bottom: 1rem;
          left: 1rem;
        }

        .wc-hf-bot--bubble.wc-hf-bot--top-right .wc-hf-bot-fab {
          top: 1rem;
          right: 1rem;
        }

        .wc-hf-bot--bubble.wc-hf-bot--top-left .wc-hf-bot-fab {
          top: 1rem;
          left: 1rem;
        }

        /* Hide FAB for non-bubble themes */
        .wc-hf-bot--minimal .wc-hf-bot-fab,
        .wc-hf-bot--sidebar .wc-hf-bot-fab {
          display: none !important;
        }

        /* Theme: Bubble */
        .wc-hf-bot--bubble .wc-hf-bot-container {
          position: fixed;
          width: 350px;
          height: 500px;
          z-index: 1000;
          transition: opacity 0.3s, transform 0.3s;
          opacity: 0;
          transform: scale(0.95);
          pointer-events: none;
        }

        .wc-hf-bot--bubble.wc-hf-bot--open .wc-hf-bot-container {
          opacity: 1;
          transform: scale(1);
          pointer-events: auto;
        }

        /* Bubble positions */
        .wc-hf-bot--bubble.wc-hf-bot--bottom-right .wc-hf-bot-container {
          bottom: 1rem;
          right: 1rem;
        }

        .wc-hf-bot--bubble.wc-hf-bot--bottom-left .wc-hf-bot-container {
          bottom: 1rem;
          left: 1rem;
        }

        .wc-hf-bot--bubble.wc-hf-bot--top-right .wc-hf-bot-container {
          top: 1rem;
          right: 1rem;
        }

        .wc-hf-bot--bubble.wc-hf-bot--top-left .wc-hf-bot-container {
          top: 1rem;
          left: 1rem;
        }

        /* Theme: Minimal */
        .wc-hf-bot--minimal .wc-hf-bot-container {
          width: 100%;
          height: 100%;
          border-radius: 0;
          box-shadow: none;
        }

        .wc-hf-bot--minimal .wc-hf-bot-header {
          background: transparent;
          color: var(--color);
          border-bottom: 1px solid var(--border-color);
        }

        .wc-hf-bot--minimal .wc-hf-bot-header button {
          color: var(--color);
        }

        /* Theme: Sidebar */
        .wc-hf-bot--sidebar .wc-hf-bot-container {
          width: 100%;
          height: 100%;
          border-radius: 0;
        }

        .wc-hf-bot--sidebar .wc-hf-bot-messages {
          max-height: none;
        }

        /* Responsive */
        @media (max-width: 640px) {
          .wc-hf-bot--bubble .wc-hf-bot-container {
            width: calc(100vw - 2rem);
            height: calc(100vh - 2rem);
            max-width: 350px;
            max-height: 500px;
          }
        }

        /* Unsupported UI */
        .wc-hf-bot-container--unsupported {
          display: flex;
          align-items: center;
          justify-content: center;
          min-height: 300px;
        }

        .wc-hf-bot-unsupported {
          text-align: center;
          padding: 2rem;
          max-width: 400px;
        }

        .wc-hf-bot-unsupported-icon {
          color: var(--warning-color, #f59e0b);
          margin-bottom: 1rem;
        }

        .wc-hf-bot-unsupported-title {
          font-size: 1.25rem;
          font-weight: 600;
          margin-bottom: 0.75rem;
          color: var(--color);
        }

        .wc-hf-bot-unsupported-message {
          color: var(--muted-color);
          margin-bottom: 1rem;
        }

        .wc-hf-bot-unsupported-help {
          font-size: 0.875rem;
          color: var(--muted-color);
        }
      `.trim();this.loadStyle("wc-hf-bot-style",s);let a=this.getAttribute("theme")||"bubble",r=this.getAttribute("position")||"bottom-right",l=this.getAttribute("max-height");if(this.classList.remove("wc-hf-bot--bubble","wc-hf-bot--minimal","wc-hf-bot--sidebar"),this.classList.remove("wc-hf-bot--bottom-right","wc-hf-bot--bottom-left","wc-hf-bot--top-right","wc-hf-bot--top-left"),this.classList.add(`wc-hf-bot--${a}`),a==="bubble"&&r&&this.classList.add(`wc-hf-bot--${r}`),l&&a!=="bubble"&&this._container?this._container.style.maxHeight=l:this._container&&(this._container.style.maxHeight=""),this._container){let c=this._container.querySelector(".wc-hf-bot-toggle");c&&(c.style.display=a==="bubble"?"block":"none")}}async _initializeModel(){let s=this.getAttribute("model");!s&&this._detectedCapability&&(this._detectedCapability==="high"||this._detectedCapability==="medium"?s="Xenova/gpt2":s="Xenova/distilgpt2",this.getAttribute("debug")==="true"&&console.log(`[wc-hf-bot] Auto-selected model ${s} based on ${this._detectedCapability} capability`)),s||(s="Xenova/distilgpt2");let a=this.getAttribute("bot-id")||"default";try{if(this._updateStatus("Initializing AI model..."),d||(this._updateStatus("Loading Transformers.js..."),d=await import("https://cdn.jsdelivr.net/npm/@huggingface/transformers@3.5.0")),e.has(s)){let c=e.get(s);this._tokenizer=c.tokenizer,this._model=c.model,this._isModelReady=!0,this._sendButton.disabled=!1,this._updateStatus(""),this._emitEvent("bot:ready",{botId:a,model:s});return}if(t.has(s)){this._updateStatus("Waiting for model to load...");let c=await t.get(s);this._tokenizer=c.tokenizer,this._model=c.model,this._isModelReady=!0,this._sendButton.disabled=!1,this._updateStatus(""),this._emitEvent("bot:ready",{botId:a,model:s});return}let r=this._loadModel(s);t.set(s,r);let l=await r;this._tokenizer=l.tokenizer,this._model=l.model,e.set(s,l),t.delete(s),this._isModelReady=!0,this._sendButton.disabled=!1,this._updateStatus(""),this._emitEvent("bot:ready",{botId:a,model:s}),localStorage.setItem("wc-hf-bot-success","true")}catch(r){console.error("[wc-hf-bot] Failed to initialize model:",r),this._error=r.message,this._updateStatus(`Error: ${r.message}`,"error"),this._emitEvent("bot:error",{botId:a,error:r.message}),this.getAttribute("force-enable")!=="true"&&localStorage.setItem("wc-hf-bot-failure","true")}}async _loadModel(s){let{AutoTokenizer:a,AutoModelForCausalLM:r,TextStreamer:l,InterruptableStoppingCriteria:c,env:p}=d,u=h=>{if(h.status==="progress"&&h.file){let m=Math.round((h.progress||0)*100);this._modelProgress=m,this._updateStatus(`Downloading ${h.file}: ${m}%`)}else h.status==="done"&&this._updateStatus("Model loaded, initializing...")};try{this._updateStatus("Loading tokenizer...");let h=await a.from_pretrained(s,{progress_callback:u});this._updateStatus("Loading model...");let m="gpu"in navigator,b=typeof Float16Array<"u",f={progress_callback:u};m&&b?(f.dtype="q4f16",f.device="webgpu"):m?(f.dtype="q4",f.device="webgpu"):f.dtype="q4",this.getAttribute("debug")==="true"&&console.log("[wc-hf-bot] Model loading config:",{hasWebGPU:m,hasFloat16:b,modelOptions:f});let v=await r.from_pretrained(s,f);return{tokenizer:h,model:v}}catch(h){throw h}}_handleAttributeChange(s,a,r){if(!(s==="system-prompt"&&this._isModelReady))if(s==="theme"||s==="position"||s==="max-height")this._applyStyles();else if(s==="title"&&this._container){let l=this._container.querySelector(".wc-hf-bot-header-title span");l&&(l.textContent=a)}else s==="placeholder"&&this._input&&(this._input.placeholder=a||"Type your message...")}_handleSend(){let s=this._input.value.trim();!s||!this._isModelReady||this._isLoading||this._sendMessage(s)}_handleKeydown(s){s.key==="Enter"&&!s.shiftKey&&(s.preventDefault(),this._handleSend())}_handleToggle(){this._isMinimized=!this._isMinimized,this.classList.toggle("wc-hf-bot--open",!this._isMinimized),this._isMinimized?this._fab&&(this._fab.style.display="flex"):(this._input.focus(),this._fab&&(this._fab.style.display="none"))}_handleClose(){this.getAttribute("theme")==="bubble"?(this._isMinimized=!0,this.classList.remove("wc-hf-bot--open"),this._fab&&(this._fab.style.display="flex")):this._emitEvent("bot:closed",{botId:this.getAttribute("bot-id")})}async _sendMessage(s){let a=this.getAttribute("bot-id")||"default";this._addMessage("user",s),this._input.value="",this._adjustInputHeight(),this._emitEvent("bot:message-sent",{botId:a,message:s}),this._isLoading=!0,this._sendButton.disabled=!0;let r=this._addMessage("bot","...",!0);this._currentMessageId=r,this._currentResponse="";try{let l=this._prepareMessages(s),c;if(this._tokenizer.apply_chat_template){let f=this._tokenizer.apply_chat_template(l,{tokenize:!1,add_generation_prompt:!0});c=await this._tokenizer(f)}else{let v=l.slice(-5).map(E=>E.role==="system"?E.content:E.role==="user"?`User: ${E.content}`:`Assistant: ${E.content}`).join(`
`)+`
Assistant:`;c=await this._tokenizer(v)}let p=parseFloat(this.getAttribute("temperature")||"0.7"),u=parseInt(this.getAttribute("max-tokens")||"1000"),{TextStreamer:h}=d,m=new h(this._tokenizer,{skip_prompt:!0,skip_special_tokens:!0,callback_function:f=>{this._currentResponse+=f,this._updateMessage(this._currentMessageId,this._currentResponse)}}),b=await this._model.generate({...c,max_new_tokens:u,temperature:p,do_sample:p>0,streamer:m,return_dict_in_generate:!0});this.getAttribute("debug")==="true"&&console.log("[wc-hf-bot] Raw response:",this._currentResponse),this._emitEvent("bot:response-received",{botId:a,response:this._currentResponse})}catch(l){console.error("[wc-hf-bot] Failed to get response:",l),this._updateMessage(r,`Error: ${l.message}`),this._emitEvent("bot:error",{botId:a,error:l.message})}finally{this._isLoading=!1,this._sendButton.disabled=!1,this._input.focus()}}_prepareMessages(s){let r=[{role:"system",content:this.getAttribute("system-prompt")||"You are a helpful AI assistant. Be concise and friendly in your responses."}];return this._messages.slice(-10).forEach(c=>{c.role!=="system"&&r.push({role:c.role==="user"?"user":"assistant",content:c.content})}),r.push({role:"user",content:s}),r}_addMessage(s,a,r=!1){let l=Date.now().toString(),c={id:l,role:s,content:a,timestamp:new Date,isLoading:r};this._messages.push(c);let p=document.createElement("div");p.className=`wc-hf-bot-message wc-hf-bot-message--${s}`,p.dataset.messageId=l;let u=document.createElement("div");if(u.className="wc-hf-bot-message-bubble",r)u.classList.add("wc-hf-bot-message-bubble--loading"),u.innerHTML='<wc-loader size="90px" speed="1s" thickness="12px"></wc-loader>';else if(s==="bot"&&i&&i.marked){let h=i.marked.parse(a);u.innerHTML=h,this.getAttribute("debug")==="true"&&console.log("[wc-hf-bot] Parsed HTML:",h)}else u.textContent=a;return p.appendChild(u),this._messagesContainer.appendChild(p),this._messagesContainer.scrollTop=this._messagesContainer.scrollHeight,l}_updateMessage(s,a){let r=this._messagesContainer.querySelector(`[data-message-id="${s}"]`);if(r){let c=r.querySelector(".wc-hf-bot-message-bubble");if(c)if(c.classList.remove("wc-hf-bot-message-bubble--loading"),i&&i.marked){let p=i.marked.parse(a);c.innerHTML=p,this.getAttribute("debug")==="true"&&console.log("[wc-hf-bot] Updated HTML:",p)}else c.textContent=a}let l=this._messages.find(c=>c.id===s);l&&(l.content=a,l.isLoading=!1),this._messagesContainer.scrollTop=this._messagesContainer.scrollHeight}_updateStatus(s,a="info"){this._statusBar&&(this._statusBar.textContent=s,this._statusBar.className=`wc-hf-bot-status wc-hf-bot-status--${a}`,this._statusBar.style.display=s?"block":"none")}_adjustInputHeight(){this._input.style.height="auto",this._input.style.height=Math.min(this._input.scrollHeight,120)+"px"}_getWelcomeMessage(){return`Hello! I'm ${this.getAttribute("title")||"HF Assistant"} powered by Hugging Face. How can I help you today?`}_emitEvent(s,a){this.dispatchEvent(new CustomEvent(s,{detail:a,bubbles:!0,composed:!0}));let r=this.getAttribute("bot-id");r&&window.wc&&window.wc.EventHub&&window.wc.EventHub.broadcast(s,[`[bot-id="${r}"]`],a)}async _checkSystemCapabilities(){try{if(this.getAttribute("force-enable")==="true")return console.warn("[wc-hf-bot] Force-enabled, skipping capability checks"),!0;let s=localStorage.getItem("wc-hf-bot-success"),a=localStorage.getItem("wc-hf-bot-failure");if(a==="true"&&s!=="true")return this._unsupportedReason='AI models previously failed to load on this device. Use force-enable="true" to retry.',!1;let r="gpu"in navigator,l=document.createElement("canvas"),c=l.getContext("webgl2")||l.getContext("webgl"),p=!!c;if(!r&&!p)return this._unsupportedReason="WebGPU and WebGL are not available. A modern browser with GPU support is required.",!1;let u="unknown";if(c){let m=c.getExtension("WEBGL_debug_renderer_info");m&&(u=c.getParameter(m.UNMASKED_RENDERER_WEBGL))}let h=null;for(let m of o.KNOWN_CAPABLE_CONFIGS)if(m.gpu.test(u)){h=m;break}return this.getAttribute("debug")==="true"&&console.log("[wc-hf-bot] Hardware detection:",{renderer:u,detectedConfig:h,hasWebGPU:r,hasWebGL:p,previousSuccess:s,previousFailure:a}),h?h.capability==="none"?(this._unsupportedReason=`${h.name} is not capable of running AI models efficiently. This would cause your browser to freeze.`,!1):(h.capability==="low"&&console.warn("[wc-hf-bot] Low capability hardware detected. Performance may be poor."),this._detectedCapability=h.capability,!0):s==="true"?!0:(this._unsupportedReason=`Unable to verify GPU compatibility (${u}). To protect your browsing experience, AI models are disabled. Add force-enable="true" to try anyway.`,!1)}catch(s){return console.error("[wc-hf-bot] Error checking system capabilities:",s),this._unsupportedReason="Error detecting system capabilities. AI models are disabled for safety.",!1}}_renderUnsupportedUI(){this._isUnsupported=!0;let s=this.getAttribute("theme")||"bubble",a=this.getAttribute("title")||"HF Assistant";if(s==="bubble"){this.style.display="none",this._emitEvent("bot:unsupported",{botId:this.getAttribute("bot-id"),reason:this._unsupportedReason});return}this._container=document.createElement("div"),this._container.className="wc-hf-bot-container wc-hf-bot-container--unsupported",this._container.innerHTML=`
        <div class="wc-hf-bot-unsupported">
          <div class="wc-hf-bot-unsupported-icon">
            <wc-fa-icon name="triangle-exclamation" icon-style="solid" size="2rem"></wc-fa-icon>
          </div>
          <h3 class="wc-hf-bot-unsupported-title">${a} Unavailable</h3>
          <p class="wc-hf-bot-unsupported-message">${this._unsupportedReason}</p>
          <p class="wc-hf-bot-unsupported-help">
            For the best experience, please use a modern browser on a device with GPU support.
          </p>
        </div>
      `,this.appendChild(this._container),this._applyStyles(),this._emitEvent("bot:unsupported",{botId:this.getAttribute("bot-id"),reason:this._unsupportedReason})}async sendMessage(s){this._isModelReady&&!this._isLoading&&(this._input.value=s,await this._sendMessage(s))}static async getAvailableModels(){return d||(d=await import("https://cdn.jsdelivr.net/npm/@xenova/transformers@2.17.2")),[{model_id:"Xenova/distilgpt2",description:"DistilGPT2 - Tiny model for testing (~250MB)"},{model_id:"Xenova/gpt2",description:"GPT-2 Small - Classic model (~500MB)"},{model_id:"Xenova/gpt2-medium",description:"GPT-2 Medium - Better quality (~1.5GB)"},{model_id:"Xenova/DialoGPT-small",description:"DialoGPT - Optimized for conversations (~350MB)"},{model_id:"Xenova/DialoGPT-medium",description:"DialoGPT Medium - Better conversations (~1.5GB)"},{model_id:"Xenova/bloom-560m",description:"BLOOM 560M - Multilingual model (~1.1GB)"}]}static async checkSystemSupport(){try{let s=localStorage.getItem("wc-hf-bot-success")==="true",a=localStorage.getItem("wc-hf-bot-failure")==="true",r="gpu"in navigator,l=document.createElement("canvas"),c=l.getContext("webgl2")||l.getContext("webgl"),p=!!c;if(!r&&!p)return{supported:!1,reason:"No WebGPU or WebGL support",hasWebGPU:r,hasWebGL:p};let u="unknown";if(c){let b=c.getExtension("WEBGL_debug_renderer_info");b&&(u=c.getParameter(b.UNMASKED_RENDERER_WEBGL))}let h=null;for(let b of o.KNOWN_CAPABLE_CONFIGS)if(b.gpu.test(u)){h=b;break}let m={renderer:u,hasWebGPU:r,hasWebGL:p,previousSuccess:s,previousFailure:a};return h?(m.hardware=h.name,m.capability=h.capability,m.supported=h.capability!=="none",h.capability==="high"?(m.recommendation="Excellent hardware for AI models. Can run large models smoothly.",m.suggestedModel="Xenova/gpt2-medium"):h.capability==="medium"?(m.recommendation="Good hardware for AI models. Suitable for medium-sized models.",m.suggestedModel="Xenova/gpt2"):h.capability==="low"?(m.recommendation="Limited hardware. Only small AI models recommended.",m.suggestedModel="Xenova/distilgpt2"):(m.recommendation="This hardware cannot run AI models efficiently.",m.suggestedModel=null)):(m.hardware="Unknown",m.capability="unknown",m.supported=s&&!a,m.recommendation=s?"This hardware has successfully run AI models before.":'Unknown hardware. Use force-enable="true" to try at your own risk.'),m}catch(s){return{supported:!1,error:s.message,recommendation:"Error detecting hardware capabilities."}}}static clearStoredPreferences(){localStorage.removeItem("wc-hf-bot-success"),localStorage.removeItem("wc-hf-bot-failure")}clearConversation(){this._messages=[],this._messagesContainer.innerHTML="",this._addMessage("bot",this._getWelcomeMessage()),this._emitEvent("bot:conversation-cleared",{botId:this.getAttribute("bot-id")})}exportConversation(){return{botId:this.getAttribute("bot-id"),model:this.getAttribute("model"),messages:this._messages.map(s=>({role:s.role,content:s.content,timestamp:s.timestamp}))}}setContext(s){this.setAttribute("system-prompt",s)}toggleMinimize(){this.getAttribute("theme")==="bubble"&&this._handleToggle()}}customElements.define(o.is,o)}if(!customElements.get("wc-article-skeleton")){class d extends g{static get observedAttributes(){return["id","class"]}constructor(){super();let e=this.querySelector(".wc-article-skeleton");e?this.componentElement=e:(this.componentElement=document.createElement("div"),this._createElement(),this.appendChild(this.componentElement))}async connectedCallback(){super.connectedCallback(),this._applyStyle();let e={detail:{}},t=new CustomEvent("load",e);this.dispatchEvent(t)}disconnectedCallback(){super.disconnectedCallback(),this._unWireEvents()}_handleAttributeChange(e,t){e==="items"||super._handleAttributeChange(e,t)}_createElement(){this.componentElement.id="article-skeleton",this.componentElement.setAttribute("role","status"),this.componentElement.className="wc-article-skeleton max-w-full m-4 border border-solid card-border-color p-4 space-y-8 animate-pulse md:space-y-0 md:space-x-8 rtl:space-x-reverse md:flex md:flex-1 md:items-center",this.componentElement.innerHTML=`
        <div class="flex items-center justify-center w-full h-48 card-bg-color rounded-md sm:w-96">
          <svg class="w-10 h-10" aria-hidden="true" xmlns="http://www.w3.org/2000/svg" fill="currentColor" viewBox="0 0 20 18">
            <path d="M18 0H2a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2V2a2 2 0 0 0-2-2Zm-5.5 4a1.5 1.5 0 1 1 0 3 1.5 1.5 0 0 1 0-3Zm4.376 10.481A1 1 0 0 1 16 15H4a1 1 0 0 1-.895-1.447l3.5-7A1 1 0 0 1 7.468 6a.965.965 0 0 1 .9.5l2.775 4.757 1.546-1.887a1 1 0 0 1 1.618.1l2.541 4a1 1 0 0 1 .028 1.011Z"/>
          </svg>
        </div>
        <div class="w-full">
          <div class="h-2.5 card-bg-color rounded-full w-48 mb-4"></div>
          <div class="h-2 card-bg-color rounded-full max-w-[480px] mb-2.5"></div>
          <div class="h-2 card-bg-color rounded-full mb-2.5"></div>
          <div class="h-2 card-bg-color rounded-full max-w-[440px] mb-2.5"></div>
          <div class="h-2 card-bg-color rounded-full max-w-[460px] mb-2.5"></div>
          <div class="h-2 card-bg-color rounded-full max-w-[360px]"></div>
        </div>
        <span class="sr-only">Loading...</span>
      `.trim()}_applyStyle(){let e=`
wc-article-skeleton {
  display: contents;
}
wc-article-skeleton .wc-article-skeleton {
  background-color: var(--surface-1);
}
/* Space Utilities */
.space-y-8 > * + * {
  margin-top: 2rem;
}
.md:space-y-0 > * + * {
  margin-top: 0;
}
.md:space-x-8 > * + * {
  margin-left: 2rem;
}
.rtl:space-x-reverse > * + * {
  margin-left: 0;
  margin-right: 2rem;
}

.sm:w-96 {
  width: 24rem;
}
.max-w-[480px] {
  max-width: 480px;
}
.max-w-[440px] {
  max-width: 440px;
}
.max-w-[460px] {
  max-width: 460px;
}
.max-w-[360px] {
  max-width: 360px;
}
      `.trim();this.loadStyle("wc-article-skeleton",e)}_unWireEvents(){super._unWireEvents()}}customElements.define("wc-article-skeleton",d)}if(!customElements.get("wc-card-skeleton")){class d extends g{static get observedAttributes(){return["id","class"]}constructor(){super();let e=this.querySelector(".wc-card-skeleton");e?this.componentElement=e:(this.componentElement=document.createElement("div"),this._createElement(),this.appendChild(this.componentElement))}async connectedCallback(){super.connectedCallback(),this._applyStyle()}disconnectedCallback(){super.disconnectedCallback(),this._unWireEvents()}_handleAttributeChange(e,t){e==="items"||super._handleAttributeChange(e,t)}_createElement(){this.componentElement.id="card-skeleton",this.componentElement.setAttribute("role","status"),this.componentElement.className="wc-card-skeleton max-w-full m-4 p-4 border border-solid card-border-color rounded-md shadow animate-pulse md:p-6",this.componentElement.innerHTML=`
        <div class="flex items-center justify-center h-48 mb-4 card-bg-color rounded-md">
          <svg class="w-10 h-10" aria-hidden="true" xmlns="http://www.w3.org/2000/svg" fill="currentColor" viewBox="0 0 16 20">
              <path d="M14.066 0H7v5a2 2 0 0 1-2 2H0v11a1.97 1.97 0 0 0 1.934 2h12.132A1.97 1.97 0 0 0 16 18V2a1.97 1.97 0 0 0-1.934-2ZM10.5 6a1.5 1.5 0 1 1 0 2.999A1.5 1.5 0 0 1 10.5 6Zm2.221 10.515a1 1 0 0 1-.858.485h-8a1 1 0 0 1-.9-1.43L5.6 10.039a.978.978 0 0 1 .936-.57 1 1 0 0 1 .9.632l1.181 2.981.541-1a.945.945 0 0 1 .883-.522 1 1 0 0 1 .879.529l1.832 3.438a1 1 0 0 1-.031.988Z"/>
              <path d="M5 5V.13a2.96 2.96 0 0 0-1.293.749L.879 3.707A2.98 2.98 0 0 0 .13 5H5Z"/>
          </svg>
        </div>
        <div class="h-2.5 card-bg-color rounded-full w-48 mb-4"></div>
        <div class="h-2 card-bg-color rounded-full mb-2.5"></div>
        <div class="h-2 card-bg-color rounded-full mb-2.5"></div>
        <div class="h-2 card-bg-color rounded-full"></div>
        <div class="flex items-center mt-4">
          <svg class="text-color-2 w-10 h-10 me-3" aria-hidden="true" xmlns="http://www.w3.org/2000/svg" fill="currentColor" viewBox="0 0 20 20">
                <path d="M10 0a10 10 0 1 0 10 10A10.011 10.011 0 0 0 10 0Zm0 5a3 3 0 1 1 0 6 3 3 0 0 1 0-6Zm0 13a8.949 8.949 0 0 1-4.951-1.488A3.987 3.987 0 0 1 9 13h2a3.987 3.987 0 0 1 3.951 3.512A8.949 8.949 0 0 1 10 18Z"/>
            </svg>
            <div>
                <div class="h-2.5 card-bg-color rounded-full w-32 mb-2"></div>
                <div class="w-48 h-2 card-bg-color rounded-full"></div>
            </div>
        </div>
        <span class="sr-only">Loading...</span>
      `.trim()}_applyStyle(){let e=`
      wc-card-skeleton {
        display: contents;
      }
      wc-card-skeleton .wc-card-skeleton {
        background-color: var(--surface-1);
      }
      `.trim()}_unWireEvents(){super._unWireEvents()}}customElements.define("wc-card-skeleton",d)}if(!customElements.get("wc-list-skeleton")){class d extends g{static get observedAttributes(){return["id","class"]}constructor(){super();let e=this.querySelector(".wc-list-skeleton");e?this.componentElement=e:(this.componentElement=document.createElement("div"),this._createElement(),this.appendChild(this.componentElement))}async connectedCallback(){super.connectedCallback(),this._applyStyle()}disconnectedCallback(){super.disconnectedCallback(),this._unWireEvents()}_handleAttributeChange(e,t){e==="items"||super._handleAttributeChange(e,t)}_createElement(){this.componentElement.id="list-skeleton",this.componentElement.setAttribute("role","status"),this.componentElement.className="wc-list-skeleton m-4 p-4 space-y-4 border border-solid card-border-color rounded-md shadow animate-pulse md:p-6",this.componentElement.innerHTML=`
        <div class="flex items-center justify-between">
          <div class="w-5/6">
            <div class="h-2.5 card-bg-color rounded-full w-3/6 mb-2.5"></div>
            <div class="w-5/6 h-2 card-bg-color rounded-full"></div>
          </div>
          <div class="w-1/6 h-2.5 card-bg-color rounded-full"></div>
        </div>
        <div class="flex items-center justify-between pt-4">
          <div class="w-5/6">
            <div class="h-2.5 card-bg-color rounded-full w-3/6 mb-2.5"></div>
            <div class="w-5/6 h-2 card-bg-color rounded-full"></div>
          </div>
          <div class="w-1/6 h-2.5 card-bg-color rounded-full"></div>
        </div>
        <div class="flex items-center justify-between pt-4">
          <div class="w-5/6">
            <div class="h-2.5 card-bg-color rounded-full w-3/6 mb-2.5"></div>
            <div class="w-5/6 h-2 card-bg-color rounded-full"></div>
          </div>
          <div class="w-1/6 h-2.5 card-bg-color rounded-full"></div>
        </div>
        <div class="flex items-center justify-between pt-4">
          <div class="w-5/6">
            <div class="h-2.5 card-bg-color rounded-full w-3/6 mb-2.5"></div>
            <div class="w-5/6 h-2 card-bg-color rounded-full"></div>
          </div>
          <div class="w-1/6 h-2.5 card-bg-color rounded-full"></div>
        </div>
        <div class="flex items-center justify-between pt-4">
          <div class="w-5/6">
            <div class="h-2.5 card-bg-color rounded-full w-3/6 mb-2.5"></div>
            <div class="w-5/6 h-2 card-bg-color rounded-full"></div>
          </div>
          <div class="w-1/6 h-2.5 card-bg-color rounded-full"></div>
        </div>
        <span class="sr-only">Loading...</span>
      `.trim()}_applyStyle(){let e=`
wc-list-skeleton {
  display: contents;
}
wc-list-skeleton .wc-list-skeleton {
  background-color: var(--surface-1);
}
/* Spacing */
.md:p-6 {
  padding: 1.5rem;
}
.space-y-4 > * + * {
  margin-top: 1rem;
}

/* Width and Height */
.max-w-md {
  max-width: 28rem;
}

/* Shadows */
.shadow {
  box-shadow: 0 1px 3px rgba(0, 0, 0, 0.1), 0 1px 2px rgba(0, 0, 0, 0.06);
}
      `.trim();this.loadStyle("wc-list-skeleton-style",e)}_unWireEvents(){super._unWireEvents()}}customElements.define("wc-list-skeleton",d)}if(!customElements.get("wc-table-skeleton")){class d extends g{static get observedAttributes(){return["id","class"]}constructor(){super();let e=this.querySelector(".wc-table-skeleton");e?this.componentElement=e:(this.componentElement=document.createElement("div"),this._createElement(),this.appendChild(this.componentElement))}async connectedCallback(){super.connectedCallback(),this._applyStyle()}disconnectedCallback(){super.disconnectedCallback(),this._unWireEvents()}_handleAttributeChange(e,t){e==="items"||super._handleAttributeChange(e,t)}_createElement(){this.componentElement.id="table-skeleton",this.componentElement.setAttribute("role","status"),this.componentElement.className="wc-table-skeleton max-w-full m-4 p-4 space-y-4 border border-solid card-border-color rounded-md shadow animate-pulse md:p-6",this.componentElement.innerHTML=`
        <!-- Table Header Skeleton -->
        <div class="flex items-center justify-between">
          <div class="w-1/6 h-4 card-bg-color rounded-full"></div>
          <div class="w-1/6 h-4 card-bg-color rounded-full"></div>
          <div class="w-1/6 h-4 card-bg-color rounded-full"></div>
          <div class="w-1/6 h-4 card-bg-color rounded-full"></div>
          <div class="w-1/6 h-4 card-bg-color rounded-full"></div>
        </div>
        <!-- Table Row Skeletons -->
        <div class="flex items-center justify-between pt-4">
          <div class="w-1/6 h-4 card-bg-color rounded-full"></div>
          <div class="w-1/6 h-4 card-bg-color rounded-full"></div>
          <div class="w-1/6 h-4 card-bg-color rounded-full"></div>
          <div class="w-1/6 h-4 card-bg-color rounded-full"></div>
          <div class="w-1/6 h-4 card-bg-color rounded-full"></div>
        </div>
        <div class="flex items-center justify-between pt-4">
          <div class="w-1/6 h-4 card-bg-color rounded-full"></div>
          <div class="w-1/6 h-4 card-bg-color rounded-full"></div>
          <div class="w-1/6 h-4 card-bg-color rounded-full"></div>
          <div class="w-1/6 h-4 card-bg-color rounded-full"></div>
          <div class="w-1/6 h-4 card-bg-color rounded-full"></div>
        </div>
        <div class="flex items-center justify-between pt-4">
          <div class="w-1/6 h-4 card-bg-color rounded-full"></div>
          <div class="w-1/6 h-4 card-bg-color rounded-full"></div>
          <div class="w-1/6 h-4 card-bg-color rounded-full"></div>
          <div class="w-1/6 h-4 card-bg-color rounded-full"></div>
          <div class="w-1/6 h-4 card-bg-color rounded-full"></div>
        </div>
        <div class="flex items-center justify-between pt-4">
          <div class="w-1/6 h-4 card-bg-color rounded-full"></div>
          <div class="w-1/6 h-4 card-bg-color rounded-full"></div>
          <div class="w-1/6 h-4 card-bg-color rounded-full"></div>
          <div class="w-1/6 h-4 card-bg-color rounded-full"></div>
          <div class="w-1/6 h-4 card-bg-color rounded-full"></div>
        </div>
        <span class="sr-only">Loading...</span>
      `.trim()}_applyStyle(){let e=`
wc-table-skeleton {
  display: contents;
}
wc-table-skeleton .wc-table-skeleton {
  background-color: var(--surface-1);
}
/* Spacing */
.md:p-6 {
  padding: 1.5rem;
}
.space-y-4 > * + * {
  margin-top: 1rem;
}

/* Shadows */
.shadow {
  box-shadow: 0 1px 3px rgba(0, 0, 0, 0.1), 0 1px 2px rgba(0, 0, 0, 0.06);
}
      `.trim();this.loadStyle("wc-table-skeleton-style",e)}_unWireEvents(){super._unWireEvents()}}customElements.define("wc-table-skeleton",d)}var ne=class extends g{static get observedAttributes(){return["id","class","size","speed","thickness"]}constructor(){super();let i=this.querySelector(".wc-loader");i?this.componentElement=i:(this.componentElement=document.createElement("div"),this.componentElement.classList.add("wc-loader"),this.appendChild(this.componentElement))}async connectedCallback(){super.connectedCallback(),this._applyStyle(),this._wireEvents()}disconnectedCallback(){super.disconnectedCallback(),this._unWireEvents()}_handleAttributeChange(i,e){i==="size"?(this.componentElement.style.height=e,this.componentElement.style.width=e):i==="speed"?this.componentElement.style.animationDuration=e:i==="thickness"?this.componentElement.style.borderWidth=e:super._handleAttributeChange(i,e)}_render(){super._render();let i=this.querySelectorAll(".wc-loader > *");i.length>0&&(this.componentElement.innerHTML="",i.forEach(e=>this.componentElement.appendChild(e))),typeof htmx<"u"&&htmx.process(this)}_applyStyle(){let i=`
      wc-loader {
        display: contents;
      }

      wc-loader .wc-loader {
        border-width: 16px;
        border-style: solid;
        border-color: var(--primary-color);
        border-top-color: var(--primary-bg-color);
        border-radius: 50%;
        width: 120px;
        height: 120px;
        animation: loader-spin 2s linear infinite;
      }

      @keyframes loader-spin {
        0% { transform: rotate(0deg); }
        100% { transform: rotate(360deg); }
      }
    `.trim();this.loadStyle("wc-loader-style",i)}_handleHelper(i,e="show"){let{detail:t}=i,{selector:o}=t,n=Array.isArray(o);typeof o=="string"||n?document.querySelectorAll(o).forEach(a=>{a===this&&(e==="show"?this.componentElement.classList.remove("hidden"):e==="hide"?this.componentElement.classList.add("hidden"):e==="toggle"&&this.componentElement.classList.toggle("hidden"))}):document.querySelector(o)===this&&(e==="show"?this.componentElement.classList.remove("hidden"):e==="hide"?this.componentElement.classList.add("hidden"):e==="toggle"&&this.componentElement.classList.toggle("hidden"))}_handleShow(i){this._handleHelper(i,"show")}_handleHide(i){this._handleHelper(i,"hide")}_handleToggle(i){this._handleHelper(i,"toggle")}_wireEvents(){super._wireEvents(),document.body.addEventListener("wc-loader:show",this._handleShow.bind(this)),document.body.addEventListener("wc-loader:hide",this._handleHide.bind(this)),document.body.addEventListener("wc-loader:toggle",this._handleToggle.bind(this))}_unWireEvents(){super._unWireEvents(),document.body.removeEventListener("wc-loader:show",this._handleShow.bind(this)),document.body.removeEventListener("wc-loader:hide",this._handleHide.bind(this)),document.body.removeEventListener("wc-loader:toggle",this._handleToggle.bind(this))}};customElements.define("wc-loader",ne);var se=class d extends HTMLElement{static get observedAttributes(){return["hx-get","hx-post","hx-put","hx-delete","hx-target","hx-trigger","hx-swap","hx-select","hx-push-url","hx-vals","hx-headers","hx-indicator","hx-params","hx-ext","hx-prompt","hx-confirm","hx-on","hx-include"]}constructor(){super(),this.classList.add("contents")}connectedCallback(){let i=this.parentElement;i?(this.applyAttributes(i),i.addEventListener("click",this.raiseEvent.bind(this))):console.warn("No parent container found for HTMX attributes.")}applyAttributes(i){d.observedAttributes.forEach(e=>{this.hasAttribute(e)&&i.setAttribute(e,this.getAttribute(e))}),d.observedAttributes.forEach(e=>{this.hasAttribute(e)&&this.removeAttribute(e)})}raiseEvent(i){let e=new CustomEvent("custom-event",{detail:"hello world"});document.body.dispatchEvent(e)}};customElements.define("wc-behavior",se);if(!customElements.get("wc-visibility-change")){class d extends HTMLElement{static get observedAttributes(){return["hx-verb","hx-url","hx-target","hx-swap","hx-indicator","hx-push-url","hx-select"]}constructor(){super(),this.classList.add("contents"),this.handleVisibilityChange=this.handleVisibilityChange.bind(this),this._pendingAttributes={},this._isConnected=!1}async connectedCallback(){this._isConnected||document.addEventListener("visibilitychange",this.handleVisibilityChange),this._isConnected=!0,this._applyPendingAttributes()}disconnectedCallback(){this.form&&document.removeEventListener("visibilitychange",this.handleVisibilityChange)}handleVisibilityChange(){if(!document.hidden){let e=this.getAttribute("hx-verb")||"GET",t=this.getAttribute("hx-url")||"",o=this.getAttribute("hx-target")||"",n=this.getAttribute("hx-swap")||"",s=this.getAttribute("hx-indicator")||"",a=this.getAttribute("hx-push-url")||"",r=this.getAttribute("hx-select")||"";htmx&&e&&t&&o&&n&&htmx.ajax(e,t,{target:o,swap:n,indicator:s,pushUrl:a,select:r})}}attributeChangedCallback(e,t,o){this._isConnected?this._handleAttributeChange(e,o):this._pendingAttributes[e]=o}_applyPendingAttributes(){Object.keys(this._pendingAttributes).forEach(e=>{let t=this._pendingAttributes[e];this._handleAttributeChange(e,t)}),this._pendingAttributes={}}_handleAttributeChange(e,t){}}customElements.define("wc-visibility-change",d)}var ae=class extends HTMLElement{static get observedAttributes(){return["event-name","action","action-target"]}constructor(){super(),this.classList.add("contents")}connectedCallback(){let i=this.getAttribute("event-name")||"";i?document.body.addEventListener(i,this._handleEvent.bind(this)):console.warn("No event-name provided!")}disconnectedCallback(){let i=this.getAttribute("event-name")||"";i&&document.body.removeEventListener(i,this._handleEvent.bind(this))}_handleEvent(i){let{target:e,detail:t}=i,o=this.getAttribute("action-target")||"",n=document.querySelector(o);if(n){let{cls:s,action:a,item:r,selector:l}=t;if(a==="add-class")n.classList.add(s);else if(a==="remove-class")n.classList.remove(s);else if(a==="toggle-class")n.classList.toggle(s);else if(a==="add-item"){let c=document.createElement("div");c.innerHTML=r,n.appendChild(c.firstChild)}else a==="remove-item"?document.querySelector(l).remove():a==="click"&&document.querySelector(l).click()}}};customElements.define("wc-event-handler",ae);if(!customElements.get("wc-event-hub")){class d extends HTMLElement{events={};constructor(){super(),this.loadCSS=k.bind(this),this.loadScript=S.bind(this),this.loadLibrary=A.bind(this),this.loadStyle=L.bind(this)}connectedCallback(){document.querySelector(this.tagName)!==this?(console.warn(`${this.tagName} is already present on the page.`),this.remove()):(window.wc||(window.wc={}),window.wc.EventHub=this,this._applyStyle())}disconnectedCallback(){}broadcast(e,t,o,n){let s={detail:{selector:t,subSelector:o,custom:n}},a=new CustomEvent(e,s);document.body.dispatchEvent(a),window.parent.document&&window.parent.document.body.dispatchEvent(a)}_applyStyle(){this.loadStyle("wc-event-hub-style",`
      wc-event-hub {
        display: contents;
      }
      `)}}customElements.define("wc-event-hub",d)}if(!customElements.get("wc-mask-hub")){class d extends HTMLElement{static get observedAttributes(){return[]}constructor(){super(),this.loadCSS=k.bind(this),this.loadScript=S.bind(this),this.loadLibrary=A.bind(this),this.loadStyle=L.bind(this)}async connectedCallback(){document.querySelector(this.tagName)!==this?(console.warn(`${this.tagName} is already present on the page.`),this.remove()):(await this.renderMask(),this._applyStyle())}disconnectedCallback(){}async renderMask(){await Promise.all([this.loadLibrary("https://cdnjs.cloudflare.com/ajax/libs/imask/7.6.1/imask.min.js","IMask")]),window.wc||(window.wc={}),window.wc.MaskHub=this}phoneMask(e){let{target:t}=e,o=IMask(t,{mask:[{mask:"(000) 000-0000",startsWith:""}],dispatch:function(n,s){let a=(s.value+n).replace(/\D/g,"");return s.compiledMasks[0]}})}_applyStyle(){this.loadStyle("wc-mask-hub-style",`
      wc-mask-hub {
        display: contents;
      }
      `)}}customElements.define("wc-mask-hub",d)}if(!customElements.get("wc-hotkey")){class d extends HTMLElement{constructor(){super(),this.classList.add("contents")}connectedCallback(){let e=this.getAttribute("keys")||"",t=this.getAttribute("target")||"";if(!e||!t){console.error('WcHotkey requires "keys" and "target" attributes.');return}let o=document.querySelector(t);if(!o){console.error(`Target element not found for selector: ${t}`);return}let n=e.split("+"),s={metaKey:n.includes("cmd"),ctrlKey:n.includes("ctrl"),shiftKey:n.includes("shift"),altKey:n.includes("alt"),key:n.find(r=>!["cmd","ctrl","shift","alt"].includes(r))||""},a=r=>{s.metaKey===r.metaKey&&s.ctrlKey===r.ctrlKey&&s.shiftKey===r.shiftKey&&s.altKey===r.altKey&&s.key.toLowerCase()===r.key.toLowerCase()&&(r.preventDefault(),o.click())};document.addEventListener("keydown",a),this.cleanup=()=>{document.removeEventListener("keydown",a)}}disconnectedCallback(){this.cleanup&&this.cleanup()}}customElements.define("wc-hotkey",d)}if(!customElements.get("wc-link")){class d extends HTMLElement{constructor(){super(),this.classList.add("contents")}connectedCallback(){let e=this.getAttribute("url");if(e){let t=`wc-link-${this.id||this.dataset.id||crypto.randomUUID()}`;if(window.wc||(window.wc={}),window.wc.scriptsLoaded||(window.wc.linksLoaded={}),document.getElementById(t))document.body.dispatchEvent(new CustomEvent("link-loaded",{detail:{url:e},bubbles:!0,composed:!0}));else{let o=document.createElement("link");o.rel="stylesheet",o.href=e,o.id=t,o.onload=()=>{window.wc.linksLoaded[e]=!0,document.body.dispatchEvent(new CustomEvent("link-loaded",{detail:{url:e},bubbles:!0,composed:!0}))},o.onerror=()=>{document.body.dispatchEvent(new CustomEvent("link-error",{detail:{url:e},bubbles:!0,composed:!0}))},document.head.appendChild(o)}}else console.warn("No URL provided for wc-link component.");this.remove()}}customElements.define("wc-link",d)}if(!customElements.get("wc-script")){class d extends HTMLElement{constructor(){super(),this.classList.add("contents")}connectedCallback(){let e=this.getAttribute("src");if(window.wc||(window.wc={}),window.wc.scriptsLoaded||(window.wc.scriptsLoaded={}),e){let t=`wc-script-${this.id||this.dataset.id||crypto.randomUUID()}`;if(document.getElementById(t))document.body.dispatchEvent(new CustomEvent("script-loaded",{detail:{src:e},bubbles:!0,composed:!0}));else{let o=document.createElement("script");o.type="text/javascript",o.src=e,o.id=t,o.onload=()=>{window.wc.scriptsLoaded[e]=!0,document.body.dispatchEvent(new CustomEvent("script-loaded",{detail:{src:e},bubbles:!0,composed:!0}))},o.onerror=()=>{console.error(`Failed to load script: ${e}`),document.body.dispatchEvent(new CustomEvent("script-error",{detail:{src:e},bubbles:!0,composed:!0}))},document.head.appendChild(o)}}else console.warn("No src provided for wc-script component.");this.remove()}}customElements.define("wc-script",d)}if(!customElements.get("wc-javascript")){class d extends HTMLElement{constructor(){super(),this.classList.add("contents")}connectedCallback(){let e=this.textContent.trim();if(e){let t=`wc-javascript-${this.id||this.dataset.id||crypto.randomUUID()}`;if(document.getElementById(t)){let o=window.wc.scripts[t];o&&o()}else{window.wc||(window.wc={}),window.wc.scripts||(window.wc.scripts={}),window.wc.loadCSS=k,window.wc.loadScript=S,window.wc.loadLibrary=A,window.wc.loadStyle=L;let o=this.hasAttribute("defer"),n=document.createElement("script");n.type="text/javascript",n.textContent=e,n.id=t,o&&n.setAttribute("defer",""),document.head.appendChild(n)}}this.textContent=""}}customElements.define("wc-javascript",d)}if(!customElements.get("wc-prompt")){class d extends HTMLElement{constructor(){super(),this.loadCSS=k.bind(this),this.loadScript=S.bind(this),this.loadLibrary=A.bind(this),this.loadStyle=L.bind(this),this.table=null}async connectedCallback(){document.querySelector(this.tagName)!==this?(console.warn(`${this.tagName} is already present on the page.`),this.remove()):await this.renderPrompt(),this._applyStyle(),this.wireEvents()}disconnectedCallback(){this.unWireEvents()}async renderPrompt(){await Promise.all([this.loadCSS("https://unpkg.com/notie/dist/notie.min.css"),this.loadLibrary("https://unpkg.com/notie","notie"),this.loadLibrary("https://unpkg.com/sweetalert2@11.15.10/dist/sweetalert2.all.js","Swal")]),window.wc||(window.wc={}),window.wc.Prompt=this,wc.EventHub.broadcast("wc-prompt:ready","","")}banner(e){let{text:t="",type:o="info",stay:n=!1,time:s=3,position:a="top"}=e;notie.alert({type:o,text:t,stay:n,time:s,position:a})}toast(e){let{title:t="",icon:o="success",position:n="top-end"}=e;Swal.mixin({toast:!0,title:t,position:n,icon:o,showConfirmButton:!1,timer:3e3,timerProgressBar:!0,didOpen:a=>{a.addEventListener("mouseenter",Swal.stopTimer),a.addEventListener("mouseleave",Swal.resumeTimer)}}).fire({})}async success(e){let{title:t="",text:o="",footer:n="",callback:s=null}=e,{value:a}=await Swal.fire({icon:"success",title:t,text:o,footer:n});return this.handleResult(e,a)}async error(e){let{title:t="",text:o="",footer:n="",callback:s=null}=e,{value:a}=await Swal.fire({icon:"error",title:t,text:o,footer:n});return this.handleResult(e,a)}async warning(e){let{title:t="",text:o="",footer:n="",callback:s=null}=e,{value:a}=await Swal.fire({icon:"warning",title:t,text:o,footer:n});return this.handleResult(e,a)}async info(e){let{title:t="",text:o="",footer:n="",callback:s=null}=e,{value:a}=await Swal.fire({icon:"info",title:t,text:o,footer:n});return this.handleResult(e,a)}async question(e){let{title:t="",text:o="",footer:n="",showCancelButton:s=!0,callback:a=null}=e,{value:r}=await Swal.fire({icon:"question",title:t,text:o,footer:n,showCancelButton:s});return this.handleResult(e,r)}async notify(e){let o=document.querySelector("body").dataset.theme,{icon:n="",title:s="",text:a="",showConfirmButton:r=!0,input:l="",inputOptions:c={},inputPlaceholder:p="",callback:u=null}=e,h={container:"",popup:o,header:"",title:"",closeButton:"",icon:"",image:"",htmlContainer:"",input:"",inputLabel:"",validationMessage:"",actions:"",confirmButton:"theme-ocean-blue",denyButton:"",cancelButton:"theme-slate-storm",loader:"",footer:"",timerProgressBar:""},{value:m}=await Swal.fire({customClass:h,icon:n,title:s,html:a,input:l,inputOptions:c,inputPlaceholder:p,backdrop:!1,focusConfirm:!1,showCancelButton:!0,showConfirmButton:r,willOpen:()=>{e.willOpen!==void 0&&e.willOpen()},didOpen:()=>{e.didOpen!==void 0&&e.didOpen()}});return this.handleResult(e,m)}async notifyTemplate(e){let o=document.querySelector("body").dataset.theme,{template:n="",didOpen:s=null,preConfirm:a=null,callback:r=null}=e,l={container:"",popup:o,header:"",title:"",closeButton:"",icon:"",image:"",htmlContainer:"",input:"",inputLabel:"",validationMessage:"",actions:"",confirmButton:"theme-ocean-blue",denyButton:"",cancelButton:"theme-slate-storm",loader:"",footer:"",timerProgressBar:""},{value:c}=await Swal.fire({customClass:l,template:n,didOpen:s,preConfirm:a,callback:r});return this.handleResult(e,c)}async fire(e){let s={...{container:"",popup:document.querySelector("body").dataset.theme,header:"",title:"",closeButton:"",icon:"",image:"",htmlContainer:"",input:"",inputLabel:"",validationMessage:"",actions:"",confirmButton:"theme-ocean-blue",denyButton:"",cancelButton:"theme-slate-storm",loader:"",footer:"",timerProgressBar:"",backdrop:!1,focusConfirm:!1,showCancelButton:!0,showConfirmButton:!0,willOpen:()=>{e.willOpen!==void 0&&e.willOpen()},didOpen:()=>{e.didOpen!==void 0&&e.didOpen()}},...e},{value:a}=await Swal.fire(s);return this.handleResult(e,a)}handleResult(e,t){if(t)return t.dismiss!==Swal.DismissReason.cancel&&t.value!==""?e.callback!==void 0?e.callback(t):t:e.callback(!1)}_applyStyle(){this.loadStyle("wc-prompt-style",`
      wc-prompt {
        display: contents;
      }
      .swal2-container .swal2-popup {
        background-color: var(--surface-5);
        color: var(--text-1);
      }
      .swal2-container .swal2-popup .swal2-title {
        color: var(--text-1);
      }
      .swal2-container .swal2-popup .swal2-html-container {
        background-color: var(--surface-5);
        color: var(--text-1);
        overflow: visible;
        text-align: inherit;
        z-index: auto;
      }
      .swal2-container .swal2-popup .swal2-actions .swal2-confirm {
        background-color: var(--primary-bg-color);
      }
      .swal2-container .swal2-popup .swal2-actions .swal2-cancel {
        background-color: var(--secondary-bg-color);
      }
      .swal2-container .swal2-popup input,
      .swal2-container .swal2-popup select,
      .swal2-container .swal2-popup textarea {
        background-color: var(--component-bg-color);
        border: 1px solid var(--component-border-color);
        border-radius: 0.375rem;
        color: var(--component-color);
        padding: 0.375rem;
      }
      `)}wireEvents(){document.body.addEventListener("wc-prompt:banner",e=>{this.banner(e.detail)}),document.body.addEventListener("wc-prompt:toast",e=>{this.toast(e.detail)}),document.body.addEventListener("wc-prompt:success",async e=>this.success(e.detail)),document.body.addEventListener("wc-prompt:error",async e=>this.error(e.detail)),document.body.addEventListener("wc-prompt:warning",async e=>this.warning(e.detail)),document.body.addEventListener("wc-prompt:info",async e=>this.info(e.detail)),document.body.addEventListener("wc-prompt:question",async e=>this.question(e.detail)),document.body.addEventListener("wc-prompt:notify",async e=>this.notify(e.detail)),document.body.addEventListener("wc-prompt:notify-template",async e=>this.notifyTemplate(e.detail))}unWireEvents(){document.body.removeEventListener("wc-prompt:banner",e=>{this.banner(e.detail)}),document.body.removeEventListener("wc-prompt:toast",e=>{this.toast(e.detail)}),document.body.removeEventListener("wc-prompt:success",async e=>this.success(e.detail)),document.body.removeEventListener("wc-prompt:error",async e=>this.error(e.detail)),document.body.removeEventListener("wc-prompt:warning",async e=>this.warning(e.detail)),document.body.removeEventListener("wc-prompt:info",async e=>this.info(e.detail)),document.body.removeEventListener("wc-prompt:question",async e=>this.question(e.detail)),document.body.removeEventListener("wc-prompt:notify",async e=>this.notify(e.detail)),document.body.removeEventListener("wc-prompt:notify-template",async e=>this.notifyTemplate(e.detail))}}customElements.define("wc-prompt",d)}if(!customElements.get("wc-notify")){class d extends HTMLElement{static get observedAttributes(){return["delay","position"]}constructor(){super(),this.loadCSS=k.bind(this),this.loadScript=S.bind(this),this.loadLibrary=A.bind(this),this.loadStyle=L.bind(this),this._defaultDelay=3e3,this._notifications=[],this._position="top-right"}async connectedCallback(){document.querySelector(this.tagName)!==this?(console.warn(`${this.tagName} is already present on the page.`),this.remove()):await this.renderNotify(),this._applyStyle()}disconnectedCallback(){}attributeChangedCallback(e,t,o){e==="delay"?this._defaultDelay=parseInt(o)||3e3:e==="position"&&["top-right","top-left","bottom-right","bottom-left"].includes(o)&&(this._position=o)}get delay(){return this._defaultDelay}get position(){return this._position}async renderNotify(){window.wc||(window.wc={}),window.wc.Notify=this,wc.EventHub.broadcast("wc-notify:ready","","")}showSuccess(e,t,o=!1){this.showNotification(e,"success",t,o)}showError(e,t,o=!1){this.showNotification(e,"error",t,o)}showInfo(e,t,o=!1){this.showNotification(e,"info",t,o)}showWarning(e,t,o=!1){this.showNotification(e,"warning",t,o)}showNotification(e,t="info",o,n=!1){let s=o!==void 0?o:this.delay,a=document.createElement("div");a.className=`notification ${t} ${this.position}`;let r=`
        <wc-fa-icon name="${t==="success"?"circle-check":t==="error"?"circle-exclamation":t==="warning"?"triangle-exclamation":"circle-info"}" icon-style="duotone" size="1rem" class="flex">
        </wc-fa-icon>
        <span class="notification-message">${e}</span>
      `;n&&(r+=`
          <button class="notification-close" aria-label="Close notification">
            <wc-fa-icon name="xmark" size="1rem"></wc-fa-icon>
          </button>
        `),a.innerHTML=r,n&&a.querySelector(".notification-close").addEventListener("click",()=>{this._removeNotification(a)}),this._notifications.push(a),this._updateNotificationPositions(),document.body.appendChild(a),setTimeout(()=>a.classList.add("show"),10),n||setTimeout(()=>{this._removeNotification(a)},s)}_removeNotification(e){e.classList.remove("show"),setTimeout(()=>{e.remove();let t=this._notifications.indexOf(e);t>-1&&(this._notifications.splice(t,1),this._updateNotificationPositions())},300)}_updateNotificationPositions(){let t=this.position.includes("bottom"),o=20;this._notifications.forEach(n=>{t?(n.style.bottom=`${o}px`,n.style.top="auto"):(n.style.top=`${o}px`,n.style.bottom="auto"),n.offsetHeight?o+=n.offsetHeight+10:o+=70})}_applyStyle(){this.loadStyle("wc-notify-style",`
        wc-notify {
          display: contents;
        }
        /* Notifications */
        .notification {
            position: fixed;
            background: white;
            padding: 1rem 1.5rem;
            border-radius: 8px;
            box-shadow: 0 4px 12px rgba(0,0,0,0.15);
            display: flex;
            align-items: center;
            gap: 0.75rem;
            transition: transform 0.3s, top 0.3s ease-out, bottom 0.3s ease-out;
            z-index: 2000;
            max-width: 400px;
        }

        .notification-message {
            flex: 1;
        }

        .notification-close {
          position: absolute;
          top: 0.25rem;
          right: 0.25rem;
          background: none;
          border: none;
          cursor: pointer;
          padding: 0.25rem;
          color: #666;
          transition: color 0.2s;
          display: flex;
          align-items: center;
          justify-content: center;
        }

        .notification-close:hover {
            color: #333;
        }

        /* Position-specific styles */
        .notification.top-right {
            right: 20px;
            transform: translateX(400px);
        }

        .notification.top-left {
            left: 20px;
            transform: translateX(-400px);
        }

        .notification.bottom-right {
            right: 20px;
            transform: translateX(400px);
        }

        .notification.bottom-left {
            left: 20px;
            transform: translateX(-400px);
        }

        .notification.show {
            transform: translateX(0);
        }

        .notification.success {
          border-left: 4px solid #2ecc71;
          background-color: #c6edd7ff;
          color: #063218ff;
        }

        .notification.success svg {
          color: #149048ff;
        }

        .notification.error {
          border-left: 4px solid #e74c3c;
          background-color: #ecd3d1ff;
          color: #44140fff;
        }

        .notification.error svg {
          color: #c03020ff;
        }

        .notification.info {
          border-left: 4px solid #3498db;
          background-color: #bad5e7ff;
          color: #0b4973ff;
        }

        .notification.info svg {
          color: #1c85cbff;
        }

        .notification.warning {
          border-left: 4px solid #f39c12;
          background-color: #ffeaa7;
          color: #7d4f00;
        }

        .notification.warning svg {
          color: #f39c12;
        }
      `)}}customElements.define("wc-notify",d)}if(!customElements.get("wc-theme")){class d extends HTMLElement{constructor(){super(),this.classList.add("contents")}connectedCallback(){this._handleLoadTheme()}_handleLoadTheme(){let t=`theme-${localStorage.getItem("theme")||"rose"}`;document.documentElement.classList.forEach(o=>{o.startsWith("theme-")&&document.documentElement.classList.remove(o)}),document.documentElement.classList.add(t)}}customElements.define("wc-theme",d)}var z=class d extends g{static get is(){return"wc-chart"}static get observedAttributes(){return["type","labels","data","label","datasets","title","height","width","colors","show-legend","show-data-labels","padding-top","responsive","maintain-aspect-ratio","x-axis-title","y-axis-title","stacked","tension","fill","point-radius","border-width","text-color","grid-color","class"]}constructor(){super(),this.chart=null,this.chartInstance=null,this.canvas=null,this.isLibraryLoaded=!1,this.pendingChartConfig=null,this.defaultColors=["--primary-bg-color","--success-bg-color","--warning-bg-color","--danger-bg-color","--info-bg-color","--secondary-bg-color"],this.componentElement=document.createElement("div"),this.componentElement.classList.add("wc-chart","relative","w-full"),this.appendChild(this.componentElement)}async connectedCallback(){super.connectedCallback(),this._applyStyle(),await this._initChart(),this._wireEvents()}disconnectedCallback(){super.disconnectedCallback(),this._destroyChart(),this._unWireEvents()}async _initChart(){this.isLibraryLoaded||await this._loadChartLibrary(),this._createCanvas(),this._createChart()}async _loadChartLibrary(){try{if(await this.loadLibrary("https://cdn.jsdelivr.net/npm/chart.js@4.4.1/dist/chart.umd.min.js","Chart"),window.Chart&&await this.loadLibrary("https://cdn.jsdelivr.net/npm/chartjs-plugin-datalabels@2.2.0/dist/chartjs-plugin-datalabels.min.js","ChartDataLabels"),window.Chart&&window.ChartDataLabels){window.Chart.register(window.ChartDataLabels),window.Chart.defaults.plugins.datalabels={display:!1};let i=this._getThemeColor("text-color","--primary-color"),e=this._getThemeColor("grid-color","--component-border-color");window.Chart.defaults.color=i,window.Chart.defaults.borderColor=e}this.isLibraryLoaded=!0,window.wc&&window.wc.EventHub&&window.wc.EventHub.broadcast("wc-chart:library-loaded","",{Chart:window.Chart})}catch(i){console.error("Failed to load Chart.js library:",i)}}_createCanvas(){if(this.canvas)return;let i=document.createElement("div");i.classList.add("chart-wrapper","relative");let e=this.getAttribute("height")||"400",t=this.getAttribute("width")||"auto";t!=="auto"&&(i.style.width=`${t}px`),i.style.height=`${e}px`,this.canvas=document.createElement("canvas"),this.canvas.setAttribute("role","img"),this.canvas.setAttribute("aria-label",this.getAttribute("title")||"Chart"),i.appendChild(this.canvas),this.componentElement.appendChild(i)}_createChart(){if(!window.Chart||!this.canvas){this.pendingChartConfig=this._buildChartConfig();return}this._destroyChart();let i=this._buildChartConfig();if(i)try{this.chartInstance=new window.Chart(this.canvas,i),this.dispatchEvent(new CustomEvent("chart-created",{detail:{chart:this.chartInstance},bubbles:!0}))}catch(e){console.error("Failed to create chart:",e)}}_buildChartConfig(){let i=this.getAttribute("type")||"bar",e=this._parseJSON(this.getAttribute("labels"),[]),t=this._buildDatasets();return!t||t.length===0?null:{type:i,data:{labels:e,datasets:t},options:this._buildChartOptions(i)}}_buildDatasets(){let i=this.getAttribute("datasets");if(i)return this._parseJSON(i,[]).map((n,s)=>this._formatDataset(n,s));let e=this._parseJSON(this.getAttribute("data"),[]),t=this.getAttribute("label")||"Dataset";return!e||e.length===0?[]:[this._formatDataset({label:t,data:e},0)]}_formatDataset(i,e){let t=this.getAttribute("type")||"bar",o=this._parseJSON(this.getAttribute("colors"),this.defaultColors),n=o[e%o.length];n=this._resolveColor(n);let s=this._cssVarToRgb(n),a={label:i.label,data:i.data,backgroundColor:t==="line"?`rgba(${s}, 0.2)`:n,borderColor:n,borderWidth:parseInt(this.getAttribute("border-width")||"2")};return t==="line"?(a.tension=parseFloat(this.getAttribute("tension")||"0.1"),a.fill=this.getAttribute("fill")!=="false",a.pointRadius=parseInt(this.getAttribute("point-radius")||"3"),a.pointBackgroundColor=n):t==="pie"||t==="doughnut"?(a.backgroundColor=i.data.map((r,l)=>{let c=o[l%o.length];return this._resolveColor(c)}),a.borderColor="#fff"):t==="radar"?(a.backgroundColor=`rgba(${s}, 0.2)`,a.borderColor=n,Object.assign(a,{pointBackgroundColor:n,pointBorderColor:"#fff",pointHoverBackgroundColor:"#fff",pointHoverBorderColor:n})):t==="polarArea"&&(a.backgroundColor=`rgba(${s}, 0.2)`,a.borderColor=n),a}_buildChartOptions(i){let e=this.getAttribute("show-legend")!=="false",t=this.getAttribute("show-data-labels")==="true",o=this.getAttribute("responsive")!=="false",n=this.getAttribute("maintain-aspect-ratio")!=="false",s=this.getAttribute("title"),a=this.getAttribute("x-axis-title"),r=this.getAttribute("y-axis-title"),l=this.getAttribute("stacked")==="true",c=parseInt(this.getAttribute("padding-top")||(t&&i==="bar"?"30":"0")),p=this._getThemeColor("text-color","--primary-color"),u=this._getThemeColor("grid-color","--component-border-color"),h={responsive:o,maintainAspectRatio:n,plugins:{legend:{display:e,position:"top",labels:{color:p}},title:{display:!!s,text:s,color:p,font:{size:16}},tooltip:{enabled:!0,callbacks:{}},datalabels:{display:t,anchor:"end",align:"top",formatter:m=>m,color:p,font:{weight:"bold"}}},layout:{padding:{top:c}}};return i!=="pie"&&i!=="doughnut"&&i!=="radar"&&i!=="polarArea"?h.scales={x:{display:!0,stacked:l,title:{display:!!a,text:a,color:p},ticks:{color:p},grid:{color:u,borderColor:u}},y:{display:!0,stacked:l,beginAtZero:!0,title:{display:!!r,text:r,color:p},ticks:{color:p},grid:{color:u,borderColor:u}}}:i==="radar"?h.scales={r:{angleLines:{color:u},grid:{color:u},pointLabels:{color:p},ticks:{color:p,backdropColor:"transparent"}}}:i==="polarArea"&&(h.scales={r:{grid:{color:u},ticks:{color:p,backdropColor:"transparent"}}}),(i==="pie"||i==="doughnut")&&(h.plugins.tooltip.callbacks.label=function(m){let b=m.label||"",f=m.parsed||0,v=m.dataset.data.reduce((x,C)=>x+C,0),E=(f/v*100).toFixed(1);return`${b}: ${f} (${E}%)`}),h}_handleAttributeChange(i,e,t){d.observedAttributes.includes(i)?this.chartInstance&&this._createChart():super._handleAttributeChange(i,e,t)}_destroyChart(){this.chartInstance&&(this.chartInstance.destroy(),this.chartInstance=null)}_parseJSON(i,e){if(!i)return e;try{return JSON.parse(i.replace(/'/g,'"'))}catch(t){return console.warn("Failed to parse JSON:",i,t),e}}_cssVarToRgb(i){if(i&&i.startsWith("#")){let e=i.replace("#",""),t=parseInt(e.substr(0,2),16),o=parseInt(e.substr(2,2),16),n=parseInt(e.substr(4,2),16);return`${t}, ${o}, ${n}`}if(i&&(i.startsWith("rgb(")||i.startsWith("rgba("))){let e=i.match(/\d+/g);if(e&&e.length>=3)return`${e[0]}, ${e[1]}, ${e[2]}`}return"52, 152, 219"}_resolveColor(i){if(!i)return"#3498db";if(i.startsWith("#")||i.startsWith("rgb"))return i;let e=i;e.startsWith("--")||(e=`--${i}`);let t=getComputedStyle(this).getPropertyValue(e).trim();if(t||(t=getComputedStyle(document.documentElement).getPropertyValue(e).trim()),t)return t;if(i.startsWith("var(")){let s=i.match(/var\((--[^,)]+)(?:,\s*(.+))?\)/);if(s){let a=s[1],r=s[2];return getComputedStyle(document.documentElement).getPropertyValue(a).trim()||r||"#3498db"}}let o={"chart-primary":"#3498db","chart-success":"#2ecc71","chart-warning":"#f39c12","chart-danger":"#e74c3c","chart-info":"#9b59b6","chart-secondary":"#95a5a6"},n=i.replace("--","").replace("-bg-color","");return o[n]||o[`chart-${n}`]||"#3498db"}_getThemeColor(i,e){let t=this.getAttribute(i);if(t)return t;let o=getComputedStyle(this),n=o.getPropertyValue(e).trim();return n||(o=getComputedStyle(document.documentElement),n=o.getPropertyValue(e).trim(),n)?n:{"--color":"#000000","--component-border-color":"#ced4da"}[e]||"#666666"}_wireEvents(){this._handleThemeChange=()=>{setTimeout(()=>{this.refresh()},100)},document.body.addEventListener("theme:change",this._handleThemeChange),this.canvas&&this.canvas.addEventListener("click",i=>{if(!this.chartInstance)return;let e=this.chartInstance.getElementsAtEventForMode(i,"nearest",{intersect:!0},!1);if(e.length){let t=e[0],o=this.chartInstance.data.labels[t.index],n=this.chartInstance.data.datasets[t.datasetIndex].data[t.index];this.dispatchEvent(new CustomEvent("chart-click",{detail:{label:o,value:n,datasetIndex:t.datasetIndex,index:t.index},bubbles:!0}))}}),window.htmx&&document.body.addEventListener("htmx:afterSwap",i=>{(this.contains(i.target)||i.target.contains(this))&&setTimeout(()=>this._createChart(),100)})}_unWireEvents(){this._handleThemeChange&&document.body.removeEventListener("theme:change",this._handleThemeChange)}_applyStyle(){}refresh(){this.chartInstance&&this._createChart()}updateData(i){this.chartInstance&&(Array.isArray(i)?this.chartInstance.data.datasets[0].data=i:i.datasets&&(this.chartInstance.data.datasets=i.datasets.map((e,t)=>this._formatDataset(e,t))),i.labels&&(this.chartInstance.data.labels=i.labels),this.chartInstance.update())}updateOptions(i){this.chartInstance&&(Object.assign(this.chartInstance.options,i),this.chartInstance.update())}toImage(){return this.chartInstance?this.chartInstance.toBase64Image():null}getChart(){return this.chartInstance}static refreshAll(){document.querySelectorAll("wc-chart").forEach(e=>{e.refresh&&typeof e.refresh=="function"&&e.refresh()})}};customElements.get(z.is)||customElements.define(z.is,z);var re=class extends g{static get observedAttributes(){return["class"]}constructor(){super(),this.passThruAttributes=["id","name","method","action","hx-post","hx-put","hx-target","hx-swap","hx-push-url"],this.passThruEmptyAttributes=[],this.ignoreAttributes=[];let i=this.querySelector(".wc-form");i?this.componentElement=i:(this.componentElement=document.createElement("form"),this.componentElement.classList.add("wc-form"),this.appendChild(this.componentElement))}async connectedCallback(){super.connectedCallback(),this._applyStyle()}disconnectedCallback(){super.disconnectedCallback(),this._unWireEvents()}_handleAttributeChange(i,e){i==="test"||super._handleAttributeChange(i,e)}_render(){super._render(),this.querySelector(".wc-form > *")||(this.componentElement.innerHTML="",this.passThruAttributes.forEach(e=>{if(this.hasAttribute(e)){let t=this.getAttribute(e);this.componentElement?.setAttribute(e,t)}}),this.passThruAttributes.forEach(e=>{this.removeAttribute(e)}),this._moveDeclarativeInner(),this._wireEvents()),typeof htmx<"u"&&htmx.process(this)}_moveDeclarativeInner(){let i=this.querySelectorAll("wc-form > *:not(.wc-form)");i.length>0&&i.forEach(e=>this.componentElement.appendChild(e))}_handleSubmit(i){i.preventDefault();let{target:e}=i,t=this.componentElement.querySelectorAll("[disabled]");t.forEach(o=>o.disabled=!1),t.forEach(o=>o.removeAttribute("disabled")),e.submit(),t.forEach(o=>o.disabled=!0),t.forEach(o=>o.setAttribute("disabled",""))}_applyStyle(){let i=`
      wc-form {
        display: contents;
      }

      .wc-form {
        position: relative;
      }
    `.trim();this.loadStyle("wc-form-style",i)}_wireEvents(){super._wireEvents(),this.componentElement.addEventListener("submit",this._handleSubmit.bind(this))}_unWireEvents(){super._unWireEvents(),this.componentElement.removeEventListener("submit",this._handleSubmit.bind(this))}};customElements.define("wc-form",re);var le=class d extends q{static get observedAttributes(){return["name","id","class","type","value","placeholder","lbl-label","lbl-class","radio-group-class","checked","disabled","readonly","required","autocomplete","autofocus","min","max","minlength","maxlength","pattern","step","multiple","novalidate","elt-class","toggle-swtich","list","auto-flex","onchange","oninput","onblur","onfocus","onkeydown","onkeyup","onkeypress","onclick","tooltip","tooltip-position"]}static get icons(){return[{name:"email-stroke",icon:`
          <svg class="h-3 w-3" fill="none" viewBox="0 0 24 24" stroke-width="0.75" stroke="currentColor">
            <path stroke-linecap="round" stroke-linejoin="round" d="M21.75 6.75v10.5a2.25 2.25 0 01-2.25 2.25h-15a2.25 2.25 0 01-2.25-2.25V6.75m19.5 0A2.25 2.25 0 0019.5 4.5h-15a2.25 2.25 0 00-2.25 2.25m19.5 0v.243a2.25 2.25 0 01-1.07 1.916l-7.5 4.615a2.25 2.25 0 01-2.36 0L3.32 8.91a2.25 2.25 0 01-1.07-1.916V6.75"></path>
          </svg>
        `.trim()},{name:"email-fill",icon:`
          <svg class="h-3 w-3" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512" fill="CurrentColor">
            <path d="M48 64C21.5 64 0 85.5 0 112c0 15.1 7.1 29.3 19.2 38.4L236.8 313.6c11.4 8.5 27 8.5 38.4 0L492.8 150.4c12.1-9.1 19.2-23.3 19.2-38.4c0-26.5-21.5-48-48-48L48 64zM0 176L0 384c0 35.3 28.7 64 64 64l384 0c35.3 0 64-28.7 64-64l0-208L294.4 339.2c-22.8 17.1-54 17.1-76.8 0L0 176z"/>
          </svg>
        `.trim()},{name:"tel-stroke",icon:`
          <svg class="h-3 w-3" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="0.75" stroke="currentColor">
            <path stroke-linecap="round" stroke-linejoin="round" d="M2.25 6.75c0 8.284 6.716 15 15 15h2.25a2.25 2.25 0 002.25-2.25v-1.372c0-.516-.351-.966-.852-1.091l-4.423-1.106c-.44-.11-.902.055-1.173.417l-.97 1.293c-.282.376-.769.542-1.21.38a12.035 12.035 0 01-7.143-7.143c-.162-.441.004-.928.38-1.21l1.293-.97c.363-.271.527-.734.417-1.173L6.963 3.102a1.125 1.125 0 00-1.091-.852H4.5A2.25 2.25 0 002.25 4.5v2.25z"></path>
          </svg>
        `.trim()},{name:"tel-fill",icon:`
          <svg class="h-3 w-3" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512" fill="currentColor">
            <path d="M164.9 24.6c-7.7-18.6-28-28.5-47.4-23.2l-88 24C12.1 30.2 0 46 0 64C0 311.4 200.6 512 448 512c18 0 33.8-12.1 38.6-29.5l24-88c5.3-19.4-4.6-39.7-23.2-47.4l-96-40c-16.3-6.8-35.2-2.1-46.3 11.6L304.7 368C234.3 334.7 177.3 277.7 144 207.3L193.3 167c13.7-11.2 18.4-30 11.6-46.3l-40-96z"/>
          </svg>
        `.trim()},{name:"currency-circle",icon:`
          <svg class="h-3 w-3" fill="none" viewBox="0 0 24 24" stroke-width="0.75" stroke="currentColor">
            <path stroke-linecap="round" stroke-linejoin="round" d="M12 6v12m-3-2.818l.879.659c1.171.879 3.07.879 4.242 0 1.172-.879 1.172-2.303 0-3.182C13.536 12.219 12.768 12 12 12c-.725 0-1.45-.22-2.003-.659-1.106-.879-1.106-2.303 0-3.182s2.9-.879 4.006 0l.415.33M21 12a9 9 0 11-18 0 9 9 0 0118 0z"></path>
          </svg>
        `.trim()},{name:"currency-symbol",icon:`
          <svg class="h-3 w-3" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 320 512" fill="currentColor">
            <path d="M160 0c17.7 0 32 14.3 32 32l0 35.7c1.6 .2 3.1 .4 4.7 .7c.4 .1 .7 .1 1.1 .2l48 8.8c17.4 3.2 28.9 19.9 25.7 37.2s-19.9 28.9-37.2 25.7l-47.5-8.7c-31.3-4.6-58.9-1.5-78.3 6.2s-27.2 18.3-29 28.1c-2 10.7-.5 16.7 1.2 20.4c1.8 3.9 5.5 8.3 12.8 13.2c16.3 10.7 41.3 17.7 73.7 26.3l2.9 .8c28.6 7.6 63.6 16.8 89.6 33.8c14.2 9.3 27.6 21.9 35.9 39.5c8.5 17.9 10.3 37.9 6.4 59.2c-6.9 38-33.1 63.4-65.6 76.7c-13.7 5.6-28.6 9.2-44.4 11l0 33.4c0 17.7-14.3 32-32 32s-32-14.3-32-32l0-34.9c-.4-.1-.9-.1-1.3-.2l-.2 0s0 0 0 0c-24.4-3.8-64.5-14.3-91.5-26.3c-16.1-7.2-23.4-26.1-16.2-42.2s26.1-23.4 42.2-16.2c20.9 9.3 55.3 18.5 75.2 21.6c31.9 4.7 58.2 2 76-5.3c16.9-6.9 24.6-16.9 26.8-28.9c1.9-10.6 .4-16.7-1.3-20.4c-1.9-4-5.6-8.4-13-13.3c-16.4-10.7-41.5-17.7-74-26.3l-2.8-.7s0 0 0 0C119.4 279.3 84.4 270 58.4 253c-14.2-9.3-27.5-22-35.8-39.6c-8.4-17.9-10.1-37.9-6.1-59.2C23.7 116 52.3 91.2 84.8 78.3c13.3-5.3 27.9-8.9 43.2-11L128 32c0-17.7 14.3-32 32-32z"/>
          </svg>
        `.trim()},{name:"eye",icon:`
          <svg class="h-3 w-3" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 576 512" fill="currentColor">
            <path d="M288 32c-80.8 0-145.5 36.8-192.6 80.6C48.6 156 17.3 208 2.5 243.7c-3.3 7.9-3.3 16.7 0 24.6C17.3 304 48.6 356 95.4 399.4C142.5 443.2 207.2 480 288 480s145.5-36.8 192.6-80.6c46.8-43.5 78.1-95.4 93-131.1c3.3-7.9 3.3-16.7 0-24.6c-14.9-35.7-46.2-87.7-93-131.1C433.5 68.8 368.8 32 288 32zM144 256a144 144 0 1 1 288 0 144 144 0 1 1 -288 0zm144-64c0 35.3-28.7 64-64 64c-7.1 0-13.9-1.2-20.3-3.3c-5.5-1.8-11.9 1.6-11.7 7.4c.3 6.9 1.3 13.8 3.2 20.7c13.7 51.2 66.4 81.6 117.6 67.9s81.6-66.4 67.9-117.6c-11.1-41.5-47.8-69.4-88.6-71.1c-5.8-.2-9.2 6.1-7.4 11.7c2.1 6.4 3.3 13.2 3.3 20.3z"/>
          </svg>
        `.trim()},{name:"eye-slash",icon:`
          <svg class="h-3 w-3" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 640 512" fill="currentColor">
            <path d="M38.8 5.1C28.4-3.1 13.3-1.2 5.1 9.2S-1.2 34.7 9.2 42.9l592 464c10.4 8.2 25.5 6.3 33.7-4.1s6.3-25.5-4.1-33.7L525.6 386.7c39.6-40.6 66.4-86.1 79.9-118.4c3.3-7.9 3.3-16.7 0-24.6c-14.9-35.7-46.2-87.7-93-131.1C465.5 68.8 400.8 32 320 32c-68.2 0-125 26.3-169.3 60.8L38.8 5.1zM223.1 149.5C248.6 126.2 282.7 112 320 112c79.5 0 144 64.5 144 144c0 24.9-6.3 48.3-17.4 68.7L408 294.5c8.4-19.3 10.6-41.4 4.8-63.3c-11.1-41.5-47.8-69.4-88.6-71.1c-5.8-.2-9.2 6.1-7.4 11.7c2.1 6.4 3.3 13.2 3.3 20.3c0 10.2-2.4 19.8-6.6 28.3l-90.3-70.8zM373 389.9c-16.4 6.5-34.3 10.1-53 10.1c-79.5 0-144-64.5-144-144c0-6.9 .5-13.6 1.4-20.2L83.1 161.5C60.3 191.2 44 220.8 34.5 243.7c-3.3 7.9-3.3 16.7 0 24.6c14.9 35.7 46.2 87.7 93 131.1C174.5 443.2 239.2 480 320 480c47.8 0 89.9-12.9 126.2-32.5L373 389.9z"/>
          </svg>
        `.trim()},{name:"lock",icon:`
          <svg class="h-3 w-3" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512" fill="currentColor">
            <path d="M144 144l0 48 160 0 0-48c0-44.2-35.8-80-80-80s-80 35.8-80 80zM80 192l0-48C80 64.5 144.5 0 224 0s144 64.5 144 144l0 48 16 0c35.3 0 64 28.7 64 64l0 192c0 35.3-28.7 64-64 64L64 512c-35.3 0-64-28.7-64-64L0 256c0-35.3 28.7-64 64-64l16 0z"/>
          </svg>
        `.trim()},{name:"lock-open",icon:`
          <svg class="h-3 w-3" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 576 512" fill="currentColor">
            <path d="M352 144c0-44.2 35.8-80 80-80s80 35.8 80 80l0 48c0 17.7 14.3 32 32 32s32-14.3 32-32l0-48C576 64.5 511.5 0 432 0S288 64.5 288 144l0 48L64 192c-35.3 0-64 28.7-64 64L0 448c0 35.3 28.7 64 64 64l320 0c35.3 0 64-28.7 64-64l0-192c0-35.3-28.7-64-64-64l-32 0 0-48z"/>
          </svg>
        `.trim()},{name:"magnifying-glass",icon:`
          <svg class="h-3 w-3" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512">
            <path d="M416 208c0 45.9-14.9 88.3-40 122.7L502.6 457.4c12.5 12.5 12.5 32.8 0 45.3s-32.8 12.5-45.3 0L330.7 376c-34.4 25.2-76.8 40-122.7 40C93.1 416 0 322.9 0 208S93.1 0 208 0S416 93.1 416 208zM208 352a144 144 0 1 0 0-288 144 144 0 1 0 0 288z"/>
          </svg>
        `.trim()},{name:"auto",icon:`
          <svg class="h-3 w-3" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 640 640">
            <path d="M199.2 181.4L173.1 256L466.9 256L440.8 181.4C436.3 168.6 424.2 160 410.6 160L229.4 160C215.8 160 203.7 168.6 199.2 181.4zM103.6 260.8L138.8 160.3C152.3 121.8 188.6 96 229.4 96L410.6 96C451.4 96 487.7 121.8 501.2 160.3L536.4 260.8C559.6 270.4 576 293.3 576 320L576 512C576 529.7 561.7 544 544 544L512 544C494.3 544 480 529.7 480 512L480 480L160 480L160 512C160 529.7 145.7 544 128 544L96 544C78.3 544 64 529.7 64 512L64 320C64 293.3 80.4 270.4 103.6 260.8zM192 368C192 350.3 177.7 336 160 336C142.3 336 128 350.3 128 368C128 385.7 142.3 400 160 400C177.7 400 192 385.7 192 368zM480 400C497.7 400 512 385.7 512 368C512 350.3 497.7 336 480 336C462.3 336 448 350.3 448 368C448 385.7 462.3 400 480 400z"/>
          </svg>
        `.trim()},{name:"auto-dualtone",icon:`
          <svg class="h-3 w-3" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 640 640">
            <!--!Font Awesome Pro v7.1.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license (Commercial License) Copyright 2025 Fonticons, Inc.-->
            <path opacity=".4" d="M64 480L64 512C64 529.7 78.3 544 96 544L128 544C145.7 544 160 529.7 160 512L160 480L64 480zM173.1 256L466.9 256L440.8 181.4C436.3 168.6 424.2 160 410.6 160L229.4 160C215.8 160 203.7 168.6 199.2 181.4L173.1 256zM480 480L480 512C480 529.7 494.3 544 512 544L544 544C561.7 544 576 529.7 576 512L576 480L480 480z"/><path d="M160 480L64 480L64 320C64 293.3 80.4 270.4 103.6 260.8L138.8 160.3C152.3 121.8 188.6 96 229.4 96L410.6 96C451.4 96 487.7 121.8 501.2 160.3L536.4 260.8C559.6 270.4 576 293.3 576 320L576 480L160 480zM229.4 160C215.8 160 203.7 168.6 199.2 181.4L173.1 256L466.9 256L440.8 181.4C436.3 168.6 424.2 160 410.6 160L229.4 160zM160 400C177.7 400 192 385.7 192 368C192 350.3 177.7 336 160 336C142.3 336 128 350.3 128 368C128 385.7 142.3 400 160 400zM512 368C512 350.3 497.7 336 480 336C462.3 336 448 350.3 448 368C448 385.7 462.3 400 480 400C497.7 400 512 385.7 512 368z"/>
          </svg>
        `.trim()},{name:"motorcycle",icon:`
          <svg class="h-3 w-3" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 640 640">
            <!--!Font Awesome Free v7.1.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free Copyright 2025 Fonticons, Inc.-->
            <path d="M280 80C266.7 80 256 90.7 256 104C256 117.3 266.7 128 280 128L336.6 128L359.1 176.7L264 248C230.6 222.9 189 208 144 208L88 208C74.7 208 64 218.7 64 232C64 245.3 74.7 256 88 256L144 256C222.5 256 287.2 315.6 295.2 392L269.8 392C258.6 332.8 206.5 288 144 288C73.3 288 16 345.3 16 416C16 486.7 73.3 544 144 544C206.5 544 258.5 499.2 269.8 440L320 440C333.3 440 344 429.3 344 416L344 393.5C344 348.4 369.7 308.1 409.5 285.8L421.6 311.9C389.2 335.1 368.1 373.1 368.1 416C368.1 486.7 425.4 544 496.1 544C566.8 544 624.1 486.7 624.1 416C624.1 345.3 566.8 288 496.1 288C485.4 288 475.1 289.3 465.2 291.8L433.8 224L488 224C501.3 224 512 213.3 512 200L512 152C512 138.7 501.3 128 488 128L434.7 128C427.8 128 421 130.2 415.5 134.4L398.4 147.2L373.8 93.9C369.9 85.4 361.4 80 352 80L280 80zM445.8 364.4L474.2 426C479.8 438 494 443.3 506 437.7C518 432.1 523.3 417.9 517.7 405.9L489.2 344.3C491.4 344.1 493.6 344 495.9 344C535.7 344 567.9 376.2 567.9 416C567.9 455.8 535.7 488 495.9 488C456.1 488 423.9 455.8 423.9 416C423.9 395.8 432.2 377.5 445.7 364.4zM144 488C104.2 488 72 455.8 72 416C72 376.2 104.2 344 144 344C175.3 344 202 364 211.9 392L144 392C130.7 392 120 402.7 120 416C120 429.3 130.7 440 144 440L211.9 440C202 468 175.3 488 144 488z"/>
          </svg>
        `.trim()},{name:"motorcycle-dualtone",icon:`
          <svg class="h-3 w-3" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 640 640">
            <!--!Font Awesome Pro v7.1.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license (Commercial License) Copyright 2025 Fonticons, Inc.-->
            <path opacity=".4" d="M16 416C16 345.3 73.3 288 144 288C206.5 288 258.5 332.8 269.8 392L211.9 392C202 364 175.3 344 144 344C104.2 344 72 376.2 72 416C72 455.8 104.2 488 144 488C175.3 488 202 468 211.9 440L269.8 440C258.6 499.2 206.5 544 144 544C73.3 544 16 486.7 16 416zM368 416C368 373.1 389.1 335.1 421.5 311.9L445.7 364.4C432.3 377.5 423.9 395.8 423.9 416C423.9 455.8 456.1 488 495.9 488C535.7 488 567.9 455.8 567.9 416C567.9 376.2 535.7 344 495.9 344C493.7 344 491.4 344.1 489.2 344.3L464.9 291.8C474.8 289.3 485.2 288 495.8 288C566.5 288 623.8 345.3 623.8 416C623.8 486.7 566.5 544 495.8 544C425.1 544 367.8 486.7 367.8 416z"/><path d="M256 104C256 90.7 266.7 80 280 80L352 80C361.4 80 369.9 85.4 373.8 93.9L398.4 147.2L415.5 134.4C421 130.2 427.8 128 434.7 128L488 128C501.3 128 512 138.7 512 152L512 200C512 213.3 501.3 224 488 224L433.8 224L517.8 405.9C523.4 417.9 518.1 432.2 506.1 437.7C494.1 443.2 479.8 438 474.3 426L409.5 285.8C369.7 308.1 344 348.4 344 393.5L344 416C344 429.3 333.3 440 320 440L144 440C130.7 440 120 429.3 120 416C120 402.7 130.7 392 144 392L295.2 392C287.2 315.6 222.6 256 144 256L88 256C74.7 256 64 245.3 64 232C64 218.7 74.7 208 88 208L144 208C189 208 230.6 222.9 264 248L359.1 176.7L336.6 128L280 128C266.7 128 256 117.3 256 104z"/>
          </svg>
        `.trim()}]}constructor(){super(),this.passThruAttributes=["autocomplete","placeholder","min","max","minlength","maxlength","pattern","step","multiple","list"],this.passThruEmptyAttributes=["autofocus","disabled","readonly","required","novalidate"],this.ignoreAttributes=["lbl-label","toggle-switch","tooltip","tooltip-position","select-on-focus","auto-flex"],this.eventAttributes=["onchange","oninput","onblur","onfocus","onkeydown","onkeyup","onkeypress","onclick"];let i=this.querySelector(".wc-input");i?this.componentElement=i:(this.componentElement=document.createElement("div"),this.componentElement.classList.add("wc-input","relative"),this.appendChild(this.componentElement))}async connectedCallback(){super.connectedCallback(),this._applyStyle()}disconnectedCallback(){super.disconnectedCallback(),this._unWireEvents()}_handleAttributeChange(i,e){if(this.eventAttributes.includes(i)){if(this.formElement&&e){let t=new Function("event",`
            const element = event.target;
            const value = element.value;
            const checked = element.checked;
            with (element) {
              ${e}
            }
          `),o=i.substring(2);this.formElement.addEventListener(o,t)}return}if(this.passThruAttributes.includes(i)&&this.formElement?.setAttribute(i,e),this.passThruEmptyAttributes.includes(i))if((this.getAttribute("type")||"text")==="radio")if(i==="required"){let o=this.querySelectorAll('input[type="radio"]');o.length>0&&o[0].setAttribute(i,"")}else this.querySelectorAll('input[type="radio"]').forEach(n=>{n.setAttribute(i,"")});else this.formElement?.setAttribute(i,"");if(this.ignoreAttributes.includes(i),i==="tooltip"||i==="tooltip-position"){this._createTooltipElement();return}if(i==="lbl-class"){let t=this.getAttribute("name");this.querySelector(`label[for="${t}"]`)?.classList.add(e)}else if(i==="radio-group-class"){let t=this.querySelector(".radio-group");e.split(" ").forEach(n=>{n&&t?.classList.add(n.trim())}),t?.classList.add("text-2xs")}else i==="type"?(this.formElement?.setAttribute("type",e),e==="checkbox"?this.hasAttribute("checked")?(this.formElement?.setAttribute("checked",""),this.formElement?.setAttribute("value","bool:True")):(this.formElement?.removeAttribute("checked"),this.formElement?.setAttribute("value","bool:False")):e==="currency"&&this.formElement?.setAttribute("type","number")):super._handleAttributeChange(i,e)}_render(){super._render(),this.querySelector(".wc-input > *")||(this.componentElement.innerHTML="",this._createInnerElement()),this.eventAttributes.forEach(e=>{let t=this.getAttribute(e);t&&this._handleAttributeChange(e,t)}),this._createTooltipElement(),typeof htmx<"u"&&htmx.process(this)}_createInnerElement(){let i=this.getAttribute("lbl-label")||"",e=this.getAttribute("name"),t=this.getAttribute("type")||"text",o=this.hasAttribute("toggle-switch");if(i){let n=document.createElement("label"),s=this.getAttribute("value")||"";t==="range"&&s?n.textContent=`${i} (${s})`:n.textContent=i,n.setAttribute("for",e),this.componentElement.appendChild(n)}if(this.formElement=document.createElement("input"),this.formElement.setAttribute("form-element",""),this.formElement.setAttribute("type",t),t==="radio"){let n=[],s=this.querySelectorAll("option");if(s.forEach(r=>{let l=r.textContent.trim(),c=r.value.trim(),p=r.getAttribute("data-flex"),u={key:l,value:c};p&&(u.flex=p),n.push(u)}),s.forEach(r=>r.remove()),n.length==0&&(n=this.getAttribute("options")?JSON.parse(this.getAttribute("options")):[]),this.hasAttribute("auto-flex")&&n.length>0){let r=n.map(c=>c.key.length),l=r.reduce((c,p)=>c+p,0)/r.length;n.forEach((c,p)=>{c.flex||(r[p]/l>1.5?c.flex="2":c.flex="1")})}let a=document.createElement("div");a.classList.add("radio-group"),n.forEach(r=>{let l=document.createElement("label");l.classList.add("radio-option"),l.textContent=r.key,r.flex&&(l.style.flex=r.flex);let c=document.createElement("input");c.setAttribute("type","radio"),c.setAttribute("name",e),c.setAttribute("value",r.value),r.value===this.getAttribute("value")&&c.setAttribute("checked",""),this.eventAttributes.forEach(p=>{let u=this.getAttribute(p);if(u){let h=p.substring(2),m=new Function("event",`
              const element = event.target;
              const value = element.value;
              const checked = element.checked;
              with (element) {
                ${u}
              }
            `);c.addEventListener(h,m)}}),l.prepend(c),a.appendChild(l)}),this.componentElement.appendChild(a)}else if(t==="checkbox"&&o){this.formElement.classList.add("toggle-checkbox");let n=document.createElement("div");n.classList.add("toggle-wrapper"),n.appendChild(this.formElement);let s=document.createElement("span");s.classList.add("toggle-switch"),n.appendChild(s),this.componentElement.appendChild(n);let a=document.createElement("input");a.name=e,a.type="hidden",a.checked=!0,a.value="bool:False",this.componentElement.appendChild(a)}else if(t==="currency"){this.formElement.setAttribute("type","number");let n=document.createElement("span");n.classList.add("icon");let s=d.icons.find(a=>a.name==="currency-symbol");n.innerHTML=s.icon,this.componentElement.appendChild(this.formElement),this.componentElement.appendChild(n)}else if(t==="auto-dualtone"){this.formElement.setAttribute("type","text");let n=document.createElement("span");n.classList.add("icon");let s=d.icons.find(a=>a.name==="auto-dualtone");n.innerHTML=s.icon,this.componentElement.appendChild(this.formElement),this.componentElement.appendChild(n)}else if(t==="auto"){this.formElement.setAttribute("type","text");let n=document.createElement("span");n.classList.add("icon");let s=d.icons.find(a=>a.name==="auto");n.innerHTML=s.icon,this.componentElement.appendChild(this.formElement),this.componentElement.appendChild(n)}else if(t==="motorcycle-dualtone"){this.formElement.setAttribute("type","text");let n=document.createElement("span");n.classList.add("icon");let s=d.icons.find(a=>a.name==="motorcycle-dualtone");n.innerHTML=s.icon,this.componentElement.appendChild(this.formElement),this.componentElement.appendChild(n)}else if(t==="motorcycle"){this.formElement.setAttribute("type","text");let n=document.createElement("span");n.classList.add("icon");let s=d.icons.find(a=>a.name==="motorcycle");n.innerHTML=s.icon,this.componentElement.appendChild(this.formElement),this.componentElement.appendChild(n)}else if(t==="email"){let n=document.createElement("span");n.classList.add("icon");let s=d.icons.find(a=>a.name==="email-fill");n.innerHTML=s.icon,this.componentElement.appendChild(this.formElement),this.componentElement.appendChild(n)}else if(t==="search"){let n=document.createElement("span");n.classList.add("icon");let s=d.icons.find(a=>a.name==="magnifying-glass");n.innerHTML=s.icon,this.componentElement.appendChild(this.formElement),this.componentElement.appendChild(n)}else if(t==="tel"){let n=document.createElement("span");n.classList.add("icon");let s=d.icons.find(a=>a.name==="tel-fill");n.innerHTML=s.icon,this.formElement.setAttribute("_",`on load or input
          call wc.MaskHub.phoneMask(event)
          me.setCustomValidity('')
        end`),this.componentElement.appendChild(this.formElement),this.componentElement.appendChild(n)}else if(t==="password"){let n=document.createElement("span");n.classList.add("icon");let s=d.icons.find(l=>l.name==="lock");n.innerHTML=s.icon;let a=document.createElement("span");a.classList.add("icon","icon-right");let r=d.icons.find(l=>l.name==="eye");a.innerHTML=r.icon,a.style.cursor="pointer",a.addEventListener("click",()=>this._togglePasswordVisibility()),this.componentElement.appendChild(this.formElement),this.componentElement.appendChild(n),this.componentElement.appendChild(a)}else this.componentElement.appendChild(this.formElement);this.hasAttribute("select-on-focus")&&this.formElement&&this.formElement.addEventListener("focus",n=>{setTimeout(()=>{n.target.select()},0)})}_createTooltipElement(){let i=this.querySelector(".wc-tooltip");i&&i.remove();let e=this.getAttribute("tooltip");if(!e)return;let t=document.createElement("div");t.className="wc-tooltip",t.textContent=e;let o=this.getAttribute("tooltip-position")||"top";t.setAttribute("data-position",o),this.formElement&&(this.formElement.style.anchorName=`--anchor-${this.getAttribute("name")}`,t.style.positionAnchor=`--anchor-${this.getAttribute("name")}`),this.componentElement.appendChild(t),this._wireTooltipEvents()}_wireTooltipEvents(){let i=this.querySelector(".wc-tooltip");if(!i)return;let e=()=>{if("showPopover"in HTMLElement.prototype){i.hasAttribute("popover")||i.setAttribute("popover","manual");try{i.isConnected&&!i.matches(":popover-open")&&i.showPopover()}catch{i.classList.add("show")}}else i.classList.add("show")},t=()=>{if("hidePopover"in HTMLElement.prototype&&i.hasAttribute("popover"))try{i.matches(":popover-open")&&i.hidePopover()}catch{i.classList.remove("show")}else i.classList.remove("show")};if(this.formElement&&(this.formElement.addEventListener("mouseenter",e),this.formElement.addEventListener("mouseleave",t),this.formElement.addEventListener("focus",e),this.formElement.addEventListener("blur",t)),this.getAttribute("type")==="radio"){let o=this.querySelector(".radio-group");o&&(o.addEventListener("mouseenter",e),o.addEventListener("mouseleave",t),o.style.anchorName=`--anchor-${this.getAttribute("name")}`,i.style.positionAnchor=`--anchor-${this.getAttribute("name")}`)}}_togglePasswordVisibility(){if(!this.formElement)return;let i=this.formElement.getAttribute("type"),e=this.componentElement.querySelector(".icon-right");if(i==="password"){this.formElement.setAttribute("type","text");let t=d.icons.find(o=>o.name==="eye-slash");e.innerHTML=t.icon}else{this.formElement.setAttribute("type","password");let t=d.icons.find(o=>o.name==="eye");e.innerHTML=t.icon}}_applyStyle(){let i=`
      wc-input {
        display: contents;
      }

      /* Autofill styles to prevent dark background */
      wc-input input:-webkit-autofill,
      wc-input input:-webkit-autofill:hover,
      wc-input input:-webkit-autofill:focus,
      wc-input input:-webkit-autofill:active {
        -webkit-background-clip: text;
        -webkit-text-fill-color: var(--text-1);
        transition: background-color 5000s ease-in-out 0s;
        box-shadow: inset 0 0 20px 20px var(--surface-3);
      }
      /*
      wc-input label {
        margin-bottom: 0.250rem;
      }
      wc-input input {
        background-color: var(--surface-3);
        border: 1px solid var(--surface-4);
        border-radius: 0.375rem;
        color: var(--text-1);
        padding: 0.375rem;
        width: 100%;
      }
      wc-input input:-webkit-autofill {
        background-color: var(--surface-3);
        color: var(--surface-4);
        box-shadow: 0 0 0px 1000px var(--surface-3) inset;
        -webkit-text-fill-color: var(--text-1);
        transition: background-color 5000s ease-in-out 0s;
      }
      input:focus-visible {
        outline: var(--surface-4) solid 2px;
        outline-offset: 0px;
      }
      input:user-invalid {
        outline: solid 2px var(--invalid-color);
        outline-offset: 0px;
      }
      input[type="checkbox"],
      input[type="range"] {
        background-color: var(--component-bg-color);
        border: 1px solid var(--component-border-color);
        accent-color: var(--component-bg-color);
      }
      input[type="checkbox"]:hover,
      input[type="range"]:hover {
        accent-color: var(--primary-bg-color);
      }
      input[type="button"] {
        position: relative;
        background-color: var(--primary-bg-color);
        color: var(--primary-color);
        border: 1px solid var(--primary-bg-color);
        border: none;
        border-radius: 0.375rem;
        padding: 0.5rem;
        cursor: pointer;
        transition: background-color 0.2s ease;
      }
      input[type="button"]:focus-visible {
        outline: var(--primary-bg-color) solid 2px;
        outline-offset: 2px;  
      }
      input[type="button"]:disabled {
        cursor: not-allowed;
        opacity: 0.7;
      }
      input[type="button"]:hover:not(:disabled) {
        background-color: var(--primary-alt-bg-color);
      }
      */


      div.wc-input :disabled:not(.toggle-checkbox),
      div.wc-textarea :disabled,
      div.wc-select :disabled,
      div.wc-code-mirror :disabled 
      {
        cursor: not-allowed;
        opacity: 0.7;
        font-style: italic;  
      }
      div.wc-input label:has(:disabled),
      div.wc-textarea label:has(:disabled),
      div.wc-select label:has(:disabled),
      div.wc-code-mirror label:has(:disabled)
      {
        cursor: not-allowed;
      }
      div.wc-input:has(:disabled) label,
      div.wc-textarea:has(:disabled) label,
      div.wc-select:has(:disabled) label,
      div.wc-code-mirror:has(:disabled) label
      {
        opacity: 0.7;
        font-style: italic;
      }
      div.wc-input:has(:required) > label,
      div.wc-textarea:has(:required) label,
      div.wc-select:has(:required) label,
      /*div.wc-code-mirror:has(:required) label*/
      div.wc-code-mirror[required] label
      {
        font-weight: bold;
      }
      div.wc-input:has(:required) > label::after,
      div.wc-textarea:has(:required) label::after,
      div.wc-select:has(:required) label::after,
      /*div.wc-code-mirror:has(:required) label::after*/
      div.wc-code-mirror[required] label::after
      {
        content: ' *';
        font-weight: bold;
      }



      wc-input input {
        width: 100%;
      }
      wc-input .toggle-wrapper {
        position: relative;
        width: 50px;
        height: 22px;
        display: inline-block;
        margin-top: 0.25rem;
      }

      wc-input .toggle-checkbox {
        opacity: 0;
        width: 100%;
        height: 100%;
      }
      wc-input .toggle-checkbox:focus-visible + .toggle-switch {
        outline: var(--primary-bg-color) solid 2px;
        outline-offset: 0px;
      }

      wc-input .toggle-switch {
        position: absolute;
        top: 0;
        left: 0;
        right: 0;
        bottom: 0;
        background-color: var(--toggle-off);
        border: 1px solid var(--component-border-color);
        border-radius: 25px;
        /* cursor: pointer; */
        transition: background-color 0.4s;
        pointer-events: none;
      }

      .xdark wc-input .toggle-switch {
        background-color: var(--toggle-off);
        border: 1px solid var(--component-border-color);
        transition: background-color 0.25s;
      }

      wc-input .toggle-switch::before {
        position: absolute;
        content: "";
        height: 15px;
        width: 15px;
        left: 2px;
        bottom: 2px;
        background-color: var(--primary-bg-color);
        border: 1px solid var(--toggle-off);
        border-radius: 50%;
        transition: transform 0.4s;
      }

      wc-input .toggle-checkbox:checked + .toggle-switch::before {
        border: 1px solid var(--toggle-on);
      }
      wc-input .toggle-checkbox:checked + .toggle-switch {
        background-color: var(--toggle-on);
      }
      .xdark wc-input .toggle-checkbox:checked + .toggle-switch {
        background-color: var(--component-bg-color);
      }

      wc-input .toggle-checkbox:checked + .toggle-switch::before {
        transform: translateX(27px);
      }

      wc-input .toggle-checkbox:disabled + .toggle-switch {
        opacity: 0.7;
      }




      wc-input .radio-group {
        min-height: 34.5px;
      }
      wc-input .radio-group:not(.row):not(.row-1):not(.col):not(.col-1) {
        display: inline-flex;
      }
      wc-input .radio-group:not(.modern) {
        gap: 0.875rem;
      }
      wc-input .radio-group .radio-option {
        display: inline-flex;
        flex: 1 1 0%;
        align-items: center;
        justify-content: center;
        position: relative;
        outline: none;
        text-align: center;
      }
      wc-input .radio-group:not(.modern) .radio-option {
        padding-left: 12px;
        align-self: center;
        justify-content: left;
      }
      wc-input .radio-group.col:not(.modern) .radio-option {
        padding-left: 12px;
        align-self: self-start;
      }
      wc-input .radio-group.modern {
        border: 1px solid var(--component-bg-color);
        border-radius: 5px;
      }
      wc-input .radio-group.modern .radio-option {
        padding: 0 0.5rem;
        background-color: var(--component-bg-color);
        color: var(--primary-color);
        border-right: 1px solid var(--component-bg-color);
      }
      wc-input .radio-group.modern .radio-option:first-child {
        border-top-left-radius: 5px;
        border-bottom-left-radius: 5px;
      }
      wc-input .radio-group.modern .radio-option:last-child {
        border-right: none;
        border-top-right-radius: 5px;
        border-bottom-right-radius: 5px;
      }
      wc-input .radio-group .radio-option input[type="radio"] {
        opacity: 0;
        margin: 0;
      }
      wc-input .radio-group.modern .radio-option input[type="radio"] {
        position: absolute;
      }
      wc-input .radio-group.modern .radio-option:hover:not(:has(input[type="radio"]:disabled)) {
        background-color: var(--primary-bg-color);
        color: var(--primary-color);
      }
      wc-input .radio-group.modern .radio-option:has(input[type="radio"]:checked) {
        background-color: var(--radio-checked-bg);
        color: var(--secondary-alt-color);
      }
      wc-input .radio-group.modern:has(:focus-within) {
        outline: var(--primary-bg-color) solid 2px;
        outline-offset: 0px;
        border: 1px solid transparent;
      }
      wc-input .radio-group:not(.modern) .radio-option::before {
        content: "";
        display: inline-block;
        width: 16px;
        height: 16px;
        border-radius: 50%;
        border: 2px solid var(--component-border-color);
        background-color: var(--white-color);
        transition: border-color 0.3s;
        position: absolute;
        left: 0;
        top: 0;
      }
      wc-input .radio-group:not(.modern) .radio-option:has(:checked)::after {
        content: "";
        display: inline-block;
        width: 10px; /* Slightly smaller than outer circle */
        height: 10px;
        border-radius: 50%;
        background-color: var(--primary-bg-color);
        position: absolute;
        left: 5px;
        top: 5px;
        transition: background-color 0.3s;
      }
      wc-input .radio-option:hover::before {
        border-color: var(--secondary-bg-color);
      }
      wc-input .radio-group:not(.modern) .radio-option:focus-within::after {
        outline: var(--primary-bg-color) solid 2px;
        outline-offset: 0px;
      }



      wc-input[type="auto"] input {
        padding-left: 25px;
        min-width: 130px;
      }
      wc-input[type="auto"] input + .icon {
        position: absolute;
        top: 25px;
        left: 5px;
      }
      wc-input[type="auto-dualtone"] input {
        padding-left: 25px;
        min-width: 130px;
      }
      wc-input[type="auto-dualtone"] input + .icon {
        position: absolute;
        top: 25px;
        left: 5px;
      }

      wc-input[type="motorcycle"] input {
        padding-left: 25px;
        min-width: 130px;
      }
      wc-input[type="motorcycle"] input + .icon {
        position: absolute;
        top: 25px;
        left: 5px;
      }
      wc-input[type="motorcycle-dualtone"] input {
        padding-left: 25px;
        min-width: 130px;
      }
      wc-input[type="motorcycle-dualtone"] input + .icon {
        position: absolute;
        top: 25px;
        left: 5px;
      }


      wc-input input[type="email"] {
        padding-left: 25px;
        min-width: 130px;
      }
      wc-input input[type="email"] + .icon {
        position: absolute;
        top: 25px;
        left: 5px;
      }

      wc-input input[type="search"] {
        padding-left: 25px;
        min-width: 130px;
      }
      wc-input input[type="search"] + .icon {
        position: absolute;
        left: 5px;
      }
      wc-input label + input[type="search"] + .icon {
        top: 25px;
      }
      wc-input input[type="search"] + .icon {
        top: 10px;
      }

      wc-input input[type="tel"] {
        padding-left: 25px;
        min-width: 130px;
      }
      wc-input input[type="tel"] + .icon {
        position: absolute;
        top: 25px;
        left: 5px;
      }

      wc-input[type="currency"] input[type="number"] {
        padding-left: 25px;
      }
      wc-input[type="currency"] input[type="number"] + .icon {
        position: absolute;
        top: 25px;
        left: 5px;
      }

      wc-input input[type="password"] {
        padding-left: 25px;
        padding-right: 30px;
      }
      wc-input input[type="password"] + .icon {
        position: absolute;
        top: 25px;
        left: 5px;
      }
      wc-input input[type="password"] ~ .icon-right {
        position: absolute;
        top: 25px;
        right: 8px;
      }
      
      /* When password is toggled to text, maintain the padding and icon positions */
      wc-input:has(.icon-right) input[type="text"] {
        padding-left: 25px;
        padding-right: 30px;
      }
      wc-input:has(.icon-right) input[type="text"] + .icon {
        position: absolute;
        top: 25px;
        left: 5px;
      }
      wc-input input[type="text"] ~ .icon-right {
        position: absolute;
        top: 25px;
        right: 8px;
      }






    /* Tooltip styles with Anchor Positioning API */
      wc-input .wc-tooltip {
        position: absolute;
        background-color: rgba(0, 0, 0, 0.9);
        color: white;
        padding: 6px 12px;
        border-radius: 4px;
        font-size: 0.75rem;
        white-space: normal;
        word-wrap: break-word;
        pointer-events: none;
        z-index: 10000;
        max-width: 250px;
        margin: 0;
        border: 0;
        opacity: 0;
        visibility: hidden;
        transition: opacity 0.2s, visibility 0.2s;
      }

      /* Show states */
      wc-input .wc-tooltip.show,
      wc-input .wc-tooltip:popover-open {
        opacity: 1;
        visibility: visible;
      }

      /* Popover specific resets */
      wc-input .wc-tooltip[popover] {
        inset: unset;
      }

      /* Anchor positioning when supported */
      @supports (anchor-name: --test) {
        wc-input .wc-tooltip {
          position-try-options: flip-block, flip-inline, flip-block flip-inline;
        }

        wc-input .wc-tooltip.show {
          opacity: 1;
          visibility: visible;
        }
      }

      /* Popover API styles */
      wc-input .wc-tooltip[popover] {
        margin: 0;
        border: 0;
        padding: 6px 12px;
        overflow: visible;
      }

      wc-input .wc-tooltip:popover-open {
        opacity: 1;
        visibility: visible;
      }

      /* Position variations using anchor positioning */
      wc-input .wc-tooltip[data-position="top"] {
        bottom: anchor(top);
        left: anchor(center);
        translate: -50% -8px;

        /* Fallback for position-try */
        position-try-fallbacks:
          bottom-then-top,
          snap-to-edge;
      }

      wc-input .wc-tooltip[data-position="bottom"] {
        top: anchor(bottom);
        left: anchor(center);
        translate: -50% 8px;

        position-try-fallbacks:
          top-then-bottom,
          snap-to-edge;
      }

      wc-input .wc-tooltip[data-position="left"] {
        right: anchor(left);
        top: anchor(center);
        translate: -8px -50%;

        position-try-fallbacks:
          right-then-left,
          snap-to-edge;
      }

      wc-input .wc-tooltip[data-position="right"] {
        left: anchor(right);
        top: anchor(center);
        translate: 8px -50%;

        position-try-fallbacks:
          left-then-right,
          snap-to-edge;
      }

      /* Try to keep tooltip in viewport */
      @position-try bottom-then-top {
        bottom: auto;
        top: anchor(bottom);
        translate: -50% 8px;
      }

      @position-try top-then-bottom {
        top: auto;
        bottom: anchor(top);
        translate: -50% -8px;
      }

      @position-try right-then-left {
        right: auto;
        left: anchor(right);
        translate: 8px -50%;
      }

      @position-try left-then-right {
        left: auto;
        right: anchor(left);
        translate: -8px -50%;
      }

      @position-try snap-to-edge {
        position: absolute;
        inset: auto;
        top: 0;
        left: 0;
      }

      /* Arrow styles - hidden when position changes */
      wc-input .wc-tooltip::before {
        content: '';
        position: absolute;
        width: 0;
        height: 0;
        border: 6px solid transparent;
      }

      wc-input .wc-tooltip[data-position="top"]::before {
        border-top-color: rgba(0, 0, 0, 0.9);
        bottom: -12px;
        left: 50%;
        transform: translateX(-50%);
      }

      wc-input .wc-tooltip[data-position="bottom"]::before {
        border-bottom-color: rgba(0, 0, 0, 0.9);
        top: -12px;
        left: 50%;
        transform: translateX(-50%);
      }

      wc-input .wc-tooltip[data-position="left"]::before {
        border-left-color: rgba(0, 0, 0, 0.9);
        right: -12px;
        top: 50%;
        transform: translateY(-50%);
      }

      wc-input .wc-tooltip[data-position="right"]::before {
        border-right-color: rgba(0, 0, 0, 0.9);
        left: -12px;
        top: 50%;
        transform: translateY(-50%);
      }

      /* Fallback positioning for older browsers */
      @supports not (anchor-name: --test) {
        wc-input .wc-tooltip[data-position="top"] {
          position: absolute;
          bottom: 100%;
          left: 50%;
          transform: translateX(-50%);
          margin-bottom: 8px;
        }

        wc-input .wc-tooltip[data-position="bottom"] {
          position: absolute;
          top: 100%;
          left: 50%;
          transform: translateX(-50%);
          margin-top: 8px;
        }

        wc-input .wc-tooltip[data-position="left"] {
          position: absolute;
          right: 100%;
          top: 50%;
          transform: translateY(-50%);
          margin-right: 8px;
        }

        wc-input .wc-tooltip[data-position="right"] {
          position: absolute;
          left: 100%;
          top: 50%;
          transform: translateY(-50%);
          margin-left: 8px;
        }
      }

    `.trim();this.loadStyle("wc-input-style",i)}_unWireEvents(){super._unWireEvents();let i=this.querySelector(".wc-tooltip");i&&(i.popover&&i.matches(":popover-open")&&i.hidePopover(),i.remove()),this.formElement&&(this.formElement.style.anchorName="");let e=this.querySelector(".radio-group");e&&(e.style.anchorName="")}};customElements.define("wc-input",le);var ce=class extends q{static get observedAttributes(){return["name","id","class","multiple","value","items","url","display-member","value-member","lbl-label","disabled","required","autofocus","elt-class","onchange","oninput","onblur","onfocus","onkeydown","onkeyup","onkeypress","onclick","tooltip","tooltip-position"]}constructor(){super(),this.selectedOptions=[],this.mode=this.getAttribute("mode")||"chip",this.hasAttribute("mode")||(this.mode="standard"),this.highlightedIndex=-1,this.eventAttributes=["onchange","oninput","onblur","onfocus","onkeydown","onkeyup","onkeypress","onclick"];let i=this.querySelector(".wc-select");i?this.componentElement=i:(this.componentElement=document.createElement("div"),this.componentElement.classList.add("wc-select","relative"),this.appendChild(this.componentElement))}async connectedCallback(){super.connectedCallback(),this._applyStyle()}disconnectedCallback(){super.disconnectedCallback(),this._unWireEvents()}_handleAttributeChange(i,e){if(i==="tooltip"||i==="tooltip-position"){this._createTooltipElement();return}if(this.eventAttributes.includes(i)){if(this.formElement&&e){let t=i.substring(2);this._eventHandlers||(this._eventHandlers={}),this._eventHandlers[t]&&this.formElement.removeEventListener(t,this._eventHandlers[t]);let o=new Function("event",`
          const element = event.target;
          const value = element.value;
          with (element) {
            ${e}
          }
        `);this._eventHandlers[t]=o,this.formElement.addEventListener(t,o)}return}if(this.eventAttributes.includes(i)){if(this.formElement&&e){let t=new Function("event",`
          const element = event.target;
          const value = element.value;
          with (element) {
            ${e}
          }
        `),o=i.substring(2);this.formElement.addEventListener(o,t)}return}i==="autofocus"?this.formElement?.setAttribute("autofocus",""):i==="url"?e&&fetch(e).then(t=>t.json()).then(t=>{this._items=t,this._generateOptionsFromItems(),this._items.forEach(o=>{if(o.selected){let n=this.getAttribute("display-member")||"key",s=this.getAttribute("value-member")||"value";this.selectedOptions.includes(o[s])||this.addChip(o[s],o[n])}})}):i==="items"?(typeof e=="string"&&(this._items=JSON.parse(e),this._generateOptionsFromItems(),this._items.forEach(t=>{if(t.selected){let o=this.getAttribute("display-member")||"key",n=this.getAttribute("value-member")||"value";this.addChip(t[n],t[o])}})),this.removeAttribute("items")):i==="disabled"?this.formElement?.setAttribute("disabled",""):i==="required"?this.formElement?.setAttribute("required",""):i==="multiple"?this.formElement?.setAttribute("multiple",""):i==="lbl-label"||i==="value-member"||i==="display-member"||super._handleAttributeChange(i,e)}_render(){super._render(),this.querySelector(".wc-select > *")||(this.componentElement.innerHTML="",this._createInnerElement(),this.mode==="chip"&&this.querySelectorAll("option[selected]").forEach(t=>{this.selectedOptions.includes(t.value)||this.addChip(t.value,t.textContent)})),this.eventAttributes.forEach(e=>{let t=this.getAttribute(e);t&&this._handleAttributeChange(e,t)}),this._createTooltipElement(),typeof htmx<"u"&&htmx.process(this)}_createInnerElement(){let i=this.getAttribute("lbl-label")||"",e=this.getAttribute("name");if(this.hasAttribute("lbl-label")){let s=document.createElement("label");s.textContent=i,this.getAttribute("mode")==="chip"?s.setAttribute("for","dropdownInput"):s.setAttribute("for",e),this.componentElement.appendChild(s)}let t=document.createElement("select");t.id=e,t.name=e,this.getAttribute("multiple")&&(t.multiple=!0,t.setAttribute("multiple",""));let o=this.getAttribute("size");o&&t.setAttribute("size",o);let n=Array.from(this.children);if(n.forEach(s=>{if(s.tagName==="OPTION")t.appendChild(s.cloneNode(!0));else if(s.tagName==="OPTGROUP"){let a=s.cloneNode(!1);s.querySelectorAll("option").forEach(l=>{a.appendChild(l.cloneNode(!0))}),t.appendChild(a)}}),this.formElement=t,this.getAttribute("mode")==="chip"){t.name=e;let s=document.createElement("div");s.classList.add("row");let a=document.createElement("div");a.classList.add("chip-container"),a.id="chipContainer",s.appendChild(a);let r=document.createElement("div");r.classList.add("dropdown");let l=document.createElement("input");l.classList.add("dropdown-input"),l.id="dropdownInput",l.setAttribute("placeholder","Add or select..."),this.eventAttributes.forEach(u=>{let h=this.getAttribute(u);if(h&&u!=="onchange"){let m=u.substring(2),b=new Function("event",`
            const element = event.target;
            const value = element.value;
            with (element) {
              ${h}
            }
          `);l.addEventListener(m,b)}}),this.hasAttribute("disabled")&&l.setAttribute("disabled",""),this.hasAttribute("required")&&l.setAttribute("required",""),r.appendChild(l);let c=document.createElement("div");c.classList.add("options-container"),c.id="optionsContainer";let p="";n.forEach(u=>{if(u.tagName==="OPTION")p+=`<div class="option" data-value="${u.value}">${u.textContent}</div>`;else if(u.tagName==="OPTGROUP"){let h=u.getAttribute("label")||"";p+=`<div class="optgroup-label">${h}</div>`,u.querySelectorAll("option").forEach(b=>{p+=`<div class="option optgroup-option" data-value="${b.value}">${b.textContent}</div>`})}}),c.innerHTML=p,r.appendChild(c),r.appendChild(t),s.appendChild(r),this.componentElement.appendChild(s)}else this.componentElement.appendChild(t);this.removeAttribute("name"),this.attachEventListeners()}_generateOptionsFromItems(){let i=this.getAttribute("display-member")||"key",e=this.getAttribute("value-member")||"value",t=this.getAttribute("value")||null,o=this.getAttribute("mode")==="chip";this.formElement.innerHTML="";let n="";this._items.forEach(a=>{if(a.optgroup&&Array.isArray(a.options)){let r=document.createElement("optgroup");r.label=a.label||a.optgroup,o&&(n+=`<div class="optgroup-label">${r.label}</div>`),a.options.forEach(l=>{let c=document.createElement("option");typeof l=="object"?(c.value=l[e],c.textContent=l[i]):(c.value=l,c.textContent=l),c.value==t&&(c.selected=!0),r.appendChild(c),o&&(n+=`<div class="option optgroup-option" data-value="${c.value}">${c.textContent}</div>`)}),this.formElement.appendChild(r)}else{let r=document.createElement("option");typeof a=="object"?(r.value=a[e],r.textContent=a[i]):(r.value=a,r.textContent=a),r.value==t&&(r.selected=!0),this.formElement.appendChild(r),o&&(n+=`<div class="option" data-value="${r.value}">${r.textContent}</div>`)}});let s=this.querySelector(".options-container");s&&o&&(s.innerHTML=n)}_createTooltipElement(){let i=this.querySelector(".wc-tooltip");i&&i.remove();let e=this.getAttribute("tooltip");if(!e)return;let t=document.createElement("div");t.className="wc-tooltip",t.textContent=e;let o=this.getAttribute("tooltip-position")||"top";t.setAttribute("data-position",o);let n=`--anchor-${this.getAttribute("name")||Date.now()}`;this.formElement&&(this.formElement.style.anchorName=n,t.style.positionAnchor=n),this.componentElement.appendChild(t),this._wireTooltipEvents()}_wireTooltipEvents(){let i=this.querySelector(".wc-tooltip");if(!i)return;let e=()=>{if("showPopover"in HTMLElement.prototype){i.hasAttribute("popover")||i.setAttribute("popover","manual");try{i.isConnected&&!i.matches(":popover-open")&&i.showPopover()}catch{i.classList.add("show")}}else i.classList.add("show")},t=()=>{if("hidePopover"in HTMLElement.prototype&&i.hasAttribute("popover"))try{i.matches(":popover-open")&&i.hidePopover()}catch{i.classList.remove("show")}else i.classList.remove("show")};if(this.formElement&&(this.formElement.addEventListener("mouseenter",e),this.formElement.addEventListener("mouseleave",t),this.formElement.addEventListener("focus",e),this.formElement.addEventListener("blur",t)),this.mode==="chip"){let o=this.querySelector("#dropdownInput");o&&(o.addEventListener("mouseenter",e),o.addEventListener("mouseleave",t),o.addEventListener("focus",e),o.addEventListener("blur",t))}}_applyStyle(){let i=`
      wc-select {
        display: contents;
      }
      wc-select > option,
      wc-select > optgroup {
        display: none;
      }
      wc-select .chip-container { 
        display: none;
        flex-wrap: wrap; 
        gap: 5px; 
        margin-bottom: 5px; 
      }
      wc-select[mode="chip"] .chip-container { 
        display: flex; 
      }

      wc-select .chip { 
        display: flex; 
        align-items: center; 
        padding: 5px; 
        background-color: var(--primary-bg-color); 
        color: var(--primary-color);
        border-radius: 15px; 
        font-size: 0.75rem; /* 12px */
        line-height: 1rem; /* 16px */
      }
      wc-select .chip-close { 
        margin-left: 5px; 
        cursor: pointer; 
        font-weight: bold; 
      }
      wc-select:has(:disabled) .chip {
        opacity: 0.7;
        font-style: italic;
      }
      wc-select:has(:disabled) .chip .chip-close {
        display: none;
      }
      wc-select .dropdown { 
        display: flex; 
        flex-direction: row;
        flex: 1 1 0%;
        position: relative; 
      }
      wc-select .dropdown-input { 
        display: none;
        width: 100%;
        min-width: 85px;
        padding: 0.375rem;
      }
      wc-select .chip-container:has(.chip) + .dropdown .dropdown-input {
        margin-left: 0.5rem;
      }
      wc-select[mode="chip"] .dropdown-input { 
        display: block; 
      }
      wc-select .options-container { 
        display: none;
        position: absolute; 
        top: 29.5px; 
        left: 0; 
        right: 0; 
        background: var(--secondary-bg-color); 
        color: var(--primary-color);
        border: 1px solid var(--accent-bg-color); 
        max-height: 150px;
        margin-left 0.5rem;
        overflow-y: auto; 
        z-index: 10; 
      }

      wc-select[mode="chip"] .options-container { 
        display: none;
      }
      wc-select .chip-container:has(.chip) + .dropdown .options-container {
        margin-left: 0.5rem;
      }
      wc-select .option { 
        padding: 5px; 
        cursor: pointer; 
      }
      wc-select .option.highlighted { 
        background-color: var(--primary-bg-color);
        color: var(--primary-color);
      }
      wc-select .option:hover { 
        background-color: var(--primary-bg-color);
        color: var(--primary-color);
      }
      wc-select .optgroup-label {
        padding: 8px 5px 5px 5px;
        font-weight: bold;
        font-size: 0.875rem;
        color: var(--component-alt-color);
        background-color: var(--accent-bg-color);
        cursor: default;
        border-bottom: 1px solid var(--border-color);
      }
      wc-select .optgroup-option {
        padding-left: 20px;
      }
      wc-select .optgroup-label:not(:first-child) {
        margin-top: 4px;
      }
      wc-select select { 
        display: block; 
        width: 100%; 
        padding: 0.45rem 0.75rem 0.45rem 0.25rem;  
      }
      wc-select[mode="multiple"] select { 
        display: block;
      }
      wc-select[mode="chip"] select { 
        display: none;
      }
      wc-select select:disabled { 
        cursor: not-allowed;
        opacity: 0.7;
        font-style: italic;
      }
      wc-select select:disabled option {
        color: var(--component-alt-color);
      }
      wc-select .dropdown-input:disabled {
        cursor: not-allowed;
        opacity: 0.7;
        font-style: italic;
      }



      

      /* Tooltip styles with Anchor Positioning API */
        wc-select .wc-tooltip {
          position: absolute;
          background-color: rgba(0, 0, 0, 0.9);
          color: white;
          padding: 6px 12px;
          border-radius: 4px;
          font-size: 0.75rem;
          white-space: normal;
          word-wrap: break-word;
          pointer-events: none;
          z-index: 10000;
          max-width: 250px;
          margin: 0;
          border: 0;
          opacity: 0;
          visibility: hidden;
          transition: opacity 0.2s, visibility 0.2s;
        }

        /* Show states */
        wc-select .wc-tooltip.show,
        wc-select .wc-tooltip:popover-open {
          opacity: 1;
          visibility: visible;
        }

        /* Popover specific resets */
        wc-select .wc-tooltip[popover] {
          inset: unset;
        }

        /* Anchor positioning when supported */
        @supports (anchor-name: --test) {
          wc-select .wc-tooltip {
            position-try-options: flip-block, flip-inline, flip-block flip-inline;
          }

          wc-select .wc-tooltip.show {
            opacity: 1;
            visibility: visible;
          }
        }

        /* Popover API styles */
        wc-select .wc-tooltip[popover] {
          margin: 0;
          border: 0;
          padding: 6px 12px;
          overflow: visible;
        }

        wc-select .wc-tooltip:popover-open {
          opacity: 1;
          visibility: visible;
        }

        /* Position variations using anchor positioning */
        wc-select .wc-tooltip[data-position="top"] {
          bottom: anchor(top);
          left: anchor(center);
          translate: -50% -8px;

          /* Fallback for position-try */
          position-try-fallbacks:
            bottom-then-top,
            snap-to-edge;
        }

        wc-select .wc-tooltip[data-position="bottom"] {
          top: anchor(bottom);
          left: anchor(center);
          translate: -50% 8px;

          position-try-fallbacks:
            top-then-bottom,
            snap-to-edge;
        }

        wc-select .wc-tooltip[data-position="left"] {
          right: anchor(left);
          top: anchor(center);
          translate: -8px -50%;

          position-try-fallbacks:
            right-then-left,
            snap-to-edge;
        }

        wc-select .wc-tooltip[data-position="right"] {
          left: anchor(right);
          top: anchor(center);
          translate: 8px -50%;

          position-try-fallbacks:
            left-then-right,
            snap-to-edge;
        }

        /* Try to keep tooltip in viewport */
        @position-try bottom-then-top {
          bottom: auto;
          top: anchor(bottom);
          translate: -50% 8px;
        }

        @position-try top-then-bottom {
          top: auto;
          bottom: anchor(top);
          translate: -50% -8px;
        }

        @position-try right-then-left {
          right: auto;
          left: anchor(right);
          translate: 8px -50%;
        }

        @position-try left-then-right {
          left: auto;
          right: anchor(left);
          translate: -8px -50%;
        }

        @position-try snap-to-edge {
          position: absolute;
          inset: auto;
          top: 0;
          left: 0;
        }

        /* Arrow styles - hidden when position changes */
        wc-select .wc-tooltip::before {
          content: '';
          position: absolute;
          width: 0;
          height: 0;
          border: 6px solid transparent;
        }

        wc-select .wc-tooltip[data-position="top"]::before {
          border-top-color: rgba(0, 0, 0, 0.9);
          bottom: -12px;
          left: 50%;
          transform: translateX(-50%);
        }

        wc-select .wc-tooltip[data-position="bottom"]::before {
          border-bottom-color: rgba(0, 0, 0, 0.9);
          top: -12px;
          left: 50%;
          transform: translateX(-50%);
        }

        wc-select .wc-tooltip[data-position="left"]::before {
          border-left-color: rgba(0, 0, 0, 0.9);
          right: -12px;
          top: 50%;
          transform: translateY(-50%);
        }

        wc-select .wc-tooltip[data-position="right"]::before {
          border-right-color: rgba(0, 0, 0, 0.9);
          left: -12px;
          top: 50%;
          transform: translateY(-50%);
        }

        /* Fallback positioning for older browsers */
        @supports not (anchor-name: --test) {
          wc-select .wc-tooltip[data-position="top"] {
            position: absolute;
            bottom: 100%;
            left: 50%;
            transform: translateX(-50%);
            margin-bottom: 8px;
          }

          wc-select .wc-tooltip[data-position="bottom"] {
            position: absolute;
            top: 100%;
            left: 50%;
            transform: translateX(-50%);
            margin-top: 8px;
          }

          wc-select .wc-tooltip[data-position="left"] {
            position: absolute;
            right: 100%;
            top: 50%;
            transform: translateY(-50%);
            margin-right: 8px;
          }

          wc-select .wc-tooltip[data-position="right"] {
            position: absolute;
            left: 100%;
            top: 50%;
            transform: translateY(-50%);
            margin-left: 8px;
          }
        }
    `.trim();this.loadStyle("wc-select-style",i)}attachEventListeners(){let i=this.querySelector("#dropdownInput"),e=this.querySelector("#optionsContainer"),t=this.querySelector("#chipContainer");this.mode==="chip"&&i&&(i?.addEventListener("focus",()=>e.style.display="block"),i?.addEventListener("input",()=>this.filterOptions(i.value)),e?.addEventListener("click",o=>{o.target.classList.contains("option")&&(this.addChip(o.target.getAttribute("data-value"),o.target.textContent),e.style.display="none",i.value="")}),i?.addEventListener("keydown",o=>this.handleKeyboardNavigation(o)),document.addEventListener("click",o=>{this.contains(o.target)||(e.style.display="none")}),t?.addEventListener("click",o=>{if(o.target.classList.contains("chip-close")){let s=o.target.closest(".chip").getAttribute("data-value");this.removeChip(s)}}))}handleKeyboardNavigation(i){let e=this.querySelector("#optionsContainer"),t=Array.from(e.querySelectorAll(".option")).filter(n=>n.style.display!=="none"&&!n.classList.contains("optgroup-label")),o=this.hasAttribute("allow-dynamic");if(i.key==="ArrowDown")i.preventDefault(),this.highlightedIndex=(this.highlightedIndex+1)%t.length,this.updateHighlight(t);else if(i.key==="ArrowUp")i.preventDefault(),this.highlightedIndex=(this.highlightedIndex-1+t.length)%t.length,this.updateHighlight(t);else if(i.key==="Enter"&&this.highlightedIndex>=0){i.preventDefault();let n=t[this.highlightedIndex];this.addChip(n.getAttribute("data-value"),n.textContent),this.resetDropdown()}else if(i.key==="Enter"&&o){i.preventDefault();let n=i.target.value;this.addChip(n,n),this.resetDropdown()}else i.key==="Escape"&&this.resetDropdown()}updateHighlight(i){i.forEach(e=>e.classList.remove("highlighted")),this.highlightedIndex>=0&&this.highlightedIndex<i.length&&i[this.highlightedIndex].classList.add("highlighted")}resetDropdown(){let i=this.querySelector("#dropdownInput"),e=this.querySelector("#optionsContainer");this.highlightedIndex=-1,i.value="",e.style.display="none",this.updateHighlight([])}filterOptions(i){let e=this.querySelector("#optionsContainer"),t=e.querySelectorAll(".option"),o=e.querySelectorAll(".optgroup-label");t.forEach(n=>{n.textContent.toLowerCase().includes(i.toLowerCase())&&!this.selectedOptions.includes(n.getAttribute("data-value"))?n.style.display="block":n.style.display="none"}),o.forEach(n=>{let s=!1,a=n.nextElementSibling;for(;a&&a.classList.contains("optgroup-option");){if(a.style.display!=="none"){s=!0;break}a=a.nextElementSibling}n.style.display=s?"block":"none"}),this.highlightedIndex=-1,this.updateHighlight([])}addChip(i,e){let t=this.hasAttribute("allow-dynamic");this.selectedOptions.includes(i)||(this.selectedOptions.push(i),setTimeout(()=>{if(t){let n=this.querySelector("select");if(!Array.from(n.options).some(a=>a.value===i)){let a=new Option(e,i);n.add(a)}}this.updateSelect(),this.updateChips(),this.updateDropdownOptions();let o=new Event("change");this.dispatchEvent(o)},10))}removeChip(i){this.selectedOptions=this.selectedOptions.filter(t=>t!==i),this.updateSelect(),this.updateChips(),this.updateDropdownOptions();let e=new Event("change");this.dispatchEvent(e)}updateChips(){let i=this.querySelector("#chipContainer");i&&this.mode==="chip"&&(i.innerHTML=this.selectedOptions.map(e=>{let t=Array.from(this.querySelectorAll("option")).find(n=>n.value===e),o=t?t.textContent:e;return`<div class="chip" data-value="${e}">${o}<span class="chip-close">&times;</span></div>`}).join(""))}updateSelect(){let i=this.querySelector("select"),e=this.hasAttribute("allow-dynamic"),t=[];e&&Array.from(i.options).forEach(n=>{Array.from(this.children).some(a=>a.tagName==="OPTION"?a.value===n.value:a.tagName==="OPTGROUP"?Array.from(a.querySelectorAll("option")).some(r=>r.value===n.value):!1)||t.push({value:n.value,label:n.textContent})}),i.innerHTML="",Array.from(this.children).forEach(n=>{if(n.tagName==="OPTION"){let s=n.cloneNode(!0);s.selected=this.selectedOptions.includes(s.value),i.appendChild(s)}else if(n.tagName==="OPTGROUP"){let s=n.cloneNode(!1);n.querySelectorAll("option").forEach(r=>{let l=r.cloneNode(!0);l.selected=this.selectedOptions.includes(l.value),s.appendChild(l)}),i.appendChild(s)}}),e&&t.forEach(({value:n,label:s})=>{let a=new Option(s,n);a.selected=this.selectedOptions.includes(n),i.add(a)})}updateDropdownOptions(){let i=this.querySelector("#optionsContainer");i&&Array.from(i.querySelectorAll(".option")).forEach(e=>{e.style.display=this.selectedOptions.includes(e.getAttribute("data-value"))?"none":"block"})}_unWireEvents(){super._unWireEvents();let i=this.querySelector(".wc-tooltip");i&&(i.popover&&i.matches(":popover-open")&&i.hidePopover(),i.remove()),this.formElement&&(this.formElement.style.anchorName="")}};customElements.define("wc-select",ce);var de=class extends q{static get observedAttributes(){return["name","id","class","value","rows","cols","placeholder","lbl-label","disabled","readonly","required","autofocus","elt-class"]}constructor(){super(),this.firstContent="",this.firstChild&&this.firstChild.nodeName=="#text"&&(this.firstContent=this.firstChild.textContent,this.removeChild(this.firstChild));let i=this.querySelector(".wc-textarea");i?this.componentElement=i:(this.componentElement=document.createElement("div"),this.componentElement.classList.add("wc-textarea","relative"),this.appendChild(this.componentElement))}async connectedCallback(){super.connectedCallback(),this._applyStyle()}disconnectedCallback(){super.disconnectedCallback(),this._unWireEvents()}_handleAttributeChange(i,e){i==="autofocus"?this.formElement?.setAttribute("autofocus",""):i==="lbl-label"||(i==="disabled"?this.formElement?.setAttribute("disabled",""):i==="readonly"?this.formElement?.setAttribute("readonly",""):i==="required"?this.formElement?.setAttribute("required",""):i==="placeholder"?this.formElement?.setAttribute("placeholder",e):i==="cols"?this.formElement?.setAttribute("cols",e):i==="rows"?this.formElement?.setAttribute("rows",e):super._handleAttributeChange(i,e))}_render(){super._render(),this.querySelector(".wc-textarea > *")||(this.componentElement.innerHTML="",this._createInnerElement()),typeof htmx<"u"&&htmx.process(this)}_createInnerElement(){let i=this.getAttribute("lbl-label")||"",e=this.getAttribute("name");if(i){let o=document.createElement("label");o.textContent=i,o.setAttribute("for",e),this.componentElement.appendChild(o)}this.formElement=document.createElement("textarea"),this.formElement.setAttribute("form-element",""),this.componentElement.appendChild(this.formElement);let t=this.getAttribute("value")||"";this.firstContent&&!t&&this.setAttribute("value",this.firstContent.trim())}_applyStyle(){let i=`
      wc-textarea {
        display: contents;
      }
    `.trim();this.loadStyle("wc-textarea-style",i)}_unWireEvents(){super._unWireEvents()}};customElements.define("wc-textarea",de);export{I as WcIconConfig,j as applyRule,ze as checkResources,Ve as countElements,Ge as disableSortable,Ue as enableSortable,Ze as extractRules,Qe as extractSrcElements,Ne as fetchApi,Ae as generateUniqueId,De as getSourcePropertyValue,Te as hide,Re as hideAndShow,Le as iconRegistry,Ye as initRules,Be as isCustomElement,k as loadCSS,A as loadLibrary,S as loadScript,L as loadStyle,Pe as loadStylesheet,He as locator,$e as locatorAll,Ke as processJSONField,Me as show,W as sleep,qe as testSchema,Xe as toggleIndicator,Je as updateJetTemplate,je as waitForPropertyPolling,Oe as waitForResourcePolling,We as waitForSelectorPolling,Ie as waitForSelectorsPolling,Fe as waitForThenHideAndShow};
